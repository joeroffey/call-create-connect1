var t=(t,e,r)=>new Promise((i,s)=>{var n=t=>{try{u(r.next(t))}catch(e){s(e)}},o=t=>{try{u(r.throw(t))}catch(e){s(e)}},u=t=>t.done?i(t.value):Promise.resolve(t.value).then(n,o);u((r=r.apply(t,e)).next())});import{W as e}from"./index-Dn59gOu4.js";import"./ui-CsvuV3K5.js";import"./vendor-lUEIvSUi.js";import"./router-Bq3F0u5g.js";import"./supabase-C2sM_OHe.js";class r extends e{constructor(){super(...arguments),this.group="CapacitorStorage"}configure(e){return t(this,arguments,function*({group:t}){"string"==typeof t&&(this.group=t)})}get(e){return t(this,null,function*(){return{value:this.impl.getItem(this.applyPrefix(e.key))}})}set(e){return t(this,null,function*(){this.impl.setItem(this.applyPrefix(e.key),e.value)})}remove(e){return t(this,null,function*(){this.impl.removeItem(this.applyPrefix(e.key))})}keys(){return t(this,null,function*(){return{keys:this.rawKeys().map(t=>t.substring(this.prefix.length))}})}clear(){return t(this,null,function*(){for(const t of this.rawKeys())this.impl.removeItem(t)})}migrate(){return t(this,null,function*(){var t;const e=[],r=[],i="_cap_",s=Object.keys(this.impl).filter(t=>0===t.indexOf(i));for(const n of s){const i=n.substring(5),s=null!==(t=this.impl.getItem(n))&&void 0!==t?t:"",{value:o}=yield this.get({key:i});"string"==typeof o?r.push(i):(yield this.set({key:i,value:s}),e.push(i))}return{migrated:e,existing:r}})}removeOld(){return t(this,null,function*(){const t=Object.keys(this.impl).filter(t=>0===t.indexOf("_cap_"));for(const e of t)this.impl.removeItem(e)})}get impl(){return window.localStorage}get prefix(){return"NativeStorage"===this.group?"":"".concat(this.group,".")}rawKeys(){return Object.keys(this.impl).filter(t=>0===t.indexOf(this.prefix))}applyPrefix(t){return this.prefix+t}}export{r as PreferencesWeb};
