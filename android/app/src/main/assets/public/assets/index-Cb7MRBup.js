const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DuF0l7H9.js","assets/ui-ySFoK2rD.js","assets/vendor-lUEIvSUi.js","assets/router-Bq3F0u5g.js","assets/supabase-C2sM_OHe.js","assets/web-DjJCOond.js","assets/web-ENRqioN5.js","assets/web-CFbqs6HA.js","assets/web-BseZIyxS.js"])))=>i.map(i=>d[i]);
var e,t,n,r,s,a,i,o,l,c,d,u,h,m,p,f,g,x,y,v,b,j,w,N,k,S,C,P,_,E,T,D,M,A,R,I,F,L,O,z,B=Object.defineProperty,V=Object.defineProperties,U=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,Y=e=>{throw TypeError(e)},K=Math.pow,G=(e,t,n)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&G(e,n,t[n]);if(q)for(var n of q(t))H.call(t,n)&&G(e,n,t[n]);return e},Q=(e,t)=>V(e,U(t)),J=(e,t)=>{var n={};for(var r in e)W.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&q)for(var r of q(e))t.indexOf(r)<0&&H.call(e,r)&&(n[r]=e[r]);return n},Z=(e,t,n)=>G(e,"symbol"!=typeof t?t+"":t,n),$=(e,t,n)=>t.has(e)||Y("Cannot "+n),ee=(e,t,n)=>($(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?Y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ne=(e,t,n,r)=>($(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),re=(e,t,n)=>($(e,t,"access private method"),n),se=(e,t,n,r)=>({set _(r){ne(e,t,r,n)},get _(){return ee(e,t,r)}}),ae=(e,t,n)=>new Promise((r,s)=>{var a=e=>{try{o(n.next(e))}catch(t){s(t)}},i=e=>{try{o(n.throw(e))}catch(t){s(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);o((n=n.apply(e,t)).next())});import{j as ie,P as oe,c as le,a as ce,u as de,A as ue,b as he,d as me,D as pe,C as fe,S as ge,e as xe,f as ye,g as ve,h as be,i as je,k as we,R as Ne,F as ke,l as Se,m as Ce,n as Pe,o as _e,p as Ee,q as Te,r as De,s as Me,I as Ae,t as Re,O as Ie,v as Fe,w as Le,T as Oe,x as ze,y as Be,z as Ve,B as Ue,E as qe,W as We,G as He,H as Ye,J as Ke,K as Ge,L as Xe,M as Qe,N as Je,Q as Ze,U as $e,V as et,X as tt,Y as nt}from"./ui-ySFoK2rD.js";import{a as rt,r as st,d as at,e as it,R as ot,c as lt}from"./vendor-lUEIvSUi.js";import{u as ct,a as dt,b as ut,B as ht,R as mt,c as pt}from"./router-Bq3F0u5g.js";import{c as ft,_ as gt}from"./supabase-C2sM_OHe.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var xt=rt;z=xt.createRoot,xt.hydrateRoot;var yt=st.forwardRef((e,t)=>ie.jsx(oe.span,Q(X({},e),{ref:t,style:X({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)})));yt.displayName="VisuallyHidden";var vt=yt,[bt,jt]=le("Tooltip",[ce]),wt=ce(),Nt="TooltipProvider",kt=700,St="tooltip.open",[Ct,Pt]=bt(Nt),_t=e=>{const{__scopeTooltip:t,delayDuration:n=kt,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,[i,o]=st.useState(!0),l=st.useRef(!1),c=st.useRef(0);return st.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),ie.jsx(Ct,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:st.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:st.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:st.useCallback(e=>{l.current=e},[]),disableHoverableContent:s,children:a})};_t.displayName=Nt;var Et="Tooltip",[Tt,Dt]=bt(Et),Mt="TooltipTrigger";st.forwardRef((e,t)=>{const n=e,{__scopeTooltip:r}=n,s=J(n,["__scopeTooltip"]),a=Dt(Mt,r),i=Pt(Mt,r),o=wt(r),l=st.useRef(null),c=de(t,l,a.onTriggerChange),d=st.useRef(!1),u=st.useRef(!1),h=st.useCallback(()=>d.current=!1,[]);return st.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),ie.jsx(ue,Q(X({asChild:!0},o),{children:ie.jsx(oe.button,Q(X({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},s),{ref:c,onPointerMove:he(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||i.isPointerInTransitRef.current||(a.onTriggerEnter(),u.current=!0))}),onPointerLeave:he(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:he(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:he(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:he(e.onBlur,a.onClose),onClick:he(e.onClick,a.onClose)}))}))}).displayName=Mt;var[At,Rt]=bt("TooltipPortal",{forceMount:void 0}),It="TooltipContent",Ft=st.forwardRef((e,t)=>{const n=Rt(It,e.__scopeTooltip),r=e,{forceMount:s=n.forceMount,side:a="top"}=r,i=J(r,["forceMount","side"]),o=Dt(It,e.__scopeTooltip);return ie.jsx(me,{present:s||o.open,children:o.disableHoverableContent?ie.jsx(Bt,Q(X({side:a},i),{ref:t})):ie.jsx(Lt,Q(X({side:a},i),{ref:t}))})}),Lt=st.forwardRef((e,t)=>{const n=Dt(It,e.__scopeTooltip),r=Pt(It,e.__scopeTooltip),s=st.useRef(null),a=de(t,s),[i,o]=st.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:u}=r,h=st.useCallback(()=>{o(null),u(!1)},[u]),m=st.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},s=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...s,...function(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return st.useEffect(()=>()=>h(),[h]),st.useEffect(()=>{if(l&&d){const e=e=>m(e,d),t=e=>m(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,m,h]),st.useEffect(()=>{if(i){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),s=!function(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,o=t[a].y,l=t[i].x,c=t[i].y;o>r!=c>r&&n<(l-e)*(r-o)/(c-o)+e&&(s=!s)}return s}(n,i);r?h():s&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,h]),ie.jsx(Bt,Q(X({},e),{ref:a}))}),[Ot,zt]=bt(Et,{isInside:!1}),Bt=st.forwardRef((e,t)=>{const n=e,{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o}=n,l=J(n,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),c=Dt(It,r),d=wt(r),{onClose:u}=c;return st.useEffect(()=>(document.addEventListener(St,u),()=>document.removeEventListener(St,u)),[u]),st.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),ie.jsx(pe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:ie.jsxs(fe,Q(X(X({"data-state":c.stateAttribute},d),l),{ref:t,style:X(X({},l.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[ie.jsx(ge,{children:s}),ie.jsx(Ot,{scope:r,isInside:!0,children:ie.jsx(vt,{id:c.contentId,role:"tooltip",children:a||s})})]}))})});Ft.displayName=It;var Vt="TooltipArrow";st.forwardRef((e,t)=>{const n=e,{__scopeTooltip:r}=n,s=J(n,["__scopeTooltip"]),a=wt(r);return zt(Vt,r).isInside?null:ie.jsx(xe,Q(X(X({},a),s),{ref:t}))}).displayName=Vt;var Ut=_t,qt=Ft;function Wt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Wt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ht(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Wt(e))&&(r&&(r+=" "),r+=t);return r}const Yt=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Yt(e.slice(1),s):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(i)))?void 0:n.classGroupId},Kt=/^\[(.+)\]$/,Gt=e=>{if(Kt.test(e)){const t=Kt.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Xt=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return $t(Object.entries(e.classGroups),n).forEach(([e,n])=>{Qt(n,r,e,t)}),r},Qt=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Jt(t,e)).classGroupId=n)}if("function"==typeof e)return Zt(e)?void Qt(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,s])=>{Qt(s,Jt(t,e),n,r)})})},Jt=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Zt=e=>e.isThemeGetter,$t=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,en=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},tn=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,s=t[0],a=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===s&&(r||e.slice(u,u+a)===t)){n.push(e.slice(l,u)),l=u+a;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},nn=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},rn=e=>X({cache:en(e.cacheSize),parseClassName:tn(e)},(e=>{const t=Xt(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Yt(n,t)||Gt(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}})(e)),sn=/\s+/;function an(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=on(e))&&(r&&(r+=" "),r+=t);return r}const on=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=on(e[r]))&&(n&&(n+=" "),n+=t);return n};function ln(e,...t){let n,r,s,a=function(o){const l=t.reduce((e,t)=>t(e),e());return n=rn(l),r=n.cache.get,s=n.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(sn);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let h=Boolean(u),m=r(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=r(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=nn(t).join(":"),f=c?p+"!":p,g=f+m;if(a.includes(g))continue;a.push(g);const x=s(m,h);for(let n=0;n<x.length;++n){const e=x[n];a.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return s(e,a),a}return function(){return a(an.apply(null,arguments))}}const cn=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},dn=/^\[(?:([a-z-]+):)?(.+)\]$/i,un=/^\d+\/\d+$/,hn=new Set(["px","full","screen"]),mn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yn=e=>bn(e)||hn.has(e)||un.test(e),vn=e=>An(e,"length",Rn),bn=e=>Boolean(e)&&!Number.isNaN(Number(e)),jn=e=>An(e,"number",bn),wn=e=>Boolean(e)&&Number.isInteger(Number(e)),Nn=e=>e.endsWith("%")&&bn(e.slice(0,-1)),kn=e=>dn.test(e),Sn=e=>mn.test(e),Cn=new Set(["length","size","percentage"]),Pn=e=>An(e,Cn,In),_n=e=>An(e,"position",In),En=new Set(["image","url"]),Tn=e=>An(e,En,Ln),Dn=e=>An(e,"",Fn),Mn=()=>!0,An=(e,t,n)=>{const r=dn.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},Rn=e=>pn.test(e)&&!fn.test(e),In=()=>!1,Fn=e=>gn.test(e),Ln=e=>xn.test(e),On=ln(()=>{const e=cn("colors"),t=cn("spacing"),n=cn("blur"),r=cn("brightness"),s=cn("borderColor"),a=cn("borderRadius"),i=cn("borderSpacing"),o=cn("borderWidth"),l=cn("contrast"),c=cn("grayscale"),d=cn("hueRotate"),u=cn("invert"),h=cn("gap"),m=cn("gradientColorStops"),p=cn("gradientColorStopPositions"),f=cn("inset"),g=cn("margin"),x=cn("opacity"),y=cn("padding"),v=cn("saturate"),b=cn("scale"),j=cn("sepia"),w=cn("skew"),N=cn("space"),k=cn("translate"),S=()=>["auto",kn,t],C=()=>[kn,t],P=()=>["",yn,vn],_=()=>["auto",bn,kn],E=()=>["","0",kn],T=()=>[bn,kn];return{cacheSize:500,separator:":",theme:{colors:[Mn],spacing:[yn,vn],blur:["none","",Sn,kn],brightness:T(),borderColor:[e],borderRadius:["none","","full",Sn,kn],borderSpacing:C(),borderWidth:P(),contrast:T(),grayscale:E(),hueRotate:T(),invert:E(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[Nn,vn],inset:S(),margin:S(),opacity:T(),padding:C(),saturate:T(),scale:T(),sepia:E(),skew:T(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",kn]}],container:["container"],columns:[{columns:[Sn]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",kn]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wn,kn]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kn]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",wn,kn]}],"grid-cols":[{"grid-cols":[Mn]}],"col-start-end":[{col:["auto",{span:["full",wn,kn]},kn]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Mn]}],"row-start-end":[{row:["auto",{span:[wn,kn]},kn]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",kn,t]}],"min-w":[{"min-w":[kn,t,"min","max","fit"]}],"max-w":[{"max-w":[kn,t,"none","full","min","max","fit","prose",{screen:[Sn]},Sn]}],h:[{h:[kn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[kn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[kn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[kn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Sn,vn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jn]}],"font-family":[{font:[Mn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",kn]}],"line-clamp":[{"line-clamp":["none",bn,jn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yn,kn]}],"list-image":[{"list-image":["none",kn]}],"list-style-type":[{list:["none","disc","decimal",kn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yn,vn]}],"underline-offset":[{"underline-offset":["auto",yn,kn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",kn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",_n]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Pn]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Tn]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[yn,kn]}],"outline-w":[{outline:[yn,vn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[yn,vn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Sn,Dn]}],"shadow-color":[{shadow:[Mn]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Sn,kn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kn]}],duration:[{duration:T()}],ease:[{ease:["linear","in","out","in-out",kn]}],delay:[{delay:T()}],animate:[{animate:["none","spin","ping","pulse","bounce",kn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[wn,kn]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[yn,vn,jn]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function zn(...e){return On(Ht(e))}const Bn=Ut;st.forwardRef((e,t)=>{var n=e,{className:r,sideOffset:s=4}=n,a=J(n,["className","sideOffset"]);return ie.jsx(qt,X({ref:t,sideOffset:s,className:zn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},a))}).displayName=qt.displayName;var Vn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Un="undefined"==typeof window||"Deno"in globalThis;function qn(){}function Wn(e,t){return"function"==typeof e?e(t):e}function Hn(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==Kn(i,t.options))return!1}else if(!Xn(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(a&&!a(t)))}function Yn(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Gn(t.options.mutationKey)!==Gn(a))return!1}else if(!Xn(t.options.mutationKey,a))return!1}return(!r||t.state.status===r)&&!(s&&!s(t))}function Kn(e,t){return((null==t?void 0:t.queryKeyHashFn)||Gn)(e)}function Gn(e){return JSON.stringify(e,(e,t)=>Zn(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function Xn(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(n=>!Xn(e[n],t[n])))}function Qn(e,t){if(e===t)return e;const n=Jn(e)&&Jn(t);if(n||Zn(e)&&Zn(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,o=n?[]:{};let l=0;for(let c=0;c<i;c++){const s=n?c:a[c];(!n&&r.includes(s)||n)&&void 0===e[s]&&void 0===t[s]?(o[s]=void 0,l++):(o[s]=Qn(e[s],t[s]),o[s]===e[s]&&void 0!==e[s]&&l++)}return s===i&&l===s?e:o}return t}function Jn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zn(e){if(!$n(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!$n(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function $n(e){return"[object Object]"===Object.prototype.toString.call(e)}function er(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?Qn(e,t):t}function tr(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function nr(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var rr=Symbol();function sr(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==rr?e.queryFn:()=>Promise.reject(new Error("Missing queryFn: '".concat(e.queryHash,"'")))}var ar=new(r=class extends Vn{constructor(){super(),te(this,e),te(this,t),te(this,n),ne(this,n,e=>{if(!Un&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ee(this,t)||this.setEventListener(ee(this,n))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=ee(this,t))||e.call(this),ne(this,t,void 0))}setEventListener(e){var r;ne(this,n,e),null==(r=ee(this,t))||r.call(this),ne(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){ee(this,e)!==t&&(ne(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof ee(this,e)?ee(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,r),ir=new(o=class extends Vn{constructor(){super(),te(this,s,!0),te(this,a),te(this,i),ne(this,i,e=>{if(!Un&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){ee(this,a)||this.setEventListener(ee(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=ee(this,a))||e.call(this),ne(this,a,void 0))}setEventListener(e){var t;ne(this,i,e),null==(t=ee(this,a))||t.call(this),ne(this,a,e(this.setOnline.bind(this)))}setOnline(e){ee(this,s)!==e&&(ne(this,s,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return ee(this,s)}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o);function or(e){return Math.min(1e3*K(2,e),3e4)}function lr(e){return"online"!==(null!=e?e:"online")||ir.isOnline()}var cr=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function dr(e){return e instanceof cr}function ur(e){let t,n=!1,r=0,s=!1;const a=function(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}(),i=()=>ar.isFocused()&&("always"===e.networkMode||ir.isOnline())&&e.canRun(),o=()=>lr(e.networkMode)&&e.canRun(),l=n=>{var r;s||(s=!0,null==(r=e.onSuccess)||r.call(e,n),null==t||t(),a.resolve(n))},c=n=>{var r;s||(s=!0,null==(r=e.onError)||r.call(e,n),null==t||t(),a.reject(n))},d=()=>new Promise(n=>{var r;t=e=>{(s||i())&&n(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var n;t=void 0,s||null==(n=e.onContinue)||n.call(e)}),u=()=>{if(s)return;let t;const a=0===r?e.initialPromise:void 0;try{t=null!=a?a:e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a,o,l;if(s)return;const h=null!=(a=e.retry)?a:Un?0:3,m=null!=(o=e.retryDelay)?o:or,p="function"==typeof m?m(r,t):m,f=!0===h||"number"==typeof h&&r<h||"function"==typeof h&&h(r,t);var g;!n&&f?(r++,null==(l=e.onFail)||l.call(e,r,t),(g=p,new Promise(e=>{setTimeout(e,g)})).then(()=>i()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:a,cancel:t=>{var n;s||(c(new cr(t)),null==(n=e.abort)||n.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var hr=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},s=e=>setTimeout(e,0);const a=r=>{t?e.push(r):s(()=>{n(r)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{s=e}}}(),mr=(c=class{constructor(){te(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&ne(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!=e?e:Un?1/0:3e5)}clearGcTimeout(){ee(this,l)&&(clearTimeout(ee(this,l)),ne(this,l,void 0))}},l=new WeakMap,c),pr=(y=class extends mr{constructor(e){var t;super(),te(this,g),te(this,d),te(this,u),te(this,h),te(this,m),te(this,p),te(this,f),ne(this,f,!1),ne(this,p,e.defaultOptions),this.setOptions(e.options),this.observers=[],ne(this,h,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ne(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=null!=(t=e.state)?t:ee(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=ee(this,m))?void 0:e.promise}setOptions(e){this.options=X(X({},ee(this,p)),e),this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||ee(this,h).remove(this)}setData(e,t){const n=er(this.state.data,e,this.options);return re(this,g,x).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){re(this,g,x).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null==(t=ee(this,m))?void 0:t.promise;return null==(n=ee(this,m))||n.cancel(e),r?r.then(qn).catch(qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,d))}isActive(){return this.observers.some(e=>{return!1!==(t=e.options.enabled,n=this,"function"==typeof t?t(n):t);var t,n})}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=ee(this,m))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=ee(this,m))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ee(this,h).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ee(this,m)&&(ee(this,f)?ee(this,m).cancel({revert:!0}):ee(this,m).cancelRetry()),this.scheduleGc()),ee(this,h).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||re(this,g,x).call(this,{type:"invalidate"})}fetch(e,t){var n,r,s;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(ee(this,m))return ee(this,m).continueRetry(),ee(this,m).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(ne(this,f,!0),a.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=sr(this.options,t),n={queryKey:this.queryKey,meta:this.meta};return i(n),ne(this,f,!1),this.options.persister?this.options.persister(e,n,this):e(n)}};i(o),null==(n=this.options.behavior)||n.onFetch(o,this),ne(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=o.fetchOptions)?void 0:r.meta)||re(this,g,x).call(this,{type:"fetch",meta:null==(s=o.fetchOptions)?void 0:s.meta});const l=e=>{var t,n,r,s;dr(e)&&e.silent||re(this,g,x).call(this,{type:"error",error:e}),dr(e)||(null==(n=(t=ee(this,h).config).onError)||n.call(t,e,this),null==(s=(r=ee(this,h).config).onSettled)||s.call(r,this.state.data,e,this)),this.scheduleGc()};return ne(this,m,ur({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,n,r,s;if(void 0!==e){try{this.setData(e)}catch(a){return void l(a)}null==(n=(t=ee(this,h).config).onSuccess)||n.call(t,e,this),null==(s=(r=ee(this,h).config).onSettled)||s.call(r,e,this.state.error,this),this.scheduleGc()}else l(new Error("".concat(this.queryHash," data is undefined")))},onError:l,onFail:(e,t)=>{re(this,g,x).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{re(this,g,x).call(this,{type:"pause"})},onContinue:()=>{re(this,g,x).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ee(this,m).start()}},d=new WeakMap,u=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,x=function(e){this.state=(t=>{var n,r,s,a;switch(e.type){case"failed":return Q(X({},t),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return Q(X({},t),{fetchStatus:"paused"});case"continue":return Q(X({},t),{fetchStatus:"fetching"});case"fetch":return Q(X(X({},t),(s=t.data,a=this.options,X({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lr(a.networkMode)?"fetching":"paused"},void 0===s&&{error:null,status:"pending"}))),{fetchMeta:null!=(n=e.meta)?n:null});case"success":return X(Q(X({},t),{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success"}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const i=e.error;return dr(i)&&i.revert&&ee(this,u)?Q(X({},ee(this,u)),{fetchStatus:"idle"}):Q(X({},t),{error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"});case"invalidate":return Q(X({},t),{isInvalidated:!0});case"setState":return X(X({},t),e.state)}})(this.state),hr.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),ee(this,h).notify({query:this,type:"updated",action:e})})},y);var fr=(b=class extends Vn{constructor(e={}){super(),te(this,v),this.config=e,ne(this,v,new Map)}build(e,t,n){var r;const s=t.queryKey,a=null!=(r=t.queryHash)?r:Kn(s,t);let i=this.get(a);return i||(i=new pr({cache:this,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){ee(this,v).has(e.queryHash)||(ee(this,v).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ee(this,v).get(e.queryHash);t&&(e.destroy(),t===e&&ee(this,v).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,v).get(e)}getAll(){return[...ee(this,v).values()]}find(e){const t=X({exact:!0},e);return this.getAll().find(e=>Hn(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Hn(e,t)):t}notify(e){hr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){hr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},v=new WeakMap,b),gr=(C=class extends mr{constructor(e){super(),te(this,k),te(this,j),te(this,w),te(this,N),this.mutationId=e.mutationId,ne(this,w,e.mutationCache),ne(this,j,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ee(this,j).includes(e)||(ee(this,j).push(e),this.clearGcTimeout(),ee(this,w).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ne(this,j,ee(this,j).filter(t=>t!==e)),this.scheduleGc(),ee(this,w).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ee(this,j).length||("pending"===this.state.status?this.scheduleGc():ee(this,w).remove(this))}continue(){var e,t;return null!=(t=null==(e=ee(this,N))?void 0:e.continue())?t:this.execute(this.state.variables)}execute(e){return ae(this,null,function*(){var t,n,r,s,a,i,o,l,c,d,u,h,m,p,f,g,x,y,v,b,j;ne(this,N,ur({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{re(this,k,S).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{re(this,k,S).call(this,{type:"pause"})},onContinue:()=>{re(this,k,S).call(this,{type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,w).canRun(this)}));const C="pending"===this.state.status,P=!ee(this,N).canStart();try{if(!C){re(this,k,S).call(this,{type:"pending",variables:e,isPaused:P}),yield null==(r=(n=ee(this,w).config).onMutate)?void 0:r.call(n,e,this);const t=yield null==(a=(s=this.options).onMutate)?void 0:a.call(s,e);t!==this.state.context&&re(this,k,S).call(this,{type:"pending",context:t,variables:e,isPaused:P})}const t=yield ee(this,N).start();return yield null==(o=(i=ee(this,w).config).onSuccess)?void 0:o.call(i,t,e,this.state.context,this),yield null==(c=(l=this.options).onSuccess)?void 0:c.call(l,t,e,this.state.context),yield null==(u=(d=ee(this,w).config).onSettled)?void 0:u.call(d,t,null,this.state.variables,this.state.context,this),yield null==(m=(h=this.options).onSettled)?void 0:m.call(h,t,null,e,this.state.context),re(this,k,S).call(this,{type:"success",data:t}),t}catch(_){try{throw yield null==(f=(p=ee(this,w).config).onError)?void 0:f.call(p,_,e,this.state.context,this),yield null==(x=(g=this.options).onError)?void 0:x.call(g,_,e,this.state.context),yield null==(v=(y=ee(this,w).config).onSettled)?void 0:v.call(y,void 0,_,this.state.variables,this.state.context,this),yield null==(j=(b=this.options).onSettled)?void 0:j.call(b,void 0,_,e,this.state.context),_}finally{re(this,k,S).call(this,{type:"error",error:_})}}finally{ee(this,w).runNext(this)}})}},j=new WeakMap,w=new WeakMap,N=new WeakMap,k=new WeakSet,S=function(e){this.state=(t=>{switch(e.type){case"failed":return Q(X({},t),{failureCount:e.failureCount,failureReason:e.error});case"pause":return Q(X({},t),{isPaused:!0});case"continue":return Q(X({},t),{isPaused:!1});case"pending":return Q(X({},t),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return Q(X({},t),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return Q(X({},t),{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),hr.batch(()=>{ee(this,j).forEach(t=>{t.onMutationUpdate(e)}),ee(this,w).notify({mutation:this,type:"updated",action:e})})},C);var xr=(E=class extends Vn{constructor(e={}){super(),te(this,P),te(this,_),this.config=e,ne(this,P,new Map),ne(this,_,Date.now())}build(e,t,n){const r=new gr({mutationCache:this,mutationId:++se(this,_)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){var t;const n=yr(e),r=null!=(t=ee(this,P).get(n))?t:[];r.push(e),ee(this,P).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var t;const n=yr(e);if(ee(this,P).has(n)){const r=null==(t=ee(this,P).get(n))?void 0:t.filter(t=>t!==e);r&&(0===r.length?ee(this,P).delete(n):ee(this,P).set(n,r))}this.notify({type:"removed",mutation:e})}canRun(e){var t;const n=null==(t=ee(this,P).get(yr(e)))?void 0:t.find(e=>"pending"===e.state.status);return!n||n===e}runNext(e){var t,n;const r=null==(t=ee(this,P).get(yr(e)))?void 0:t.find(t=>t!==e&&t.state.isPaused);return null!=(n=null==r?void 0:r.continue())?n:Promise.resolve()}clear(){hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ee(this,P).values()].flat()}find(e){const t=X({exact:!0},e);return this.getAll().find(e=>Yn(t,e))}findAll(e={}){return this.getAll().filter(t=>Yn(e,t))}notify(e){hr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return hr.batch(()=>Promise.all(e.map(e=>e.continue().catch(qn))))}},P=new WeakMap,_=new WeakMap,E);function yr(e){var t,n;return null!=(n=null==(t=e.options.scope)?void 0:t.id)?n:String(e.mutationId)}function vr(e){return{onFetch:(t,n)=>{var r,s,a,i,o;const l=t.options,c=null==(a=null==(s=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:s.fetchMore)?void 0:a.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let h={pages:[],pageParams:[]},m=0;const p=()=>ae(this,null,function*(){var n;let r=!1;const s=sr(t.options,t.fetchOptions),a=(e,n,a)=>ae(this,null,function*(){if(r)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);const i={queryKey:t.queryKey,pageParam:n,direction:a?"backward":"forward",meta:t.options.meta};var o;o=i,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)});const l=yield s(i),{maxPages:c}=t.options,d=a?nr:tr;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,n,c)}});if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},n=(e?jr:br)(l,t);h=yield a(t,n,e)}else{const t=null!=e?e:d.length;do{const e=0===m?null!=(n=u[0])?n:l.initialPageParam:br(l,h);if(m>0&&null==e)break;h=yield a(h,e),m++}while(m<t)}return h});t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,p,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=p}}}function br(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function jr(e,{pages:t,pageParams:n}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,n[0],n):void 0}var wr=(O=class{constructor(e={}){te(this,T),te(this,D),te(this,M),te(this,A),te(this,R),te(this,I),te(this,F),te(this,L),ne(this,T,e.queryCache||new fr),ne(this,D,e.mutationCache||new xr),ne(this,M,e.defaultOptions||{}),ne(this,A,new Map),ne(this,R,new Map),ne(this,I,0)}mount(){se(this,I)._++,1===ee(this,I)&&(ne(this,F,ar.subscribe(e=>ae(this,null,function*(){e&&(yield this.resumePausedMutations(),ee(this,T).onFocus())}))),ne(this,L,ir.subscribe(e=>ae(this,null,function*(){e&&(yield this.resumePausedMutations(),ee(this,T).onOnline())}))))}unmount(){var e,t;se(this,I)._--,0===ee(this,I)&&(null==(e=ee(this,F))||e.call(this),ne(this,F,void 0),null==(t=ee(this,L))||t.call(this),ne(this,L,void 0))}isFetching(e){return ee(this,T).findAll(Q(X({},e),{fetchStatus:"fetching"})).length}isMutating(e){return ee(this,D).findAll(Q(X({},e),{status:"pending"})).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=ee(this,T).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=ee(this,T).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Wn(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return ee(this,T).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=ee(this,T).get(r.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==s?void 0:s.state.data);if(void 0!==a)return ee(this,T).build(this,r).setData(a,Q(X({},n),{manual:!0}))}setQueriesData(e,t,n){return hr.batch(()=>ee(this,T).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=ee(this,T).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=ee(this,T);hr.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=ee(this,T),r=X({type:"active"},e);return hr.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n=X({revert:!0},t),r=hr.batch(()=>ee(this,T).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(qn).catch(qn)}invalidateQueries(e={},t={}){return hr.batch(()=>{var n,r;if(ee(this,T).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const s=Q(X({},e),{type:null!=(r=null!=(n=e.refetchType)?n:e.type)?r:"active"});return this.refetchQueries(s,t)})}refetchQueries(e={},t){var n;const r=Q(X({},t),{cancelRefetch:null==(n=null==t?void 0:t.cancelRefetch)||n}),s=hr.batch(()=>ee(this,T).findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(qn)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(s).then(qn)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=ee(this,T).build(this,t);return n.isStaleByTime(Wn(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(qn).catch(qn)}fetchInfiniteQuery(e){return e.behavior=vr(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(qn).catch(qn)}ensureInfiniteQueryData(e){return e.behavior=vr(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ir.isOnline()?ee(this,D).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,T)}getMutationCache(){return ee(this,D)}getDefaultOptions(){return ee(this,M)}setDefaultOptions(e){ne(this,M,e)}setQueryDefaults(e,t){ee(this,A).set(Gn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ee(this,A).values()];let n={};return t.forEach(t=>{Xn(e,t.queryKey)&&(n=X(X({},n),t.defaultOptions))}),n}setMutationDefaults(e,t){ee(this,R).set(Gn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ee(this,R).values()];let n={};return t.forEach(t=>{Xn(e,t.mutationKey)&&(n=X(X({},n),t.defaultOptions))}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t=Q(X(X(X({},ee(this,M).queries),this.getQueryDefaults(e.queryKey)),e),{_defaulted:!0});return t.queryHash||(t.queryHash=Kn(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===rr&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:Q(X(X(X({},ee(this,M).mutations),(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{_defaulted:!0})}clear(){ee(this,T).clear(),ee(this,D).clear()}},T=new WeakMap,D=new WeakMap,M=new WeakMap,A=new WeakMap,R=new WeakMap,I=new WeakMap,F=new WeakMap,L=new WeakMap,O),Nr=st.createContext(void 0),kr=({client:e,children:t})=>(st.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ie.jsx(Nr.Provider,{value:e,children:t}));const Sr=st.createContext({});function Cr(e){const t=st.useRef(null);return null===t.current&&(t.current=e()),t.current}const Pr="undefined"!=typeof window,_r=Pr?st.useLayoutEffect:st.useEffect,Er=st.createContext(null);function Tr(e,t){-1===e.indexOf(t)&&e.push(t)}function Dr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Mr=(e,t,n)=>n>t?t:n<e?e:n;const Ar={},Rr=e=>new RegExp("^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$","u").test(e);function Ir(e){return"object"==typeof e&&null!==e}const Fr=e=>new RegExp("^0[^.\\s]+$","u").test(e);function Lr(e){let t;return()=>(void 0===t&&(t=e()),t)}const Or=e=>e,zr=(e,t)=>n=>t(e(n)),Br=(...e)=>e.reduce(zr),Vr=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class Ur{constructor(){this.subscriptions=[]}add(e){return Tr(this.subscriptions,e),()=>Dr(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qr=e=>1e3*e,Wr=e=>e/1e3;function Hr(e,t){return t?e*(1e3/t):0}const Yr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Kr(e,t,n,r){if(e===t&&n===r)return Or;const s=t=>function(e,t,n,r,s){let a,i,o=0;do{i=t+(n-t)/2,a=Yr(i,r,s)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Yr(s(e),t,r)}const Gr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Xr=e=>t=>1-e(1-t),Qr=Kr(.33,1.53,.69,.99),Jr=Xr(Qr),Zr=Gr(Jr),$r=e=>(e*=2)<1?.5*Jr(e):.5*(2-Math.pow(2,-10*(e-1))),es=e=>1-Math.sin(Math.acos(e)),ts=Xr(es),ns=Gr(es),rs=Kr(.42,0,1,1),ss=Kr(0,0,.58,1),as=Kr(.42,0,.58,1),is=e=>Array.isArray(e)&&"number"==typeof e[0],os={linear:Or,easeIn:rs,easeInOut:as,easeOut:ss,circIn:es,circInOut:ns,circOut:ts,backIn:Jr,backInOut:Zr,backOut:Qr,anticipate:$r},ls=e=>{if(is(e)){e.length;const[t,n,r,s]=e;return Kr(t,n,r,s)}return"string"==typeof e?os[e]:e},cs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ds={value:null,addProjectionMetrics:null};function us(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=cs.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:(e,t=!1,a=!1)=>{const o=a&&s?n:r;return t&&i.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{o=e,s?a=!0:(s=!0,[n,r]=[r,n],n.forEach(c),t&&ds.value&&ds.value.frameloop[t].push(l),l=0,n.clear(),s=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=i,f=()=>{const a=Ar.useManualTiming?s.timestamp:performance.now();n=!1,Ar.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(a-s.timestamp,40),1)),s.timestamp=a,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),u.process(s),h.process(s),m.process(s),p.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(f))};return{schedule:cs.reduce((t,a)=>{const o=i[a];return t[a]=(t,a=!1,i=!1)=>(n||(n=!0,r=!0,s.isProcessing||e(f)),o.schedule(t,a,i)),t},{}),cancel:e=>{for(let t=0;t<cs.length;t++)i[cs[t]].cancel(e)},state:s,steps:i}}const{schedule:hs,cancel:ms,state:ps,steps:fs}=us("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Or,!0);let gs;function xs(){gs=void 0}const ys={now:()=>(void 0===gs&&ys.set(ps.isProcessing||Ar.useManualTiming?ps.timestamp:performance.now()),gs),set:e=>{gs=e,queueMicrotask(xs)}},vs=e=>t=>"string"==typeof t&&t.startsWith(e),bs=vs("--"),js=vs("var(--"),ws=e=>!!js(e)&&Ns.test(e.split("/*")[0].trim()),Ns=new RegExp("var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$","iu"),ks={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Ss=Q(X({},ks),{transform:e=>Mr(0,1,e)}),Cs=Q(X({},ks),{default:1}),Ps=e=>Math.round(1e5*e)/1e5,_s=new RegExp("-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)","gu");const Es=new RegExp("^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$","iu"),Ts=(e,t)=>n=>Boolean("string"==typeof n&&Es.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Ds=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[s,a,i,o]=r.match(_s);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},Ms=Q(X({},ks),{transform:e=>Math.round((e=>Mr(0,255,e))(e))}),As={test:Ts("rgb","red"),parse:Ds("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ms.transform(e)+", "+Ms.transform(t)+", "+Ms.transform(n)+", "+Ps(Ss.transform(r))+")"};const Rs={test:Ts("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:As.transform},Is=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Fs=Is("deg"),Ls=Is("%"),Os=Is("px"),zs=Is("vh"),Bs=Is("vw"),Vs=(()=>Q(X({},Ls),{parse:e=>Ls.parse(e)/100,transform:e=>Ls.transform(100*e)}))(),Us={test:Ts("hsl","hue"),parse:Ds("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ls.transform(Ps(t))+", "+Ls.transform(Ps(n))+", "+Ps(Ss.transform(r))+")"},qs={test:e=>As.test(e)||Rs.test(e)||Us.test(e),parse:e=>As.test(e)?As.parse(e):Us.test(e)?Us.parse(e):Rs.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?As.transform(e):Us.transform(e),getAnimatableNone:e=>{const t=qs.parse(e);return t.alpha=0,qs.transform(t)}},Ws=new RegExp("(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))","giu");const Hs="number",Ys="color",Ks=new RegExp("var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)","giu");function Gs(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(Ks,e=>(qs.test(e)?(r.color.push(a),s.push(Ys),n.push(qs.parse(e))):e.startsWith("var(")?(r.var.push(a),s.push("var"),n.push(e)):(r.number.push(a),s.push(Hs),n.push(parseFloat(e))),++a,"${}")).split("${}");return{values:n,split:i,indexes:r,types:s}}function Xs(e){return Gs(e).values}function Qs(e){const{split:t,types:n}=Gs(e),r=t.length;return e=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],void 0!==e[a]){const t=n[a];s+=t===Hs?Ps(e[a]):t===Ys?qs.transform(e[a]):e[a]}return s}}const Js=e=>"number"==typeof e?0:qs.test(e)?qs.getAnimatableNone(e):e;const Zs={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(_s))?void 0:t.length)||0)+((null==(n=e.match(Ws))?void 0:n.length)||0)>0},parse:Xs,createTransformer:Qs,getAnimatableNone:function(e){const t=Xs(e);return Qs(e)(t.map(Js))}};function $s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ea(e,t){return n=>n>0?t:e}const ta=(e,t,n)=>e+(t-e)*n,na=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},ra=[Rs,As,Us];function sa(e){const t=(n=e,ra.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===Us&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let s=0,a=0,i=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;s=$s(o,r,e+1/3),a=$s(o,r,e),i=$s(o,r,e-1/3)}else s=a=i=n;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*i),alpha:r}}(r)),r}const aa=(e,t)=>{const n=sa(e),r=sa(t);if(!n||!r)return ea(e,t);const s=X({},n);return e=>(s.red=na(n.red,r.red,e),s.green=na(n.green,r.green,e),s.blue=na(n.blue,r.blue,e),s.alpha=ta(n.alpha,r.alpha,e),As.transform(s))},ia=new Set(["none","hidden"]);function oa(e,t){return n=>ta(e,t,n)}function la(e){return"number"==typeof e?oa:"string"==typeof e?ws(e)?ea:qs.test(e)?aa:ua:Array.isArray(e)?ca:"object"==typeof e?qs.test(e)?aa:da:ea}function ca(e,t){const n=[...e],r=n.length,s=e.map((e,n)=>la(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function da(e,t){const n=X(X({},e),t),r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=la(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const ua=(e,t)=>{const n=Zs.createTransformer(t),r=Gs(e),s=Gs(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ia.has(e)&&!s.values.length||ia.has(t)&&!r.values.length?function(e,t){return ia.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Br(ca(function(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][s[i]],l=null!=(n=e.values[o])?n:0;r[a]=l,s[i]++}return r}(r,s),s.values),n):ea(e,t)};function ha(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return ta(e,t,n);return la(e)(e,t)}const ma=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>hs.update(t,e),stop:()=>ms(t),now:()=>ps.isProcessing?ps.timestamp:ys.now()}},pa=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(1e4*e(a/(s-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},fa=2e4;function ga(e){let t=0;let n=e.next(t);for(;!n.done&&t<fa;)t+=50,n=e.next(t);return t>=fa?1/0:t}function xa(e,t,n){const r=Math.max(t-5,0);return Hr(n-e(r),t-r)}const ya=100,va=10,ba=1,ja=0,wa=800,Na=.3,ka=.3,Sa={granular:.01,default:2},Ca={granular:.005,default:.5},Pa=.01,_a=10,Ea=.05,Ta=1,Da=.001;function Ma({duration:e=wa,bounce:t=Na,velocity:n=ja,mass:r=ba}){let s,a,i=1-t;i=Mr(Ea,Ta,i),e=Mr(Pa,_a,Wr(e)),i<1?(s=t=>{const r=t*i,s=r*e,a=r-n,o=Ra(t,i),l=Math.exp(-s);return Da-a/o*l},a=t=>{const r=t*i*e,a=r*n+n,o=Math.pow(i,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=Ra(Math.pow(t,2),i);return(-s(t)+Da>0?-1:1)*((a-o)*l)/c}):(s=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let s=1;s<Aa;s++)r-=e(r)/t(r);return r}(s,a,5/e);if(e=qr(e),isNaN(o))return{stiffness:ya,damping:va,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*i*Math.sqrt(r*t),duration:e}}}const Aa=12;function Ra(e,t){return e*Math.sqrt(1-t*t)}const Ia=["duration","bounce"],Fa=["stiffness","damping","mass"];function La(e,t){return t.some(t=>void 0!==e[t])}function Oa(e=ka,t=Na){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t=X({velocity:ja,stiffness:ya,damping:va,mass:ba,isResolvedFromDuration:!1},e);if(!La(e,Fa)&&La(e,Ia))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,a=2*Mr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t=Q(X({},t),{mass:ba,stiffness:s,damping:a})}else{const n=Ma(e);t=Q(X(X({},t),n),{mass:ba}),t.isResolvedFromDuration=!0}return t}(Q(X({},n),{velocity:-Wr(n.velocity||0)})),p=h||0,f=c/(2*Math.sqrt(l*d)),g=i-a,x=Wr(Math.sqrt(l/d)),y=Math.abs(g)<5;let v;if(r||(r=y?Sa.granular:Sa.default),s||(s=y?Ca.granular:Ca.default),f<1){const e=Ra(x,f);v=t=>{const n=Math.exp(-f*x*t);return i-n*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)v=e=>i-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);v=t=>{const n=Math.exp(-f*x*t),r=Math.min(e*t,300);return i-n*((p+f*x*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:m&&u||null,next:e=>{const t=v(e);if(m)o.done=e>=u;else{let n=0===e?p:0;f<1&&(n=0===e?qr(p):xa(v,e,t));const a=Math.abs(n)<=r,l=Math.abs(i-t)<=s;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(ga(b),fa),t=pa(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function za({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},m=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let p=n*t;const f=u+p,g=void 0===i?f:i(f);g!==f&&(p=g-u);const x=e=>-p*Math.exp(-e/r),y=e=>g+x(e),v=e=>{const t=x(e),n=y(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,j;const w=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,j=Oa({keyframes:[h.value,m(h.value)],velocity:xa(y,e,h.value),damping:s,stiffness:a,restDelta:c,restSpeed:d}))};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return j||void 0!==b||(t=!0,v(e),w(e)),void 0!==b&&e>=b?j.next(e-b):(!t&&v(e),h)}}}function Ba(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||Ar.mix||ha,a=e.length-1;for(let i=0;i<a;i++){let n=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Or:t;n=Br(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=Vr(e[r],e[r+1],n);return o[r](s)};return n?t=>c(Mr(e[0],e[a-1],t)):c}function Va(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Vr(0,t,r);e.push(ta(n,1,s))}}(t,e.length-1),t}function Ua({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(ls):ls(r),a={done:!1,value:t[0]},i=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:Va(t),e),o=Ba(i,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map(()=>c||as).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}Oa.applyToOptions=e=>{const t=function(e,t=100,n){const r=n(Q(X({},e),{keyframes:[0,t]})),s=Math.min(ga(r),fa);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:Wr(s)}}(e,100,Oa);return e.ease=t.ease,e.duration=qr(t.duration),e.type="keyframes",e};const qa=e=>null!==e;function Wa(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(qa),i=s<0||t&&"loop"!==n&&t%2==1?0:a.length-1;return i&&void 0!==r?r:a[i]}const Ha={decay:za,inertia:za,tween:Ua,keyframes:Ua,spring:Oa};function Ya(e){"string"==typeof e.type&&(e.type=Ha[e.type])}class Ka{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Ga=e=>e/100;class Xa extends Ka{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==ys.now()&&this.tick(ys.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Ya(e);const{type:t=Ua,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Ua;o!==Ua&&"number"!=typeof i[0]&&(this.mixKeyframes=Br(Ga,ha(i[0],i[1])),i=[0,100]);const l=o(Q(X({},e),{keyframes:i}));"mirror"===s&&(this.mirroredGenerator=o(Q(X({},e),{keyframes:[...i].reverse(),velocity:-a}))),null===l.calculatedDuration&&(l.calculatedDuration=ga(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,v=n;if(d){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/i)):"mirror"===u&&(v=a)),y=Mr(0,1,n)*i}const b=x?{done:!1,value:c[0]}:v.next(y);s&&(b.value=s(b.value));let{done:j}=b;x||null===o||(j=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&m!==za&&(b.value=Wa(c,this.options,f,this.speed)),p&&p(b.value),w&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Wr(this.calculatedDuration)}get time(){return Wr(this.currentTime)}set time(e){var t;e=qr(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ys.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Wr(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=ma,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const s=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=s):null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime||(this.startTime=null!=r?r:s),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ys.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const Qa=e=>180*e/Math.PI,Ja=e=>{const t=Qa(Math.atan2(e[1],e[0]));return $a(t)},Za={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ja,rotateZ:Ja,skewX:e=>Qa(Math.atan(e[1])),skewY:e=>Qa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},$a=e=>((e%=360)<0&&(e+=360),e),ei=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ti=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ni={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ei,scaleY:ti,scale:e=>(ei(e)+ti(e))/2,rotateX:e=>$a(Qa(Math.atan2(e[6],e[5]))),rotateY:e=>$a(Qa(Math.atan2(-e[2],e[0]))),rotateZ:Ja,rotate:Ja,skewX:e=>Qa(Math.atan(e[4])),skewY:e=>Qa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ri(e){return e.includes("scale")?1:0}function si(e,t){if(!e||"none"===e)return ri(t);const n=e.match(new RegExp("^matrix3d\\(([-\\d.e\\s,]+)\\)$","u"));let r,s;if(n)r=ni,s=n;else{const t=e.match(new RegExp("^matrix\\(([-\\d.e\\s,]+)\\)$","u"));r=Za,s=t}if(!s)return ri(t);const a=r[t],i=s[1].split(",").map(ai);return"function"==typeof a?a(i):i[a]}function ai(e){return parseFloat(e.trim())}const ii=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oi=(()=>new Set(ii))(),li=e=>e===ks||e===Os,ci=new Set(["x","y","z"]),di=ii.filter(e=>!ci.has(e));const ui={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>si(t,"x"),y:(e,{transform:t})=>si(t,"y")};ui.translateX=ui.x,ui.translateY=ui.y;const hi=new Set;let mi=!1,pi=!1,fi=!1;function gi(){if(pi){const e=Array.from(hi).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return di.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null==(r=e.getValue(t))||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}pi=!1,mi=!1,hi.forEach(e=>e.complete(fi)),hi.clear()}function xi(){hi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(pi=!0)})}class yi{constructor(e,t,n,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(hi.add(this),mi||(mi=!0,hs.read(xi),hs.resolveKeyframes(gi))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=null==r?void 0:r.get(),a=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)null!=e[t]||(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),hi.delete(this)}cancel(){"scheduled"===this.state&&(hi.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const vi=Lr(()=>void 0!==window.ScrollTimeline),bi={};function ji(e,t){const n=Lr(e);return()=>{var e;return null!=(e=bi[t])?e:n()}}const wi=ji(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Ni=([e,t,n,r])=>"cubic-bezier(".concat(e,", ").concat(t,", ").concat(n,", ").concat(r,")"),ki={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ni([0,.65,.55,1]),circOut:Ni([.55,0,1,.45]),backIn:Ni([.31,.01,.66,-.59]),backOut:Ni([.33,1.53,.69,.99])};function Si(e,t){return e?"function"==typeof e?wi()?pa(e,t):"ease-out":is(e)?Ni(e):Array.isArray(e)?e.map(e=>Si(e,t)||ki.easeOut):ki[e]:void 0}function Ci(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const u=Si(o,s);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function Pi(e){return"function"==typeof e&&"applyToOptions"in e}class _i extends Ka{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=a,this.options=e,e.type;const l=function(e){var t=e,{type:n}=t,r=J(t,["type"]);return Pi(n)&&wi()?n.applyToOptions(r):(null!=r.duration||(r.duration=300),null!=r.ease||(r.ease="easeOut"),r)}(e);this.animation=Ci(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=Wa(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return Wr(Number(n))}get time(){return Wr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=qr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&vi()?(this.animation.timeline=e,Or):t(this)}}const Ei={anticipate:$r,backInOut:Zr,circInOut:ns};function Ti(e){"string"==typeof e.ease&&e.ease in Ei&&(e.ease=Ei[e.ease])}class Di extends _i{constructor(e){Ti(e),Ya(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:s,onComplete:a,element:i}=n,o=J(n,["motionValue","onUpdate","onComplete","element"]);if(!r)return;if(void 0!==e)return void r.set(e);const l=new Xa(Q(X({},o),{autoplay:!1})),c=qr(null!=(t=this.finishedTime)?t:this.time);r.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const Mi=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Zs.test(e)&&"0"!==e||e.startsWith("url(")));function Ai(e){return Ir(e)&&"offsetHeight"in e}const Ri=new Set(["opacity","clipPath","filter","transform"]),Ii=Lr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Fi extends Ka{constructor(e){var t,n=e,{autoplay:r=!0,delay:s=0,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:d,motionValue:u,element:h}=n,m=J(n,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=ys.now();const p=X({autoplay:r,delay:s,type:a,repeat:i,repeatDelay:o,repeatType:l,name:d,motionValue:u,element:h},m),f=(null==h?void 0:h.KeyframeResolver)||yi;this.keyframeResolver=new f(c,(e,t,n)=>this.onKeyframesResolved(e,t,p,!n),d,u,h),null==(t=this.keyframeResolver)||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=ys.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Mi(s,t),o=Mi(a,t);return!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Pi(n))&&r)}(e,s,a,i)||(!Ar.instantAnimations&&o||null==c||c(Wa(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const d=r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,u=Q(X({startTime:d,finalKeyframe:t},n),{keyframes:e}),h=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:i,type:o}=e;if(!Ai(null==(t=null==n?void 0:n.owner)?void 0:t.current))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Ii()&&r&&Ri.has(r)&&("transform"!==r||!c)&&!l&&!s&&"mirror"!==a&&0!==i&&"inertia"!==o}(u)?new Di(Q(X({},u),{element:u.motionValue.owner.current})):new Xa(u);h.finished.then(()=>this.notifyFinished()).catch(Or),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),fi=!0,xi(),gi(),fi=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const Li=new RegExp("^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)","u");function Oi(e,t,n=1){const[r,s]=function(e){const t=Li.exec(e);if(!t)return[,];const[,n,r,s]=t;return["--".concat(null!=n?n:r),s]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return Rr(e)?parseFloat(e):e}return ws(s)?Oi(s,t,n+1):s}function zi(e,t){var n,r;return null!=(r=null!=(n=null==e?void 0:e[t])?n:null==e?void 0:e.default)?r:e}const Bi=new Set(["width","height","top","left","right","bottom",...ii]),Vi=e=>t=>t.test(e),Ui=[ks,Os,Ls,Fs,Bs,zs,{test:e=>"auto"===e,parse:e=>e}],qi=e=>Ui.find(Vi(e));function Wi(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Fr(e))}const Hi=new Set(["brightness","contrast","saturate","opacity"]);function Yi(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(_s)||[];if(!r)return e;const s=n.replace(r,"");let a=Hi.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const Ki=new RegExp("\\b([a-z-]*)\\(.*?\\)","gu"),Gi=Q(X({},Zs),{getAnimatableNone:e=>{const t=e.match(Ki);return t?t.map(Yi).join(" "):e}}),Xi=Q(X({},ks),{transform:Math.round}),Qi=Q(X({borderWidth:Os,borderTopWidth:Os,borderRightWidth:Os,borderBottomWidth:Os,borderLeftWidth:Os,borderRadius:Os,radius:Os,borderTopLeftRadius:Os,borderTopRightRadius:Os,borderBottomRightRadius:Os,borderBottomLeftRadius:Os,width:Os,maxWidth:Os,height:Os,maxHeight:Os,top:Os,right:Os,bottom:Os,left:Os,padding:Os,paddingTop:Os,paddingRight:Os,paddingBottom:Os,paddingLeft:Os,margin:Os,marginTop:Os,marginRight:Os,marginBottom:Os,marginLeft:Os,backgroundPositionX:Os,backgroundPositionY:Os},{rotate:Fs,rotateX:Fs,rotateY:Fs,rotateZ:Fs,scale:Cs,scaleX:Cs,scaleY:Cs,scaleZ:Cs,skew:Fs,skewX:Fs,skewY:Fs,distance:Os,translateX:Os,translateY:Os,translateZ:Os,x:Os,y:Os,z:Os,perspective:Os,transformPerspective:Os,opacity:Ss,originX:Vs,originY:Vs,originZ:Os}),{zIndex:Xi,fillOpacity:Ss,strokeOpacity:Ss,numOctaves:Xi}),Ji=Q(X({},Qi),{color:qs,backgroundColor:qs,outlineColor:qs,fill:qs,stroke:qs,borderColor:qs,borderTopColor:qs,borderRightColor:qs,borderBottomColor:qs,borderLeftColor:qs,filter:Gi,WebkitFilter:Gi}),Zi=e=>Ji[e];function $i(e,t){let n=Zi(e);return n!==Gi&&(n=Zs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const eo=new Set(["auto","none","0"]);class to extends yi{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),ws(n))){const r=Oi(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Bi.has(n)||2!==e.length)return;const[r,s]=e,a=qi(r),i=qi(s);if(a!==i)if(li(a)&&li(i))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else ui[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||Wi(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"==typeof t&&!eo.has(t)&&Gs(t).values.length&&(r=e[s]),s++}if(r&&n)for(const a of t)e[a]=$i(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ui[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=ui[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const no=(e,t)=>t&&"number"==typeof e?t.transform(e):e;class ro{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{var n,r;const s=ys.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(n=this.events.change)||n.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty();t&&(null==(r=this.events.renderRequest)||r.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=ys.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ur);const n=this.events[e].add(t);return"change"===e?()=>{n(),hs.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ys.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Hr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function so(e,t){return new ro(e,t)}const{schedule:ao,cancel:io}=us(queueMicrotask,!1),oo={x:!1,y:!1};function lo(){return oo.x||oo.y}function co(e,t){const n=function(e){if(e instanceof EventTarget)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),r=new AbortController;return[n,Q(X({passive:!0},t),{signal:r.signal}),()=>r.abort()]}function uo(e){return!("touch"===e.pointerType||lo())}const ho=(e,t)=>!!t&&(e===t||ho(e,t.parentElement)),mo=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,po=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const fo=new WeakSet;function go(e){return t=>{"Enter"===t.key&&e(t)}}function xo(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function yo(e){return mo(e)&&!lo()}function vo(e,t,n={}){const[r,s,a]=co(e,n),i=e=>{const r=e.currentTarget;if(!yo(e))return;fo.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),fo.has(r)&&fo.delete(r),yo(e)&&"function"==typeof a&&a(e,{success:t})},o=e=>{i(e,r===window||r===document||n.useGlobalTarget||ho(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,s),Ai(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=go(()=>{if(fo.has(n))return;xo(n,"down");const e=go(()=>{xo(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>xo(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,s)),t=e,po.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function bo(e){return Ir(e)&&"ownerSVGElement"in e}const jo=e=>Boolean(e&&e.getVelocity),wo=[...Ui,qs,Zs],No=st.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class ko extends st.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=Ai(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function So({children:e,isPresent:t,anchorX:n}){const r=st.useId(),s=st.useRef(null),a=st.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=st.useContext(No);return st.useInsertionEffect(()=>{const{width:e,height:o,top:l,left:c,right:d}=a.current;if(t||!s.current||!e||!o)return;const u="left"===n?"left: ".concat(c):"right: ".concat(d);s.current.dataset.motionPopId=r;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(o,"px !important;\n            ").concat(u,"px !important;\n            top: ").concat(l,"px !important;\n          }\n        ")),()=>{document.head.contains(h)&&document.head.removeChild(h)}},[t]),ie.jsx(ko,{isPresent:t,childRef:s,sizeRef:a,children:st.cloneElement(e,{ref:s})})}const Co=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o})=>{const l=Cr(Po),c=st.useId();let d=!0,u=st.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:e=>{l.set(e,!0);for(const t of l.values())if(!t)return;r&&r()},register:e=>(l.set(e,!1),()=>l.delete(e))}),[n,l,r]);return a&&d&&(u=X({},u)),st.useMemo(()=>{l.forEach((e,t)=>l.set(t,!1))},[n]),st.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),"popLayout"===i&&(e=ie.jsx(So,{isPresent:n,anchorX:o,children:e})),ie.jsx(Er.Provider,{value:u,children:e})};function Po(){return new Map}function _o(e=!0){const t=st.useContext(Er);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=st.useId();st.useEffect(()=>{if(e)return s(a)},[e]);const i=st.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const Eo=e=>e.key||"";function To(e){const t=[];return st.Children.forEach(e,e=>{st.isValidElement(e)&&t.push(e)}),t}const Do=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left"})=>{const[l,c]=_o(i),d=st.useMemo(()=>To(e),[e]),u=i&&!l?[]:d.map(Eo),h=st.useRef(!0),m=st.useRef(d),p=Cr(()=>new Map),[f,g]=st.useState(d),[x,y]=st.useState(d);_r(()=>{h.current=!1,m.current=d;for(let e=0;e<x.length;e++){const t=Eo(x[e]);u.includes(t)?p.delete(t):!0!==p.get(t)&&p.set(t,!1)}},[x,u.length,u.join("-")]);const v=[];if(d!==f){let e=[...d];for(let t=0;t<x.length;t++){const n=x[t],r=Eo(n);u.includes(r)||(e.splice(t,0,n),v.push(n))}return"wait"===a&&v.length&&(e=v),y(To(e)),g(d),null}const{forceRender:b}=st.useContext(Sr);return ie.jsx(ie.Fragment,{children:x.map(e=>{const f=Eo(e),g=!(i&&!l)&&(d===x||u.includes(f));return ie.jsx(Co,{isPresent:g,initial:!(h.current&&!n)&&void 0,custom:t,presenceAffectsLayout:s,mode:a,onExitComplete:g?void 0:()=>{if(!p.has(f))return;p.set(f,!0);let e=!0;p.forEach(t=>{t||(e=!1)}),e&&(null==b||b(),y(m.current),i&&(null==c||c()),r&&r())},anchorX:o,children:e},f)})})},Mo=st.createContext({strict:!1}),Ao={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ro={};for(const uT in Ao)Ro[uT]={isEnabled:e=>Ao[uT].some(t=>!!e[t])};const Io=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fo(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Io.has(e)}let Lo=e=>!Fo(e);try{"function"==typeof(Oo=require("@emotion/is-prop-valid").default)&&(Lo=e=>e.startsWith("on")?!Fo(e):Oo(e))}catch(dT){}var Oo;function zo(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy((...t)=>e(...t),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const Bo=st.createContext({});function Vo(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function Uo(e){return"string"==typeof e||Array.isArray(e)}const qo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wo=["initial",...qo];function Ho(e){return Vo(e.animate)||Wo.some(t=>Uo(e[t]))}function Yo(e){return Boolean(Ho(e)||e.variants)}function Ko(e){const{initial:t,animate:n}=function(e,t){if(Ho(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Uo(t)?t:void 0,animate:Uo(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,st.useContext(Bo));return st.useMemo(()=>({initial:t,animate:n}),[Go(t),Go(n)])}function Go(e){return Array.isArray(e)?e.join(" "):e}const Xo=Symbol.for("motionComponentSymbol");function Qo(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Jo(e,t,n){return st.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):Qo(n)&&(n.current=r))},[t])}const Zo=e=>e.replace(new RegExp("([a-z])([A-Z])","gu"),"$1-$2").toLowerCase(),$o="data-"+Zo("framerAppearId"),el=st.createContext({});function tl(e,t,n,r,s){var a,i;const{visualElement:o}=st.useContext(Bo),l=st.useContext(Mo),c=st.useContext(Er),d=st.useContext(No).reducedMotion,u=st.useRef(null);r=r||l.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:d}));const h=u.current,m=st.useContext(el);!h||h.projection||!s||"html"!==h.type&&"svg"!==h.type||function(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:nl(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:Boolean(i)||o&&Qo(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(u.current,n,s,m);const p=st.useRef(!1);st.useInsertionEffect(()=>{h&&p.current&&h.update(n,c)});const f=n[$o],g=st.useRef(Boolean(f)&&!(null==(a=window.MotionHandoffIsComplete)?void 0:a.call(window,f))&&(null==(i=window.MotionHasOptimisedAnimation)?void 0:i.call(window,f)));return _r(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),ao.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),st.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,f)}),g.current=!1))}),h}function nl(e){if(e)return!1!==e.options.allowProjection?e.projection:nl(e.parent)}function rl({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){var a,i;function o(e,a){let i;const o=Q(X(X({},st.useContext(No)),e),{layoutId:sl(e)}),{isStatic:l}=o,c=Ko(e),d=r(e,l);if(!l&&Pr){st.useContext(Mo).strict;const e=function(e){const{drag:t,layout:n}=Ro;if(!t&&!n)return{};const r=X(X({},t),n);return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);i=e.MeasureLayout,c.visualElement=tl(s,d,o,t,e.ProjectionNode)}return ie.jsxs(Bo.Provider,{value:c,children:[i&&c.visualElement?ie.jsx(i,X({visualElement:c.visualElement},o)):null,n(s,e,Jo(d,c.visualElement,a),d,l,c.visualElement)]})}e&&function(e){for(const t in e)Ro[t]=X(X({},Ro[t]),e[t])}(e),o.displayName="motion.".concat("string"==typeof s?s:"create(".concat(null!=(i=null!=(a=s.displayName)?a:s.name)?i:"",")"));const l=st.forwardRef(o);return l[Xo]=s,l}function sl({layoutId:e}){const t=st.useContext(Sr).id;return t&&void 0!==e?t+"-"+e:e}const al={};function il(e,{layout:t,layoutId:n}){return oi.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!al[e]||"opacity"===e)}const ol={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ll=ii.length;function cl(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(oi.has(l))i=!0;else if(bs(l))s[l]=e;else{const t=no(e,Qi[l]);l.startsWith("origin")?(o=!0,a[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",s=!0;for(let a=0;a<ll;a++){const i=ii[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=no(o,Qi[i]);l||(s=!1,r+="".concat(ol[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const dl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ul(e,t,n){for(const r in t)jo(t[r])||il(r,n)||(e[r]=t[r])}function hl(e,t){const n={};return ul(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return st.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return cl(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function ml(e,t){const n={},r=hl(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const pl={offset:"stroke-dashoffset",array:"stroke-dasharray"},fl={offset:"strokeDashoffset",array:"strokeDasharray"};function gl(e,t,n,r,s){var a,i,o=t,{attrX:l,attrY:c,attrScale:d,pathLength:u,pathSpacing:h=1,pathOffset:m=0}=o;if(cl(e,J(o,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:f}=e;p.transform&&(f.transform=p.transform,delete p.transform),(f.transform||p.transformOrigin)&&(f.transformOrigin=null!=(a=p.transformOrigin)?a:"50% 50%",delete p.transformOrigin),f.transform&&(f.transformBox=null!=(i=null==s?void 0:s.transformBox)?i:"fill-box",delete p.transformBox),void 0!==l&&(p.x=l),void 0!==c&&(p.y=c),void 0!==d&&(p.scale=d),void 0!==u&&function(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?pl:fl;e[a.offset]=Os.transform(-r);const i=Os.transform(t),o=Os.transform(n);e[a.array]="".concat(i," ").concat(o)}(p,u,h,m,!1)}const xl=()=>Q(X({},{style:{},transform:{},transformOrigin:{},vars:{}}),{attrs:{}}),yl=e=>"string"==typeof e&&"svg"===e.toLowerCase();function vl(e,t,n,r){const s=st.useMemo(()=>{const n=xl();return gl(n,t,yl(r),e.transformTemplate,e.style),Q(X({},n.attrs),{style:X({},n.style)})},[t]);if(e.style){const t={};ul(t,e.style,e),s.style=X(X({},t),s.style)}return s}const bl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jl(e){return"string"==typeof e&&!e.includes("-")&&!!(bl.indexOf(e)>-1||new RegExp("[A-Z]","u").test(e))}function wl(e=!1){return(t,n,r,{latestValues:s},a)=>{const i=(jl(t)?vl:ml)(n,s,a,t),o=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"==typeof e.values||(Lo(s)||!0===n&&Fo(s)||!t&&!Fo(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"==typeof t,e),l=t!==st.Fragment?Q(X(X({},o),i),{ref:r}):{},{children:c}=n,d=st.useMemo(()=>jo(c)?c.get():c,[c]);return st.createElement(t,Q(X({},l),{children:d}))}}function Nl(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function kl(e,t,n,r){if("function"==typeof t){const[s,a]=Nl(r);t=t(void 0!==n?n:e.custom,s,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,a]=Nl(r);t=t(void 0!==n?n:e.custom,s,a)}return t}function Sl(e){return jo(e)?e.get():e}const Cl=e=>(t,n)=>{const r=st.useContext(Bo),s=st.useContext(Er),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Pl(n,r,s,e),renderState:t()}}(e,t,r,s);return n?a():Cr(a)};function Pl(e,t,n,r){const s={},a=r(e,{});for(const h in a)s[h]=Sl(a[h]);let{initial:i,animate:o}=e;const l=Ho(e),c=Yo(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!=typeof u&&!Vo(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=kl(e,t[n]);if(r){const e=r,{transitionEnd:t,transition:n}=e,a=J(e,["transitionEnd","transition"]);for(const r in a){let e=a[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in t)s[r]=t[r]}}}return s}function _l(e,t,n){var r;const{style:s}=e,a={};for(const i in s)(jo(s[i])||t.style&&jo(t.style[i])||il(i,e)||void 0!==(null==(r=null==n?void 0:n.getValue(i))?void 0:r.liveStyle))&&(a[i]=s[i]);return a}const El={useVisualState:Cl({scrapeMotionValuesFromProps:_l,createRenderState:dl})};function Tl(e,t,n){const r=_l(e,t,n);for(const s in e)if(jo(e[s])||jo(t[s])){r[-1!==ii.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const Dl={useVisualState:Cl({scrapeMotionValuesFromProps:Tl,createRenderState:xl})};function Ml(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const s=jl(n)?Dl:El;return rl(Q(X({},s),{preloadedFeatures:e,useRender:wl(r),createVisualElement:t,Component:n}))}}function Al(e,t,n){const r=e.getProps();return kl(r,t,void 0!==n?n:r.custom,e)}const Rl=e=>Array.isArray(e);function Il(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,so(n))}function Fl(e){return Rl(e)?e[e.length-1]||0:e}function Ll(e,t){const n=e.getValue("willChange");if(r=n,Boolean(jo(r)&&r.add))return n.add(t);if(!n&&Ar.WillChange){const n=new Ar.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function Ol(e){return e.props[$o]}const zl=e=>null!==e;const Bl={type:"spring",stiffness:500,damping:25,restSpeed:10},Vl={type:"keyframes",duration:.8},Ul={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ql=(e,{keyframes:t})=>t.length>2?Vl:oi.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Bl:Ul;const Wl=(e,t,n,r={},s,a)=>i=>{const o=zi(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=qr(l);const d=Q(X({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},o),{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s});(function(e){var t=e,{when:n,delay:r,delayChildren:s,staggerChildren:a,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:u}=t,h=J(t,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(h).length})(o)||Object.assign(d,ql(e,d)),d.duration&&(d.duration=qr(d.duration)),d.repeatDelay&&(d.repeatDelay=qr(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(u=!0)),(Ar.instantAnimations||Ar.skipAnimations)&&(u=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(zl),a=t&&"loop"!==n&&t%2==1?0:s.length-1;return a&&void 0!==r?r:s[a]}(d.keyframes,o);if(void 0!==e)return void hs.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new Xa(d):new Fi(d)};function Hl({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function Yl(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let i=t,{transition:o=e.getDefaultTransition(),transitionEnd:l}=i,c=J(i,["transition","transitionEnd"]);r&&(o=r);const d=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const h in c){const t=e.getValue(h,null!=(a=e.latestValues[h])?a:null),r=c[h];if(void 0===r||u&&Hl(u,h))continue;const s=X({delay:n},zi(o||{},h)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!s.velocity)continue;let l=!1;if(window.MotionHandoffAnimation){const t=Ol(e);if(t){const e=window.MotionHandoffAnimation(t,h,hs);null!==e&&(s.startTime=e,l=!0)}}Ll(e,h),t.start(Wl(h,t,r,e.shouldReduceMotion&&Bi.has(h)?{type:!1}:s,e,l));const m=t.animation;m&&d.push(m)}return l&&Promise.all(d).then(()=>{hs.update(()=>{l&&function(e,t){let n=Al(e,t)||{},{transitionEnd:r={},transition:s={}}=n,a=J(n,["transitionEnd","transition"]);a=X(X({},a),r);for(const i in a)Il(e,i,Fl(a[i]))}(e,l)})}),d}function Kl(e,t,n={}){var r;const s=Al(e,t,"exit"===n.type?null==(r=e.presenceContext)?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const i=s?()=>Promise.all(Yl(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:s=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t,n=0,r=0,s=1,a){const i=[],o=(e.variantChildren.size-1)*r,l=1===s?(e=0)=>e*r:(e=0)=>o-e*r;return Array.from(e.variantChildren).sort(Gl).forEach((e,r)=>{e.notify("AnimationStart",t),i.push(Kl(e,t,Q(X({},a),{delay:n+l(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,s+r,i,o,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(n.delay)])}function Gl(e,t){return e.sortNodePosition(t)}function Xl(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Ql=Wo.length;function Jl(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Jl(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Ql;n++){const r=Wo[n],s=e.props[r];(Uo(s)||!1===s)&&(t[r]=s)}return t}const Zl=[...qo].reverse(),$l=qo.length;function ec(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>Kl(e,t,n));r=Promise.all(s)}else if("string"==typeof t)r=Kl(e,t,n);else{const s="function"==typeof t?Al(e,t,n.custom):t;r=Promise.all(Yl(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function tc(e){let t=ec(e),n=sc(),r=!0;const s=t=>(n,r)=>{var s;const a=Al(e,r,"exit"===t?null==(s=e.presenceContext)?void 0:s.custom:void 0);if(a){const e=a,{transition:t,transitionEnd:r}=e,s=J(e,["transition","transitionEnd"]);n=X(X(X({},n),s),r)}return n};function a(a){const{props:i}=e,o=Jl(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<$l;t++){const h=Zl[t],m=n[h],p=void 0!==i[h]?i[h]:o[h],f=Uo(p),g=h===a?m.isActive:null;!1===g&&(u=t);let x=p===o[h]&&p!==i[h]&&f;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys=X({},d),!m.isActive&&null===g||!p&&!m.prevProp||Vo(p)||"boolean"==typeof p)continue;const y=nc(m.prevProp,p);let v=y||h===a&&m.isActive&&!x&&f||t>u&&f,b=!1;const j=Array.isArray(p)?p:[p];let w=j.reduce(s(h),{});!1===g&&(w={});const{prevResolvedValues:N={}}=m,k=X(X({},N),w),S=t=>{v=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in k){const t=w[e],n=N[e];if(d.hasOwnProperty(e))continue;let r=!1;r=Rl(t)&&Rl(n)?!Xl(t,n):t!==n,r?null!=t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=w,m.isActive&&(d=X(X({},d),w)),r&&e.blockInitialAnimation&&(v=!1);v&&(!(x&&y)||b)&&l.push(...j.map(e=>({animation:e,options:{type:h}})))}if(c.size){const t={};if("boolean"!=typeof i.initial){const n=Al(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=null!=r?r:null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var s;if(n[t].isActive===r)return Promise.resolve();null==(s=e.variantChildren)||s.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;const i=a(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=sc(),r=!0}}}function nc(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Xl(t,e)}function rc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sc(){return{animate:rc(!0),whileInView:rc(),whileHover:rc(),whileTap:rc(),whileDrag:rc(),whileFocus:rc(),exit:rc()}}class ac{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ic=0;const oc={animation:{Feature:class extends ac{constructor(e){super(e),e.animationState||(e.animationState=tc(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vo(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends ac{constructor(){super(...arguments),this.id=ic++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function lc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function cc(e){return{point:{x:e.pageX,y:e.pageY}}}function dc(e,t,n,r){return lc(e,t,(e=>t=>mo(t)&&e(t,cc(t)))(n),r)}function uc({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function hc(e){return e.max-e.min}function mc(e,t,n,r=.5){e.origin=r,e.originPoint=ta(t.min,t.max,e.origin),e.scale=hc(n)/hc(t),e.translate=ta(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function pc(e,t,n,r){mc(e.x,t.x,n.x,r?r.originX:void 0),mc(e.y,t.y,n.y,r?r.originY:void 0)}function fc(e,t,n){e.min=n.min+t.min,e.max=e.min+hc(t)}function gc(e,t,n){e.min=t.min-n.min,e.max=e.min+hc(t)}function xc(e,t,n){gc(e.x,t.x,n.x),gc(e.y,t.y,n.y)}const yc=()=>({x:{min:0,max:0},y:{min:0,max:0}});function vc(e){return[e("x"),e("y")]}function bc(e){return void 0===e||1===e}function jc({scale:e,scaleX:t,scaleY:n}){return!bc(e)||!bc(t)||!bc(n)}function wc(e){return jc(e)||Nc(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Nc(e){return kc(e.x)||kc(e.y)}function kc(e){return e&&"0%"!==e}function Sc(e,t,n){return n+t*(e-n)}function Cc(e,t,n,r,s){return void 0!==s&&(e=Sc(e,s,r)),Sc(e,n,r)+t}function Pc(e,t=0,n=1,r,s){e.min=Cc(e.min,t,n,r,s),e.max=Cc(e.max,t,n,r,s)}function _c(e,{x:t,y:n}){Pc(e.x,t.translate,t.scale,t.originPoint),Pc(e.y,n.translate,n.scale,n.originPoint)}const Ec=.999999999999,Tc=1.0000000000001;function Dc(e,t){e.min=e.min+t,e.max=e.max+t}function Mc(e,t,n,r,s=.5){Pc(e,t,n,ta(e.min,e.max,s),r)}function Ac(e,t){Mc(e.x,t.x,t.scaleX,t.scale,t.originX),Mc(e.y,t.y,t.scaleY,t.scale,t.originY)}function Rc(e,t){return uc(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Ic=({current:e})=>e?e.ownerDocument.defaultView:null,Fc=(e,t)=>Math.abs(e-t);class Lc{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Bc(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Fc(e.x,t.x),r=Fc(e.y,t.y);return Math.sqrt(K(n,2)+K(r,2))}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=ps;this.history.push(Q(X({},r),{timestamp:s}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Oc(t,this.transformPagePoint),hs.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Bc("pointercancel"===e.type?this.lastMoveEventInfo:Oc(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!mo(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const a=Oc(cc(e),this.transformPagePoint),{point:i}=a,{timestamp:o}=ps;this.history=[Q(X({},i),{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,Bc(a,this.history)),this.removeListeners=Br(dc(this.contextWindow,"pointermove",this.handlePointerMove),dc(this.contextWindow,"pointerup",this.handlePointerUp),dc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ms(this.updatePoint)}}function Oc(e,t){return t?{point:t(e.point)}:e}function zc(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Bc({point:e},t){return{point:e,delta:zc(e,Uc(t)),offset:zc(e,Vc(t)),velocity:qc(t,.1)}}function Vc(e){return e[0]}function Uc(e){return e[e.length-1]}function qc(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Uc(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>qr(t)));)n--;if(!r)return{x:0,y:0};const a=Wr(s.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Wc(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Hc(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Yc=.35;function Kc(e,t,n){return{min:Gc(e,t),max:Gc(e,n)}}function Gc(e,t){return"number"==typeof e?e:e[t]||0}const Xc=new WeakMap;class Qc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Lc(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(cc(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?oo[a]?null:(oo[a]=!0,()=>{oo[a]=!1}):oo.x||oo.y?null:(oo.x=oo.y=!0,()=>{oo.x=oo.y=!1}),!this.openDragLock))return;var a;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vc(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ls.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=hc(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&hs.postRender(()=>s(e,t)),Ll(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>vc(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Ic(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&hs.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Jc(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?ta(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?ta(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,s=this.constraints;t&&Qo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:s}){return{x:Wc(e.x,n,s),y:Wc(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=Yc){return!1===e?e=0:!0===e&&(e=Yc),{x:Kc(e,"left","right"),y:Kc(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vc(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Qo(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=Rc(e,n),{scroll:s}=t;return s&&(Dc(r.x,s.offset.x),Dc(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Hc(e.x,t.x),y:Hc(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=uc(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=vc(i=>{if(!Jc(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u=X(X({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},s),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Ll(this.visualElement,e),n.start(Wl(e,n,0,t,this.visualElement,!1))}stopAnimation(){vc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vc(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){vc(t=>{const{drag:n}=this.getProps();if(!Jc(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];s.set(e[t]-ta(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Qo(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};vc(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=hc(e),s=hc(t);return s>r?n=Vr(t.min,t.max-r,e.min):r>s&&(n=Vr(e.min,e.max-s,t.min)),Mr(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),vc(t=>{if(!Jc(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:a}=this.constraints[t];n.set(ta(s,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;Xc.set(this.visualElement,this);const e=dc(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Qo(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),hs.read(t);const s=lc(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(vc(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=Yc,dragMomentum:i=!0}=e;return Q(X({},e),{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:i})}}function Jc(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const Zc=e=>(t,n)=>{e&&hs.postRender(()=>e(t,n))};const $c={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ed(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const td={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Os.test(e))return e;e=parseFloat(e)}const n=ed(e,t.target.x),r=ed(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},nd={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Zs.parse(e);if(s.length>5)return r;const a=Zs.createTransformer(e),i="number"!=typeof s[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const c=ta(o,l,.5);return"number"==typeof s[2+i]&&(s[2+i]/=c),"number"==typeof s[3+i]&&(s[3+i]/=c),a(s)}};class rd extends st.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)al[t]=e[t],bs(t)&&(al[t].isCSSVariable=!0)}(ad),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions(Q(X({},s.options),{onExitComplete:()=>this.safeToRemove()}))),$c.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:a}=n;return a?(a.isPresent=s,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||hs.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ao.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sd(e){const[t,n]=_o(),r=st.useContext(Sr);return ie.jsx(rd,Q(X({},e),{layoutGroup:r,switchLayoutGroup:st.useContext(el),isPresent:t,safeToRemove:n}))}const ad={borderRadius:Q(X({},td),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:td,borderTopRightRadius:td,borderBottomLeftRadius:td,borderBottomRightRadius:td,boxShadow:nd};const id=(e,t)=>e.depth-t.depth;class od{constructor(){this.children=[],this.isDirty=!1}add(e){Tr(this.children,e),this.isDirty=!0}remove(e){Dr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(id),this.isDirty=!1,this.children.forEach(e)}}const ld=["TopLeft","TopRight","BottomLeft","BottomRight"],cd=ld.length,dd=e=>"string"==typeof e?parseFloat(e):e,ud=e=>"number"==typeof e||Os.test(e);function hd(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const md=fd(0,.5,ts),pd=fd(.5,.95,Or);function fd(e,t,n){return r=>r<e?0:r>t?1:n(Vr(e,t,r))}function gd(e,t){e.min=t.min,e.max=t.max}function xd(e,t){gd(e.x,t.x),gd(e.y,t.y)}function yd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function vd(e,t,n,r,s){return e=Sc(e-=t,1/n,r),void 0!==s&&(e=Sc(e,1/s,r)),e}function bd(e,t,[n,r,s],a,i){!function(e,t=0,n=1,r=.5,s,a=e,i=e){Ls.test(t)&&(t=parseFloat(t),t=ta(i.min,i.max,t/100)-i.min);if("number"!=typeof t)return;let o=ta(a.min,a.max,r);e===a&&(o-=t),e.min=vd(e.min,t,n,o,s),e.max=vd(e.max,t,n,o,s)}(e,t[n],t[r],t[s],t.scale,a,i)}const jd=["x","scaleX","originX"],wd=["y","scaleY","originY"];function Nd(e,t,n,r){bd(e.x,t,jd,n?n.x:void 0,r?r.x:void 0),bd(e.y,t,wd,n?n.y:void 0,r?r.y:void 0)}function kd(e){return 0===e.translate&&1===e.scale}function Sd(e){return kd(e.x)&&kd(e.y)}function Cd(e,t){return e.min===t.min&&e.max===t.max}function Pd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function _d(e,t){return Pd(e.x,t.x)&&Pd(e.y,t.y)}function Ed(e){return hc(e.x)/hc(e.y)}function Td(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Dd{constructor(){this.members=[]}add(e){Tr(this.members,e),e.scheduleRender()}remove(e){if(Dr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Md=["","X","Y","Z"],Ad={visibility:"hidden"};let Rd=0;function Id(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Fd(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Ol(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",hs,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Fd(r)}function Ld({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=Rd++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Bd),this.nodes.forEach(Kd),this.nodes.forEach(Gd),this.nodes.forEach(Vd)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new od)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ur),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=bo(t)&&!(bo(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=ys.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(ms(r),e(a-t))};return hs.setup(r,!0),()=>ms(r)}(r,250),$c.hasAnimatedSinceResize&&($c.hasAnimatedSinceResize=!1,this.nodes.forEach(Yd))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||eu,{onLayoutAnimationStart:i,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!_d(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t=Q(X({},zi(s,"layout")),{onPlay:i,onComplete:o});(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||Yd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ms(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Xd),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fd(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(qd);this.isUpdating||this.nodes.forEach(Wd),this.isUpdating=!1,this.nodes.forEach(Hd),this.nodes.forEach(Od),this.nodes.forEach(zd),this.clearAllSnapshots();const e=ys.now();ps.delta=Mr(0,1e3/60,e-ps.timestamp),ps.timestamp=e,ps.isProcessing=!0,fs.update.process(ps),fs.preRender.process(ps),fs.render.process(ps),ps.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ao.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ud),this.sharedNodes.forEach(Qd)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||hc(this.snapshot.measuredBox.x)||hc(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Sd(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||wc(this.latestValues)||a)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),ru((r=n).x),ru(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(au))){const{scroll:e}=this.root;e&&(Dc(n.x,e.offset.x),Dc(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(xd(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:s,options:a}=t;t!==this.root&&s&&a.layoutScroll&&(s.wasRoot&&xd(n,e),Dc(n.x,s.offset.x),Dc(n.y,s.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};xd(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ac(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),wc(e.latestValues)&&Ac(n,e.latestValues)}return wc(this.latestValues)&&Ac(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};xd(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!wc(e.latestValues))continue;jc(e.latestValues)&&e.updateSnapshot();const r=yc();xd(r,e.measurePageBox()),Nd(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return wc(this.latestValues)&&Nd(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=Q(X(X({},this.options),e),{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ps.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:a}=this.options;if(this.layout&&(s||a)){if(this.resolvedRelativeTargetAt=ps.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},xc(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),xd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var i,o,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,fc(i.x,o.x,l.x),fc(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):xd(this.target,this.layout.layoutBox),_c(this.target,this.targetDelta)):xd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},xc(this.relativeTargetOrigin,this.target,e.target),xd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!jc(this.parent.latestValues)&&!Nc(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===ps.timestamp&&(r=!1),r)return;const{layout:s,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!a)return;xd(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n,r=!1){const s=n.length;if(!s)return;let a,i;t.x=t.y=1;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:s}=a.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ac(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,_c(e,i)),r&&wc(a.latestValues)&&Ac(e,a.latestValues))}t.x<Tc&&t.x>Ec&&(t.x=1),t.y<Tc&&t.y>Ec&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(yd(this.prevProjectionDelta.x,this.projectionDelta.x),yd(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),pc(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Td(this.projectionDelta.x,this.prevProjectionDelta.x)&&Td(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},s=X({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some($d));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,m,p,f,g;Jd(a.x,e.x,n),Jd(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xc(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=i,g=n,Zd(m.x,p.x,f.x,g),Zd(m.y,p.y,f.y,g),u&&(l=this.relativeTarget,h=u,Cd(l.x,h.x)&&Cd(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),xd(u,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,a){var i,o,l,c;s?(e.opacity=ta(0,null!=(i=n.opacity)?i:1,md(r)),e.opacityExit=ta(null!=(o=t.opacity)?o:1,0,pd(r))):a&&(e.opacity=ta(null!=(l=t.opacity)?l:1,null!=(c=n.opacity)?c:1,r));for(let d=0;d<cd;d++){const s="border".concat(ld[d],"Radius");let a=hd(t,s),i=hd(n,s);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||ud(a)===ud(i)?(e[s]=Math.max(ta(dd(a),dd(i),r),0),(Ls.test(i)||Ls.test(a))&&(e[s]+="%")):e[s]=i)}(t.rotate||n.rotate)&&(e.rotate=ta(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,r;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||r.stop(),this.pendingAnimation&&(ms(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hs.update(()=>{$c.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=so(0)),this.currentAnimation=function(e,t,n){const r=jo(e)?e:so(e);return r.start(Wl("",r,t,n)),r.animation}(this.motionValue,[0,1e3],Q(X({},e),{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&su(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=hc(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=hc(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}xd(t,n),Ac(t,s),pc(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Dd);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&Id("z",e,r,this.animationValues);for(let s=0;s<Md.length;s++)Id("rotate".concat(Md[s]),e,r,this.animationValues),Id("skew".concat(Md[s]),e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ad;const r={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Sl(null==e?void 0:e.pointerEvents)||"",r.transform=s?s(this.latestValues,""):"none",r;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Sl(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!wc(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}const i=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=function(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=(null==n?void 0:n.z)||0;if((s||a||i)&&(r="translate3d(".concat(s,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:a,skewX:i,skewY:o}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),s&&(r+="rotateX(".concat(s,"deg) ")),a&&(r+="rotateY(".concat(a,"deg) ")),i&&(r+="skewX(".concat(i,"deg) ")),o&&(r+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+="scale(".concat(o,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i),s&&(r.transform=s(i,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?r.opacity=a===this?null!=(n=null!=(t=i.opacity)?t:this.latestValues.opacity)?n:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:r.opacity=a===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in al){if(void 0===i[c])continue;const{correct:e,applyTo:t,isCSSVariable:n}=al[c],s="none"===r.transform?i[c]:e(i[c],a);if(t){const e=t.length;for(let n=0;n<e;n++)r[t[n]]=s}else n?this.options.visualElement.renderState.vars[c]=s:r[c]=s}return this.options.layoutId&&(r.pointerEvents=a===this?Sl(null==e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(qd),this.root.sharedNodes.clear()}}}function Od(e){e.updateLayout()}function zd(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;"size"===s?vc(e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],s=hc(r);r.min=t[e].min,r.max=r.min+s}):su(s,n.layoutBox,t)&&vc(r=>{const s=a?n.measuredBox[r]:n.layoutBox[r],i=hc(t[r]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};pc(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?pc(o,e.applyTransform(r,!0),n.measuredBox):pc(o,t,n.layoutBox);const l=!Sd(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:a}=r;if(s&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};xc(i,n.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};xc(o,t,a.layoutBox),_d(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Bd(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Vd(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ud(e){e.clearSnapshot()}function qd(e){e.clearMeasurements()}function Wd(e){e.isLayoutDirty=!1}function Hd(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Yd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Kd(e){e.resolveTargetDelta()}function Gd(e){e.calcProjection()}function Xd(e){e.resetSkewAndRotation()}function Qd(e){e.removeLeadSnapshot()}function Jd(e,t,n){e.translate=ta(t.translate,0,n),e.scale=ta(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Zd(e,t,n,r){e.min=ta(t.min,n.min,r),e.max=ta(t.max,n.max,r)}function $d(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const eu={duration:.45,ease:[.4,0,.1,1]},tu=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nu=tu("applewebkit/")&&!tu("chrome/")?Math.round:Or;function ru(e){e.min=nu(e.min),e.max=nu(e.max)}function su(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Ed(t),s=Ed(n),a=.2,!(Math.abs(r-s)<=a));var r,s,a}function au(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const iu=Ld({attachResizeListener:(e,t)=>lc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ou={current:void 0},lu=Ld({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ou.current){const e=new iu({});e.mount(window),e.setOptions({layoutScroll:!0}),ou.current=e}return ou.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),cu={pan:{Feature:class extends ac{constructor(){super(...arguments),this.removePointerDownListener=Or}onPointerDown(e){this.session=new Lc(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ic(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Zc(e),onStart:Zc(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&hs.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=dc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ac{constructor(e){super(e),this.removeGroupControls=Or,this.removeListeners=Or,this.controls=new Qc(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Or}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:lu,MeasureLayout:sd}};function du(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&hs.postRender(()=>s(t,cc(t)))}function uu(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&hs.postRender(()=>s(t,cc(t)))}const hu=new WeakMap,mu=new WeakMap,pu=e=>{const t=hu.get(e.target);t&&t(e)},fu=e=>{e.forEach(pu)};function gu(e,t,n){const r=function(e){var t=e,{root:n}=t,r=J(t,["root"]);const s=n||document;mu.has(s)||mu.set(s,{});const a=mu.get(s),i=JSON.stringify(r);return a[i]||(a[i]=new IntersectionObserver(fu,X({root:n},r))),a[i]}(t);return hu.set(e,n),r.observe(e),()=>{hu.delete(e),r.unobserve(e)}}const xu={some:0,all:1};const yu={inView:{Feature:class extends ac{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:xu[r]};return gu(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ac{mount(){const{current:e}=this.node;e&&(this.unmount=vo(e,(e,t)=>(uu(this.node,t,"Start"),(e,{success:t})=>uu(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends ac{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(dT){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Br(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends ac{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,s,a]=co(e,n),i=e=>{if(!uo(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const a=e=>{uo(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,s)};return r.forEach(e=>{e.addEventListener("pointerenter",i,s)}),a}(e,(e,t)=>(du(this.node,t,"Start"),e=>du(this.node,e,"End"))))}unmount(){}}}},vu={layout:{ProjectionNode:lu,MeasureLayout:sd}},bu={current:null},ju={current:!1};const wu=new WeakMap;const Nu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ku{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yi,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=ys.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,hs.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget=X({},o),this.initialValues=t.initial?X({},o):{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Ho(t),this.isVariantNode=Yo(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const c=this.scrapeMotionValuesFromProps(t,{},this),{willChange:d}=c,u=J(c,["willChange"]);for(const h in u){const e=u[h];void 0!==o[h]&&jo(e)&&e.set(o[h],!1)}}mount(e){this.current=e,wu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),ju.current||function(){if(ju.current=!0,Pr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>bu.current=e.matches;e.addListener(t),t()}else bu.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||bu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ms(this.notifyUpdate),ms(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=oi.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&hs.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Ro){const t=Ro[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Nu.length;n++){const t=Nu[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],a=n[r];if(jo(s))e.addValue(r,s);else if(jo(a))e.addValue(r,so(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,so(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=so(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!=(n=this.getBaseTargetFromProps(this.props,e))?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var s;return null!=r&&("string"==typeof r&&(Rr(r)||Fr(r))?r=parseFloat(r):(s=r,!wo.find(Vi(s))&&Zs.test(t)&&(r=$i(e,t))),this.setBaseTarget(e,jo(r)?r.get():r)),jo(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const s=kl(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);s&&(r=s[e])}if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||jo(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new Ur),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Su extends ku{constructor(){super(...arguments),this.KeyframeResolver=to}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jo(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}function Cu(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}class Pu extends Su{constructor(){super(...arguments),this.type="html",this.renderInstance=Cu}readValueFromInstance(e,t){var n,r;if(oi.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?ri(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return si(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),s=(bs(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof s?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Rc(e,t)}build(e,t,n){cl(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return _l(e,t,n)}}const _u=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class Eu extends Su{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yc}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oi.has(t)){const e=Zi(t);return e&&e.default||0}return t=_u.has(t)?t:Zo(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Tl(e,t,n)}build(e,t,n){gl(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){Cu(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(_u.has(s)?s:Zo(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=yl(e.tagName),super.mount(e)}}const Tu=(e,t)=>jl(e)?new Eu(t):new Pu(t,{allowProjection:e!==st.Fragment}),Du=zo(Ml(X(X(X(X({},oc),yu),cu),vu),Tu)),Mu=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Au={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=st.forwardRef((e,t)=>{var n=e,{color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c}=n,d=J(n,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return st.createElement("svg",X(Q(X({ref:t},Au),{width:s,height:s,stroke:r,strokeWidth:i?24*Number(a)/Number(s):a,className:Mu("lucide",o)}),d),[...c.map(([e,t])=>st.createElement(e,t)),...Array.isArray(l)?l:[l]])}),Iu=(e,t)=>{const n=st.forwardRef((n,r)=>{var s,a=n,{className:i}=a,o=J(a,["className"]);return st.createElement(Ru,X({ref:r,iconNode:t,className:Mu("lucide-".concat((s=e,s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),i)},o))});return n.displayName="".concat(e),n},Fu=Iu("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Lu=Iu("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ou=Iu("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),zu=Iu("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Bu=Iu("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Vu=Iu("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Uu=Iu("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),qu=Iu("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Wu=Iu("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Hu=Iu("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Yu=Iu("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ku=Iu("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Gu=Iu("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Xu=Iu("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Qu=Iu("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ju=Iu("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Zu=Iu("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),$u=Iu("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),eh=Iu("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),th=Iu("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),nh=Iu("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),rh=Iu("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),sh=Iu("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),ah=Iu("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ih=Iu("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),oh=Iu("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),lh=Iu("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),ch=Iu("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),dh=Iu("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),uh=Iu("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),hh=Iu("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),mh=Iu("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),ph=Iu("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),fh=Iu("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),gh=Iu("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),xh=Iu("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yh=Iu("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),vh=Iu("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bh=Iu("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),jh=Iu("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),wh=Iu("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Nh=Iu("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),kh=Iu("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Sh=Iu("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ch=Iu("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Ph=Iu("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_h=Iu("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),Eh=Iu("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Th=Iu("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Dh=Iu("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),Mh=Iu("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Ah=Iu("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Rh=Iu("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ih=Iu("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Fh=Iu("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Lh=Iu("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Oh=Iu("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),zh=Iu("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Bh=Iu("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Vh=Iu("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Uh=Iu("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),qh=Iu("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Wh=Iu("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Hh=Iu("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Yh=Iu("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Kh=Iu("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Gh=Iu("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]),Xh=Iu("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Qh=Iu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jh=ft("https://srwbgkssoatrhxdrrtff.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyd2Jna3Nzb2F0cmh4ZHJydGZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMzE0OTcsImV4cCI6MjA2NTkwNzQ5N30.FxPPrtKlz5MZxnS_6kAHMOMJiT25DYXOKzT1V9k-KhU");
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Zh=0;const $h=new Map,em=e=>{if($h.has(e))return;const t=setTimeout(()=>{$h.delete(e),sm({type:"REMOVE_TOAST",toastId:e})},1e6);$h.set(e,t)},tm=(e,t)=>{switch(t.type){case"ADD_TOAST":return Q(X({},e),{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return Q(X({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?X(X({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:n}=t;return n?em(n):e.toasts.forEach(e=>{em(e.id)}),Q(X({},e),{toasts:e.toasts.map(e=>e.id===n||void 0===n?Q(X({},e),{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?Q(X({},e),{toasts:[]}):Q(X({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},nm=[];let rm={toasts:[]};function sm(e){rm=tm(rm,e),nm.forEach(e=>{e(rm)})}function am(e){var t=J(e,[]);const n=(Zh=(Zh+1)%Number.MAX_SAFE_INTEGER,Zh.toString()),r=()=>sm({type:"DISMISS_TOAST",toastId:n});return sm({type:"ADD_TOAST",toast:Q(X({},t),{id:n,open:!0,onOpenChange:e=>{e||r()}})}),{id:n,dismiss:r,update:e=>sm({type:"UPDATE_TOAST",toast:Q(X({},e),{id:n})})}}function im(){const[e,t]=st.useState(rm);return st.useEffect(()=>(nm.push(t),()=>{const e=nm.indexOf(t);e>-1&&nm.splice(e,1)}),[e]),Q(X({},e),{toast:am,dismiss:e=>sm({type:"DISMISS_TOAST",toastId:e})})}const om="subscription_cache",lm=e=>{const t=(e=>{if(!e)return null;try{const t=localStorage.getItem("".concat(om,"_").concat(e));if(t)return JSON.parse(t)}catch(t){}return null})(e),[n,r]=st.useState((null==t?void 0:t.subscription)||null),[s,a]=st.useState(!0),[i,o]=st.useState((null==t?void 0:t.hasActiveSubscription)||!1),[l,c]=st.useState((null==t?void 0:t.hasUsedTrial)||!1),[d,u]=st.useState(!0),{toast:h}=im(),m=st.useRef(0),p=(e,t,n,s)=>{const a={subscription:e,hasActiveSubscription:t,hasUsedTrial:n,timestamp:Date.now()};r(e),o(t),c(n),((e,t)=>{try{localStorage.setItem("".concat(om,"_").concat(e),JSON.stringify(t))}catch(n){}})(s,a)};st.useEffect(()=>{if(!e)return r(null),o(!1),c(!1),a(!1),void u(!1);localStorage.removeItem("".concat(om,"_").concat(e)),f(!1)},[e]);const f=(t=!1)=>ae(void 0,null,function*(){if(!e)return;const n=Date.now(),r=d?1e3:3e3;if(!(n-m.current<r)){m.current=n,t||a(!0);try{const{data:{session:n}}=yield Jh.auth.getSession();if(!n)return void a(!1);const{data:r,error:s}=yield Jh.functions.invoke("check-subscription",{headers:{Authorization:"Bearer ".concat(n.access_token)}});if(s)return void a(!1);if(r.subscribed&&r.subscription_tier){const n={id:"stripe-sub",plan_type:r.subscription_tier,status:"active",current_period_end:r.subscription_end};p(n,!0,r.has_used_trial||!1,e),t||h({title:"Subscription Active!",description:"Your ".concat(r.subscription_tier," plan is now active."),duration:5e3})}else p(null,!1,r.has_used_trial||!1,e),!t&&d&&h({title:"No Active Subscription",description:"Please select a plan to get started.",duration:3e3})}catch(s){h({title:"Connection Error",description:"Failed to check subscription status. Please try again.",variant:"destructive"})}finally{a(!1),u(!1)}}});return{subscription:n,loading:s,hasActiveSubscription:i,hasUsedTrial:l,isInitialLoad:d,refetch:()=>f(!1),createCheckoutSession:e=>ae(void 0,null,function*(){try{const{data:{session:t}}=yield Jh.auth.getSession();if(!t)throw new Error("Not authenticated");const{data:n,error:r}=yield Jh.functions.invoke("create-checkout",{body:{planType:e},headers:{Authorization:"Bearer ".concat(t.access_token)}});if(r)throw r;return n.url&&(n.has_trial?h({title:"Starting Free Trial",description:"You'll get 7 days free, then be charged monthly.",duration:4e3}):h({title:"Upgrading Plan",description:"You'll be charged immediately as you've already used your free trial.",duration:4e3}),window.location.href=n.url),!0}catch(t){return h({title:"Error",description:"Failed to create checkout session. Please try again.",variant:"destructive"}),!1}}),openCustomerPortal:()=>ae(void 0,null,function*(){try{const{data:{session:e}}=yield Jh.auth.getSession();if(!e)throw new Error("Not authenticated");const{data:t,error:n}=yield Jh.functions.invoke("customer-portal",{headers:{Authorization:"Bearer ".concat(e.access_token)}});if(n)throw n;return t.url&&window.location.replace(t.url),!0}catch(e){return h({title:"Error",description:"Failed to open customer portal. Please try again.",variant:"destructive"}),!1}})}},cm=({title:e,subtitle:t,onToggleSidebar:n,sidebarOpen:r,onNewConversation:s,onExitProjectChat:a,isProjectChat:i=!1})=>ie.jsxs(Du.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass border-b border-white/5 px-4 py-3 flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx(Du.button,{whileTap:{scale:.95},onClick:n,className:"p-2 hover:bg-gray-800/50 rounded-lg transition-colors text-gray-400 hover:text-white",children:ie.jsx(Nh,{className:"w-5 h-5"})}),ie.jsx("div",{className:"flex items-center space-x-3",children:ie.jsxs("div",{children:[e&&ie.jsx("h2",{className:"text-lg font-semibold text-white",children:e}),t&&ie.jsx("p",{className:"text-sm text-gray-400",children:t})]})})]}),ie.jsx(Du.button,{whileTap:{scale:.95},whileHover:{scale:1.02},onClick:()=>{i&&a?a():s()},className:"flex items-center space-x-2 px-4 py-2 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 rounded-lg transition-all duration-200 text-sm font-medium",children:i?ie.jsxs(ie.Fragment,{children:[ie.jsx(Fu,{className:"w-4 h-4"}),ie.jsx("span",{children:"Exit Project Chat"})]}):ie.jsxs(ie.Fragment,{children:[ie.jsx(Eh,{className:"w-4 h-4"}),ie.jsx("span",{children:"New Chat"})]})})]});function dm(){}function um(){}const hm=new RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),mm=new RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),pm={};function fm(e,t){return(pm.jsx?mm:hm).test(e)}const gm=/[ \t\n\f\r]/g;function xm(e){return""===e.replace(gm,"")}class ym{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function vm(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new ym(n,r,t)}function bm(e){return e.toLowerCase()}ym.prototype.normal={},ym.prototype.property={},ym.prototype.space=void 0;class jm{constructor(e,t){this.attribute=t,this.property=e}}jm.prototype.attribute="",jm.prototype.booleanish=!1,jm.prototype.boolean=!1,jm.prototype.commaOrSpaceSeparated=!1,jm.prototype.commaSeparated=!1,jm.prototype.defined=!1,jm.prototype.mustUseProperty=!1,jm.prototype.number=!1,jm.prototype.overloadedBoolean=!1,jm.prototype.property="",jm.prototype.spaceSeparated=!1,jm.prototype.space=void 0;let wm=0;const Nm=Tm(),km=Tm(),Sm=Tm(),Cm=Tm(),Pm=Tm(),_m=Tm(),Em=Tm();function Tm(){return K(2,++wm)}const Dm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Nm,booleanish:km,commaOrSpaceSeparated:Em,commaSeparated:_m,number:Cm,overloadedBoolean:Sm,spaceSeparated:Pm},Symbol.toStringTag,{value:"Module"})),Mm=Object.keys(Dm);class Am extends jm{constructor(e,t,n,r){let s=-1;if(super(e,t),Rm(this,"space",r),"number"==typeof n)for(;++s<Mm.length;){const e=Mm[s];Rm(this,Mm[s],(n&Dm[e])===Dm[e])}}}function Rm(e,t,n){n&&(e[t]=n)}function Im(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new Am(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[bm(r)]=r,n[bm(a.attribute)]=r}return new ym(t,n,e.space)}Am.prototype.defined=!0;const Fm=Im({properties:{ariaActiveDescendant:null,ariaAtomic:km,ariaAutoComplete:null,ariaBusy:km,ariaChecked:km,ariaColCount:Cm,ariaColIndex:Cm,ariaColSpan:Cm,ariaControls:Pm,ariaCurrent:null,ariaDescribedBy:Pm,ariaDetails:null,ariaDisabled:km,ariaDropEffect:Pm,ariaErrorMessage:null,ariaExpanded:km,ariaFlowTo:Pm,ariaGrabbed:km,ariaHasPopup:null,ariaHidden:km,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pm,ariaLevel:Cm,ariaLive:null,ariaModal:km,ariaMultiLine:km,ariaMultiSelectable:km,ariaOrientation:null,ariaOwns:Pm,ariaPlaceholder:null,ariaPosInSet:Cm,ariaPressed:km,ariaReadOnly:km,ariaRelevant:null,ariaRequired:km,ariaRoleDescription:Pm,ariaRowCount:Cm,ariaRowIndex:Cm,ariaRowSpan:Cm,ariaSelected:km,ariaSetSize:Cm,ariaSort:null,ariaValueMax:Cm,ariaValueMin:Cm,ariaValueNow:Cm,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function Lm(e,t){return t in e?e[t]:t}function Om(e,t){return Lm(e,t.toLowerCase())}const zm=Im({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_m,acceptCharset:Pm,accessKey:Pm,action:null,allow:null,allowFullScreen:Nm,allowPaymentRequest:Nm,allowUserMedia:Nm,alt:null,as:null,async:Nm,autoCapitalize:null,autoComplete:Pm,autoFocus:Nm,autoPlay:Nm,blocking:Pm,capture:null,charSet:null,checked:Nm,cite:null,className:Pm,cols:Cm,colSpan:null,content:null,contentEditable:km,controls:Nm,controlsList:Pm,coords:Cm|_m,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Nm,defer:Nm,dir:null,dirName:null,disabled:Nm,download:Sm,draggable:km,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Nm,formTarget:null,headers:Pm,height:Cm,hidden:Sm,high:Cm,href:null,hrefLang:null,htmlFor:Pm,httpEquiv:Pm,id:null,imageSizes:null,imageSrcSet:null,inert:Nm,inputMode:null,integrity:null,is:null,isMap:Nm,itemId:null,itemProp:Pm,itemRef:Pm,itemScope:Nm,itemType:Pm,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Nm,low:Cm,manifest:null,max:null,maxLength:Cm,media:null,method:null,min:null,minLength:Cm,multiple:Nm,muted:Nm,name:null,nonce:null,noModule:Nm,noValidate:Nm,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Nm,optimum:Cm,pattern:null,ping:Pm,placeholder:null,playsInline:Nm,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Nm,referrerPolicy:null,rel:Pm,required:Nm,reversed:Nm,rows:Cm,rowSpan:Cm,sandbox:Pm,scope:null,scoped:Nm,seamless:Nm,selected:Nm,shadowRootClonable:Nm,shadowRootDelegatesFocus:Nm,shadowRootMode:null,shape:null,size:Cm,sizes:null,slot:null,span:Cm,spellCheck:km,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Cm,step:null,style:null,tabIndex:Cm,target:null,title:null,translate:null,type:null,typeMustMatch:Nm,useMap:null,value:km,width:Cm,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pm,axis:null,background:null,bgColor:null,border:Cm,borderColor:null,bottomMargin:Cm,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Nm,declare:Nm,event:null,face:null,frame:null,frameBorder:null,hSpace:Cm,leftMargin:Cm,link:null,longDesc:null,lowSrc:null,marginHeight:Cm,marginWidth:Cm,noResize:Nm,noHref:Nm,noShade:Nm,noWrap:Nm,object:null,profile:null,prompt:null,rev:null,rightMargin:Cm,rules:null,scheme:null,scrolling:km,standby:null,summary:null,text:null,topMargin:Cm,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Cm,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Nm,disableRemotePlayback:Nm,prefix:null,property:null,results:Cm,security:null,unselectable:null},space:"html",transform:Om}),Bm=Im({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Em,accentHeight:Cm,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Cm,amplitude:Cm,arabicForm:null,ascent:Cm,attributeName:null,attributeType:null,azimuth:Cm,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Cm,by:null,calcMode:null,capHeight:Cm,className:Pm,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Cm,diffuseConstant:Cm,direction:null,display:null,dur:null,divisor:Cm,dominantBaseline:null,download:Nm,dx:null,dy:null,edgeMode:null,editable:null,elevation:Cm,enableBackground:null,end:null,event:null,exponent:Cm,externalResourcesRequired:null,fill:null,fillOpacity:Cm,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_m,g2:_m,glyphName:_m,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Cm,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Cm,horizOriginX:Cm,horizOriginY:Cm,id:null,ideographic:Cm,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Cm,k:Cm,k1:Cm,k2:Cm,k3:Cm,k4:Cm,kernelMatrix:Em,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Cm,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Cm,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Cm,overlineThickness:Cm,paintOrder:null,panose1:null,path:null,pathLength:Cm,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pm,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Cm,pointsAtY:Cm,pointsAtZ:Cm,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Em,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Em,rev:Em,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Em,requiredFeatures:Em,requiredFonts:Em,requiredFormats:Em,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Cm,specularExponent:Cm,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Cm,strikethroughThickness:Cm,string:null,stroke:null,strokeDashArray:Em,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Cm,strokeOpacity:Cm,strokeWidth:null,style:null,surfaceScale:Cm,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Em,tabIndex:Cm,tableValues:null,target:null,targetX:Cm,targetY:Cm,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Em,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Cm,underlineThickness:Cm,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Cm,values:null,vAlphabetic:Cm,vMathematical:Cm,vectorEffect:null,vHanging:Cm,vIdeographic:Cm,version:null,vertAdvY:Cm,vertOriginX:Cm,vertOriginY:Cm,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Cm,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Lm}),Vm=Im({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),Um=Im({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Om}),qm=Im({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Wm={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Hm=/[A-Z]/g,Ym=/-[a-z]/g,Km=/^data[-\w.:]+$/i;function Gm(e){return"-"+e.toLowerCase()}function Xm(e){return e.charAt(1).toUpperCase()}const Qm=vm([Fm,zm,Vm,Um,qm],"html"),Jm=vm([Fm,Bm,Vm,Um,qm],"svg");var Zm={},$m=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ep=/\n/g,tp=/^\s*/,np=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,rp=/^:\s*/,sp=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ap=/^[;\s]*/,ip=/^\s+|\s+$/g,op="";function lp(e){return e?e.replace(ip,op):op}var cp=at&&at.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,dp.default)(e),s="function"==typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,a=e.value;s?t(r,a,e):a&&((n=n||{})[r]=a)}}),n};var dp=cp(function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(e){var t=e.match(ep);t&&(n+=t.length);var s=e.lastIndexOf("\n");r=~s?e.length-s:r+e.length}function a(){var e={line:n,column:r};return function(t){return t.position=new i(e),c(),t}}function i(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function o(s){var a=new Error(t.source+":"+n+":"+r+": "+s);if(a.reason=s,a.filename=t.source,a.line=n,a.column=r,a.source=e,!t.silent)throw a}function l(t){var n=t.exec(e);if(n){var r=n[0];return s(r),e=e.slice(r.length),n}}function c(){l(tp)}function d(e){var t;for(e=e||[];t=u();)!1!==t&&e.push(t);return e}function u(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;op!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,op===e.charAt(n-1))return o("End of comment missing");var i=e.slice(2,n-2);return r+=2,s(i),e=e.slice(n),r+=2,t({type:"comment",comment:i})}}function h(){var e=a(),t=l(np);if(t){if(u(),!l(rp))return o("property missing ':'");var n=l(sp),r=e({type:"declaration",property:lp(t[0].replace($m,op)),value:n?lp(n[0].replace($m,op)):op});return l(ap),r}}return i.prototype.content=e,c(),function(){var e,t=[];for(d(t);e=h();)!1!==e&&(t.push(e),d(t));return t}()});var up={};Object.defineProperty(up,"__esModule",{value:!0}),up.camelCase=void 0;var hp=/^--[a-zA-Z0-9_-]+$/,mp=/-([a-z])/g,pp=/^[^-]+$/,fp=/^-(webkit|moz|ms|o|khtml)-/,gp=/^-(ms)-/,xp=function(e,t){return t.toUpperCase()},yp=function(e,t){return"".concat(t,"-")};up.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||pp.test(e)||hp.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(gp,yp):e.replace(fp,yp)).replace(mp,xp))};var vp=(at&&at.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(Zm),bp=up;function jp(e,t){var n={};return e&&"string"==typeof e?((0,vp.default)(e,function(e,r){e&&r&&(n[(0,bp.camelCase)(e,t)]=r)}),n):n}jp.default=jp;const wp=it(jp),Np=Sp("end"),kp=Sp("start");function Sp(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Cp(e){return e&&"object"==typeof e?"position"in e||"type"in e?_p(e.position):"start"in e||"end"in e?_p(e):"line"in e||"column"in e?Pp(e):"":""}function Pp(e){return Ep(e&&e.line)+":"+Ep(e&&e.column)}function _p(e){return Pp(e&&e.start)+"-"+Pp(e&&e.end)}function Ep(e){return e&&"number"==typeof e?e:1}class Tp extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",s={},a=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:X({},t)),"string"==typeof e?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const i=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=Cp(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&"string"==typeof s.cause.stack?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Tp.prototype.file="",Tp.prototype.name="",Tp.prototype.reason="",Tp.prototype.message="",Tp.prototype.stack="",Tp.prototype.column=void 0,Tp.prototype.line=void 0,Tp.prototype.ancestors=void 0,Tp.prototype.cause=void 0,Tp.prototype.fatal=void 0,Tp.prototype.place=void 0,Tp.prototype.ruleId=void 0,Tp.prototype.source=void 0;const Dp={}.hasOwnProperty,Mp=new Map,Ap=/[A-Z]/g,Rp=new Set(["table","tbody","thead","tfoot","tr"]),Ip=new Set(["td","th"]),Fp="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Lp(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,s,a){const i=Array.isArray(s.children),o=kp(n);return t(r,s,a,i,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,s,a){const i=Array.isArray(s.children)?n:t;return a?i(r,s,a):i(r,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Jm:Qm,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},a=Op(s,e,void 0);return a&&"string"!=typeof a?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function Op(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(s=Jm,e.schema=s);e.ancestors.push(t);const a=qp(e,t.tagName,!1),i=function(e,t){const n={};let r,s;for(s in t.properties)if("children"!==s&&Dp.call(t.properties,s)){const a=Up(e,s,t.properties[s]);if(a){const[s,i]=a;e.tableCellAlignToStyle&&"align"===s&&"string"==typeof i&&Ip.has(t.tagName)?r=i:n[s]=i}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let o=Vp(e,t);Rp.has(t.tagName)&&(o=o.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&xm(t.value):xm(t));var t}));return zp(e,i,a,t),Bp(i,o),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Wp(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.name&&"html"===r.space&&(s=Jm,e.schema=s);e.ancestors.push(t);const a=null===t.name?e.Fragment:qp(e,t.name,!0),i=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];dm(t.type);const s=t.expression;dm(s.type);const a=s.properties[0];dm(a.type),Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Wp(e,t.position);else{const s=r.name;let a;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];dm(t.type),a=e.evaluater.evaluateExpression(t.expression)}else Wp(e,t.position);else a=null===r.value||r.value;n[s]=a}return n}(e,t),o=Vp(e,t);return zp(e,i,a,t),Bp(i,o),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Wp(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return Bp(r,Vp(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function zp(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Bp(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Vp(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:Mp;for(;++r<t.children.length;){const a=t.children[r];let i;if(e.passKeys){const e="element"===a.type?a.tagName:"mdxJsxFlowElement"===a.type||"mdxJsxTextElement"===a.type?a.name:void 0;if(e){const t=s.get(e)||0;i=e+"-"+t,s.set(e,t+1)}}const o=Op(e,a,i);void 0!==o&&n.push(o)}return n}function Up(e,t,n){const r=function(e,t){const n=bm(t);let r=t,s=jm;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Km.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Ym,Xm);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Ym.test(e)){let n=e.replace(Hm,Gm);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=Am}return new s(r,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){try{return wp(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new Tp("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=Fp+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Dp.call(e,n)&&(t[Hp(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Wm[r.property]||r.property:r.attribute,n]}}function qp(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=fm(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}r=n}else r=fm(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return Dp.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);Wp(e)}function Wp(e,t){const n=new Tp("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Fp+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Hp(e){let t=e.replace(Ap,Yp);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Yp(e){return"-"+e.toLowerCase()}const Kp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Gp={};function Xp(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Qp(e.children,t,n)}return Array.isArray(e)?Qp(e,t,n):""}function Qp(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Xp(e[s],t,n);return r.join("")}const Jp=document.createElement("i");function Zp(e){const t="&"+e+";";Jp.innerHTML=t;const n=Jp.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function $p(e,t,n,r){const s=e.length;let a,i=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function ef(e,t){return e.length>0?($p(e,e.length,0,t),e):t}const tf={}.hasOwnProperty;function nf(e,t){let n;for(n in t){const r=(tf.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){tf.call(r,a)||(r[a]=[]);const e=s[a];rf(r[a],Array.isArray(e)?e:e?[e]:[])}}}function rf(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);$p(e,0,0,r)}function sf(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function af(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const of=vf(/[A-Za-z]/),lf=vf(/[\dA-Za-z]/),cf=vf(/[#-'*+\--9=?A-Z^-~]/);function df(e){return null!==e&&(e<32||127===e)}const uf=vf(/\d/),hf=vf(/[\dA-Fa-f]/),mf=vf(/[!-/:-@[-`{-~]/);function pf(e){return null!==e&&e<-2}function ff(e){return null!==e&&(e<0||32===e)}function gf(e){return-2===e||-1===e||32===e}const xf=vf(new RegExp("\\p{P}|\\p{S}","u")),yf=vf(/\s/);function vf(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function bf(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let i="";if(37===a&&lf(e.charCodeAt(n+1))&&lf(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(i=String.fromCharCode(a,t),s=1):i="�"}else i=String.fromCharCode(a);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function jf(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(gf(r))return e.enter(n),i(r);return t(r)};function i(r){return gf(r)&&a++<s?(e.consume(r),i):(e.exit(n),t(r))}}const wf={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),jf(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):pf(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}};const Nf={tokenize:function(e){const t=this,n=[];let r,s,a,i=0;return o;function o(r){if(i<n.length){const s=n[i];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(r)}return c(r)}function l(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let s,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){s=t.events[a][1].end;break}x(i);let o=n;for(;o<t.events.length;)t.events[o][1].end=X({},s),o++;return $p(t.events,a+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(s){if(i===n.length){if(!r)return h(s);if(r.currentConstruct&&r.currentConstruct.concrete)return p(s);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(kf,d,u)(s)}function d(e){return r&&y(),x(i),h(e)}function u(e){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(kf,m,p)(n)}function m(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(r&&y(),x(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),f(n))}function f(n){return null===n?(g(e.exit("chunkFlow"),!0),x(0),void e.consume(n)):pf(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,o):(e.consume(n),f)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=s,s&&(s.next=e),s=e,r.defineSkip(e.start),r.write(o),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let s,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){o=t.events[l][1].end;break}s=!0}for(x(i),e=n;e<t.events.length;)t.events[e][1].end=X({},o),e++;$p(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function x(r){let s=n.length;for(;s-- >r;){const r=n[s];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}},kf={tokenize:function(e,t,n){return jf(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Sf(e){return null===e||ff(e)||yf(e)?1:xf(e)?2:void 0}function Cf(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Pf={name:"attention",resolveAll:function(e,t){let n,r,s,a,i,o,l,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const u=X({},e[n][1].end),h=X({},e[d][1].start);_f(u,-o),_f(h,o),a={type:o>1?"strongSequence":"emphasisSequence",start:u,end:X({},e[n][1].end)},i={type:o>1?"strongSequence":"emphasisSequence",start:X({},e[d][1].start),end:h},s={type:o>1?"strongText":"emphasisText",start:X({},e[n][1].end),end:X({},e[d][1].start)},r={type:o>1?"strong":"emphasis",start:X({},a.start),end:X({},i.end)},e[n][1].end=X({},a.start),e[d][1].start=X({},i.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=ef(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=ef(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=ef(l,Cf(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=ef(l,[["exit",s,t],["enter",i,t],["exit",i,t],["exit",r,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,l=ef(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,$p(e,n-1,d-n+3,l),d=n+l.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Sf(r);let a;return function(t){return a=t,e.enter("attentionSequence"),i(t)};function i(o){if(o===a)return e.consume(o),i;const l=e.exit("attentionSequence"),c=Sf(o),d=!c||2===c&&s||n.includes(o),u=!s||2===s&&c||n.includes(r);return l._open=Boolean(42===a?d:d&&(s||!u)),l._close=Boolean(42===a?u:u&&(c||!d)),t(o)}}};function _f(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ef={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return of(t)?(e.consume(t),a):64===t?n(t):l(t)}function a(e){return 43===e||45===e||46===e||lf(e)?(r=1,i(e)):l(e)}function i(t){return 58===t?(e.consume(t),r=0,o):(43===t||45===t||46===t||lf(t))&&r++<32?(e.consume(t),i):(r=0,l(t))}function o(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||df(r)?n(r):(e.consume(r),o)}function l(t){return 64===t?(e.consume(t),c):cf(t)?(e.consume(t),l):n(t)}function c(e){return lf(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):u(n)}function u(t){if((45===t||lf(t))&&r++<63){const n=45===t?u:d;return e.consume(t),n}return n(t)}}};const Tf={partial:!0,tokenize:function(e,t,n){return function(t){return gf(t)?jf(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||pf(e)?t(e):n(e)}}};const Df={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(gf(t))return jf(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(r){return e.attempt(Df,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return gf(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const Mf={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return mf(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Af={name:"characterReference",tokenize:function(e,t,n){const r=this;let s,a,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=lf,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=hf,c):(e.enter("characterReferenceValue"),s=7,a=uf,c(t))}function c(o){if(59===o&&i){const s=e.exit("characterReferenceValue");return a!==lf||Zp(r.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return a(o)&&i++<s?(e.consume(o),c):n(o)}}};const Rf={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},If={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,s={partial:!0,tokenize:function(e,t,n){let s=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),gf(t)?jf(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===a?(e.enter("codeFencedFenceSequence"),d(t)):n(t)}function d(t){return t===a?(s++,e.consume(t),d):s>=o?(e.exit("codeFencedFenceSequence"),gf(t)?jf(e,u,"whitespace")(t):u(t)):n(t)}function u(r){return null===r||pf(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let a,i=0,o=0;return function(t){return function(t){const n=r.events[r.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,a=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===a?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),gf(t)?jf(e,c,"whitespace")(t):c(t))}function c(n){return null===n||pf(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Rf,m,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return null===t||pf(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):gf(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),jf(e,u,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),d)}function u(t){return null===t||pf(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||pf(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===a?n(t):(e.consume(t),h)}function m(t){return e.attempt(s,y,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return i>0&&gf(t)?jf(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||pf(t)?e.check(Rf,m,y)(t):(e.enter("codeFlowValue"),x(t))}function x(t){return null===t||pf(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),x)}function y(n){return e.exit("codeFenced"),t(n)}}};const Ff={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),jf(e,s,"linePrefix",5)(t)};function s(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?o(t):pf(t)?e.attempt(Lf,a,o)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||pf(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),i)}function o(n){return e.exit("codeIndented"),t(n)}}},Lf={partial:!0,tokenize:function(e,t,n){const r=this;return s;function s(t){return r.parser.lazy[r.now().line]?n(t):pf(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):jf(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):pf(e)?s(e):n(e)}}};const Of={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,s=3;if(!("lineEnding"!==e[s][1].type&&"space"!==e[s][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=s;++t<r;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[r][1].type="codeTextPadding",s+=2,r-=2;break}t=s-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,s,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),a++,i):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(s=e.enter("codeTextSequence"),r=0,c(t)):pf(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||pf(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}}};class zf{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&Bf(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Bf(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Bf(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Bf(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Bf(this.left,t.reverse())}}}function Bf(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Vf(e){const t={};let n,r,s,a,i,o,l,c=-1;const d=new zf(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(o=n[1]._tokenizer.events,s=0,s<o.length&&"lineEndingBlank"===o[s][1].type&&(s+=2),s<o.length&&"content"===o[s][1].type))for(;++s<o.length&&"content"!==o[s][1].type;)"chunkText"===o[s][1].type&&(o[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Uf(d,c)),c=t[c],l=!0);else if(n[1]._container){for(s=c,r=void 0;s--;)if(a=d.get(s),"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type)"enter"===a[0]&&(r&&(d.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if("linePrefix"!==a[1].type&&"listItemIndent"!==a[1].type)break;r&&(n[1].end=X({},d.get(r)[1].start),i=d.slice(r,c),i.unshift(n),d.splice(r,c-r+1,i))}}return $p(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function Uf(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const o=i.events,l=[],c={};let d,u,h=-1,m=n,p=0,f=0;const g=[f];for(;m;){for(;e.get(++s)[1]!==m;);a.push(s),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),u&&i.defineSkip(m.start),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),u=m,m=m.next}for(m=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(f=h+1,g.push(f),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(i.events=[],m?(m._tokenizer=void 0,m.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=a.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const qf={resolve:function(e){return Vf(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?s(t):pf(t)?e.check(Wf,a,s)(t):(e.consume(t),r)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},Wf={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),jf(e,s,"linePrefix")};function s(s){if(null===s||pf(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}};function Hf(e,t,n,r,s,a,i,o,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return function(t){if(60===t)return e.enter(r),e.enter(s),e.enter(a),e.consume(t),e.exit(a),u;if(null===t||32===t||41===t||df(t))return n(t);return e.enter(r),e.enter(i),e.enter(o),e.enter("chunkString",{contentType:"string"}),p(t)};function u(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),u(t)):null===t||60===t||pf(t)?n(t):(e.consume(t),92===t?m:h)}function m(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(s){return d||null!==s&&41!==s&&!ff(s)?d<c&&40===s?(e.consume(s),d++,p):41===s?(e.consume(s),d--,p):null===s||32===s||40===s||df(s)?n(s):(e.consume(s),92===s?f:p):(e.exit("chunkString"),e.exit(o),e.exit(i),e.exit(r),t(s))}function f(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function Yf(e,t,n,r,s,a){const i=this;let o,l=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(a),c};function c(u){return l>999||null===u||91===u||93===u&&!o||94===u&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):93===u?(e.exit(a),e.enter(s),e.consume(u),e.exit(s),e.exit(r),t):pf(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(u))}function d(t){return null===t||91===t||93===t||pf(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!gf(t)),92===t?u:d)}function u(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function Kf(e,t,n,r,s,a){let i;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(s),e.consume(t),e.exit(s),i=40===t?41:t,o;return n(t)};function o(n){return n===i?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===i?(e.exit(a),o(i)):null===t?n(t):pf(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),jf(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===i||null===t||pf(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?d:c)}function d(t){return t===i||92===t?(e.consume(t),c):c(t)}}function Gf(e,t){let n;return function r(s){if(pf(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r;if(gf(s))return jf(e,r,n?"linePrefix":"lineSuffix")(s);return t(s)}}const Xf={name:"definition",tokenize:function(e,t,n){const r=this;let s;return function(t){return e.enter("definition"),function(t){return Yf.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function a(t){return s=af(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return ff(t)?Gf(e,o)(t):o(t)}function o(t){return Hf(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Qf,c,c)(t)}function c(t){return gf(t)?jf(e,d,"whitespace")(t):d(t)}function d(a){return null===a||pf(a)?(e.exit("definition"),r.parser.defined.push(s),t(a)):n(a)}}},Qf={partial:!0,tokenize:function(e,t,n){return function(t){return ff(t)?Gf(e,r)(t):n(t)};function r(t){return Kf(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return gf(t)?jf(e,a,"whitespace")(t):a(t)}function a(e){return null===e||pf(e)?t(e):n(e)}}};const Jf={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return pf(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Zf={name:"headingAtx",resolve:function(e,t){let n,r,s=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);s-2>a&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(a===s-1||s-4>a&&"whitespace"===e[s-2][1].type)&&(s-=a+1===s?2:4);s>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[s][1].end},r={type:"chunkText",start:e[a][1].start,end:e[s][1].end,contentType:"text"},$p(e,a,s-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&r++<6?(e.consume(t),s):null===t||ff(t)?(e.exit("atxHeadingSequence"),a(t)):n(t)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||pf(n)?(e.exit("atxHeading"),t(n)):gf(n)?jf(e,a,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),a(t))}function o(t){return null===t||35===t||ff(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),o)}}};const $f=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],eg=["pre","script","style","textarea"],tg={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let s,a,i,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),d):47===o?(e.consume(o),a=!0,m):63===o?(e.consume(o),s=3,r.interrupt?t:R):of(o)?(e.consume(o),i=String.fromCharCode(o),p):n(o)}function d(a){return 45===a?(e.consume(a),s=2,u):91===a?(e.consume(a),s=5,o=0,h):of(a)?(e.consume(a),s=4,r.interrupt?t:R):n(a)}function u(s){return 45===s?(e.consume(s),r.interrupt?t:R):n(s)}function h(s){const a="CDATA[";return s===a.charCodeAt(o++)?(e.consume(s),6===o?r.interrupt?t:C:h):n(s)}function m(t){return of(t)?(e.consume(t),i=String.fromCharCode(t),p):n(t)}function p(o){if(null===o||47===o||62===o||ff(o)){const l=47===o,c=i.toLowerCase();return l||a||!eg.includes(c)?$f.includes(i.toLowerCase())?(s=6,l?(e.consume(o),f):r.interrupt?t(o):C(o)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(o):a?g(o):x(o)):(s=1,r.interrupt?t(o):C(o))}return 45===o||lf(o)?(e.consume(o),i+=String.fromCharCode(o),p):n(o)}function f(s){return 62===s?(e.consume(s),r.interrupt?t:C):n(s)}function g(t){return gf(t)?(e.consume(t),g):k(t)}function x(t){return 47===t?(e.consume(t),k):58===t||95===t||of(t)?(e.consume(t),y):gf(t)?(e.consume(t),x):k(t)}function y(t){return 45===t||46===t||58===t||95===t||lf(t)?(e.consume(t),y):v(t)}function v(t){return 61===t?(e.consume(t),b):gf(t)?(e.consume(t),v):x(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,j):gf(t)?(e.consume(t),b):w(t)}function j(t){return t===l?(e.consume(t),l=null,N):null===t||pf(t)?n(t):(e.consume(t),j)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||ff(t)?v(t):(e.consume(t),w)}function N(e){return 47===e||62===e||gf(e)?x(e):n(e)}function k(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||pf(t)?C(t):gf(t)?(e.consume(t),S):n(t)}function C(t){return 45===t&&2===s?(e.consume(t),T):60===t&&1===s?(e.consume(t),D):62===t&&4===s?(e.consume(t),I):63===t&&3===s?(e.consume(t),R):93===t&&5===s?(e.consume(t),A):!pf(t)||6!==s&&7!==s?null===t||pf(t)?(e.exit("htmlFlowData"),P(t)):(e.consume(t),C):(e.exit("htmlFlowData"),e.check(ng,F,P)(t))}function P(t){return e.check(rg,_,F)(t)}function _(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),E}function E(t){return null===t||pf(t)?P(t):(e.enter("htmlFlowData"),C(t))}function T(t){return 45===t?(e.consume(t),R):C(t)}function D(t){return 47===t?(e.consume(t),i="",M):C(t)}function M(t){if(62===t){const n=i.toLowerCase();return eg.includes(n)?(e.consume(t),I):C(t)}return of(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),M):C(t)}function A(t){return 93===t?(e.consume(t),R):C(t)}function R(t){return 62===t?(e.consume(t),I):45===t&&2===s?(e.consume(t),R):C(t)}function I(t){return null===t||pf(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),I)}function F(n){return e.exit("htmlFlow"),t(n)}}},ng={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Tf,t,n)}}},rg={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(pf(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const sg={name:"htmlText",tokenize:function(e,t,n){const r=this;let s,a,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),y):of(t)?(e.consume(t),N):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),a=0,m):of(t)?(e.consume(t),x):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),u):pf(t)?(i=d,M(t)):(e.consume(t),d)}function u(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?D(e):45===e?u(e):d(e)}function m(t){const r="CDATA[";return t===r.charCodeAt(a++)?(e.consume(t),6===a?p:m):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),f):pf(t)?(i=p,M(t)):(e.consume(t),p)}function f(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?D(t):93===t?(e.consume(t),g):p(t)}function x(t){return null===t||62===t?D(t):pf(t)?(i=x,M(t)):(e.consume(t),x)}function y(t){return null===t?n(t):63===t?(e.consume(t),v):pf(t)?(i=y,M(t)):(e.consume(t),y)}function v(e){return 62===e?D(e):y(e)}function b(t){return of(t)?(e.consume(t),j):n(t)}function j(t){return 45===t||lf(t)?(e.consume(t),j):w(t)}function w(t){return pf(t)?(i=w,M(t)):gf(t)?(e.consume(t),w):D(t)}function N(t){return 45===t||lf(t)?(e.consume(t),N):47===t||62===t||ff(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),D):58===t||95===t||of(t)?(e.consume(t),S):pf(t)?(i=k,M(t)):gf(t)?(e.consume(t),k):D(t)}function S(t){return 45===t||46===t||58===t||95===t||lf(t)?(e.consume(t),S):C(t)}function C(t){return 61===t?(e.consume(t),P):pf(t)?(i=C,M(t)):gf(t)?(e.consume(t),C):k(t)}function P(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,_):pf(t)?(i=P,M(t)):gf(t)?(e.consume(t),P):(e.consume(t),E)}function _(t){return t===s?(e.consume(t),s=void 0,T):null===t?n(t):pf(t)?(i=_,M(t)):(e.consume(t),_)}function E(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||ff(t)?k(t):(e.consume(t),E)}function T(e){return 47===e||62===e||ff(e)?k(e):n(e)}function D(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function M(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),A}function A(t){return gf(t)?jf(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),i(t)}}};const ag={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&$p(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,s,a,i=e.length,o=0;for(;i--;)if(n=e[i][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=i,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(s=i);const l={type:"labelLink"===e[r][1].type?"link":"image",start:X({},e[r][1].start),end:X({},e[e.length-1][1].end)},c={type:"label",start:X({},e[r][1].start),end:X({},e[s][1].end)},d={type:"labelText",start:X({},e[r+o+2][1].end),end:X({},e[s-2][1].start)};return a=[["enter",l,t],["enter",c,t]],a=ef(a,e.slice(r+1,r+o+3)),a=ef(a,[["enter",d,t]]),a=ef(a,Cf(t.parser.constructs.insideSpan.null,e.slice(r+o+4,s-3),t)),a=ef(a,[["exit",d,t],e[s-2],e[s-1],["exit",c,t]]),a=ef(a,e.slice(s+1)),a=ef(a,[["exit",l,t]]),$p(e,r,e.length,a),e},tokenize:function(e,t,n){const r=this;let s,a,i=r.events.length;for(;i--;)if(("labelImage"===r.events[i][1].type||"labelLink"===r.events[i][1].type)&&!r.events[i][1]._balanced){s=r.events[i][1];break}return function(t){if(!s)return n(t);if(s._inactive)return d(t);return a=r.parser.defined.includes(af(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(ig,c,a?c:d)(t):91===t?e.attempt(og,c,a?l:d)(t):a?c(t):d(t)}function l(t){return e.attempt(lg,c,d)(t)}function c(e){return t(e)}function d(e){return s._balanced=!0,n(e)}}},ig={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return ff(t)?Gf(e,s)(t):s(t)}function s(t){return 41===t?c(t):Hf(e,a,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return ff(t)?Gf(e,o)(t):c(t)}function i(e){return n(e)}function o(t){return 34===t||39===t||40===t?Kf(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return ff(t)?Gf(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},og={tokenize:function(e,t,n){const r=this;return function(t){return Yf.call(r,e,s,a,"reference","referenceMarker","referenceString")(t)};function s(e){return r.parser.defined.includes(af(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function a(e){return n(e)}}},lg={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const cg={name:"labelStartImage",resolveAll:ag.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const dg={name:"labelStartLink",resolveAll:ag.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const ug={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),jf(e,t,"linePrefix")}}};const hg={name:"thematicBreak",tokenize:function(e,t,n){let r,s=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,a(e)}(t)};function a(a){return a===r?(e.enter("thematicBreakSequence"),i(a)):s>=3&&(null===a||pf(a))?(e.exit("thematicBreak"),t(a)):n(a)}function i(t){return t===r?(e.consume(t),s++,i):(e.exit("thematicBreakSequence"),gf(t)?jf(e,a,"whitespace")(t):a(t))}}};const mg={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Tf,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,jf(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){if(r.containerState.furtherBlankLines||!gf(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(fg,t,s)(n)});function s(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,jf(e,e.attempt(mg,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,i=0;return function(t){const s=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!r.containerState.marker||t===r.containerState.marker:uf(t)){if(r.containerState.type||(r.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(hg,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return uf(t)&&++i<10?(e.consume(t),o):(!r.interrupt||i<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Tf,r.interrupt?n:c,e.attempt(pg,u,d))}function c(e){return r.containerState.initialBlankLine=!0,a++,u(e)}function d(t){return gf(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},pg={partial:!0,tokenize:function(e,t,n){const r=this;return jf(e,function(e){const s=r.events[r.events.length-1];return!gf(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},fg={partial:!0,tokenize:function(e,t,n){const r=this;return jf(e,function(e){const s=r.events[r.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const gg={name:"setextUnderline",resolveTo:function(e,t){let n,r,s,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),s||"definition"!==e[a][1].type||(s=a);const i={type:"setextHeading",start:X({},e[n][1].start),end:X({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",i,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end=X({},e[s][1].end)):e[n][1]=i;return e.push(["exit",i,t]),e},tokenize:function(e,t,n){const r=this;let s;return function(t){let i,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){i="paragraph"===r.events[o][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||i))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),a(t)}(t);return n(t)};function a(t){return t===s?(e.consume(t),a):(e.exit("setextHeadingLineSequence"),gf(t)?jf(e,i,"lineSuffix")(t):i(t))}function i(r){return null===r||pf(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const xg={tokenize:function(e){const t=this,n=e.attempt(Tf,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,jf(e,e.attempt(this.parser.constructs.flow,r,e.attempt(qf,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const yg={resolveAll:wg()},vg=jg("string"),bg=jg("text");function jg(e){return{resolveAll:wg("text"===e?Ng:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],s=t.attempt(r,a,i);return a;function a(e){return l(e)?s(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=r[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function wg(e){return function(t,n){let r,s=-1;for(;++s<=t.length;)void 0===r?t[s]&&"data"===t[s][1].type&&(r=s,s++):t[s]&&"data"===t[s][1].type||(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return e?e(t,n):t}}function Ng(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],s=t.sliceStream(r);let a,i=s.length,o=-1,l=0;for(;i--;){const e=s[i];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)a=!0,l++;else if(-1!==e){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const s={type:n===e.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:X({},r.end)};r.end=X({},s.start),r.start.offset===r.end.offset?Object.assign(r,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}const kg={42:mg,43:mg,45:mg,48:mg,49:mg,50:mg,51:mg,52:mg,53:mg,54:mg,55:mg,56:mg,57:mg,62:Df},Sg={91:Xf},Cg={[-2]:Ff,[-1]:Ff,32:Ff},Pg={35:Zf,42:hg,45:[gg,hg],60:tg,61:gg,95:hg,96:If,126:If},_g={38:Af,92:Mf},Eg={[-5]:ug,[-4]:ug,[-3]:ug,33:cg,38:Af,42:Pf,60:[Ef,sg],91:dg,92:[Jf,Mf],93:ag,95:Pf,96:Of},Tg={null:[Pf,yg]},Dg=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Sg,disable:{null:[]},document:kg,flow:Pg,flowInitial:Cg,insideSpan:Tg,string:_g,text:Eg},Symbol.toStringTag,{value:"Module"}));function Mg(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let i=[],o=[];const l={attempt:g(function(e,t){x(e,t.from)}),check:g(f),consume:function(e){pf(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(f,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,y()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let i;if("string"==typeof a)i=a;else switch(a){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&s)continue;i=" ";break;default:i=String.fromCharCode(a)}s=-2===a,r.push(i)}return r.join("")}(u(e),t)},sliceStream:u,write:function(e){if(i=ef(i,e),m(),null!==i[i.length-1])return[];return x(t,0),c.events=Cf(a,c.events,c),c.events}};let d=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function u(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,a)];else{if(i=e.slice(n,s),r>-1){const e=i[0];"string"==typeof e?i[0]=e.slice(r):i.shift()}a>0&&i.push(e[s].slice(0,a))}return i}(i,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:s,offset:a}=r;return{_bufferIndex:e,_index:t,line:n,column:s,offset:a}}function m(){let e;for(;r._index<i.length;){const t=i[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)p(t.charCodeAt(r._bufferIndex));else p(t)}}function p(e){d=d(e)}function f(e,t){t.restore()}function g(e,t){return function(n,s,a){let i,d,u,m;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function p(e){return i=e,d=0,0===e.length?a:f(e[d])}function f(e){return function(n){m=function(){const e=h(),t=c.previous,n=c.currentConstruct,s=c.events.length,a=Array.from(o);return{from:s,restore:i};function i(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=s,o=a,y()}}(),u=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return x();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,x)(n)}}function g(t){return e(u,m),s}function x(e){return m.restore(),++d<i.length?f(i[d]):a}}}function x(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&$p(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Ag(e){const t={constructs:function(e){const t={};let n=-1;for(;++n<e.length;)nf(t,e[n]);return t}([Dg,...(e||{}).extensions||[]]),content:n(wf),defined:[],document:n(Nf),flow:n(xg),lazy:{},string:n(vg),text:n(bg)};return t;function n(e){return function(n){return Mg(t,e,n)}}}const Rg=/[\0\t\n\r]/g;const Ig=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Fg(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return sf(n.slice(t?2:1),t?16:10)}return Zp(n)||e}const Lg={}.hasOwnProperty;function Og(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:a(J),blockQuote:a(Y),characterEscape:S,characterReference:S,codeFenced:a(K),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:a(K,i),codeText:a(G,i),codeTextData:S,data:S,codeFlowValue:S,definition:a(X),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:a(Q),hardBreakEscape:a(Z),hardBreakTrailing:a(Z),htmlFlow:a($,i),htmlFlowData:S,htmlText:a($,i),htmlTextData:S,image:a(ee),label:i,link:a(te),listItem:a(re),listItemValue:h,listOrdered:a(ne,u),listUnordered:a(ne),paragraph:a(se),reference:z,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:a(J),strong:a(ae),thematicBreak:a(oe)},exit:{atxHeading:l(),atxHeadingSequence:j,autolink:l(),autolinkEmail:H,autolinkProtocol:W,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:U,characterReference:q,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:m,codeFencedFenceMeta:p,codeFlowValue:C,codeIndented:l(x),codeText:l(D),codeTextData:C,data:C,definition:l(),definitionDestinationString:b,definitionLabelString:y,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(_),hardBreakTrailing:l(_),htmlFlow:l(E),htmlFlowData:C,htmlText:l(T),htmlTextData:C,image:l(A),label:I,labelText:R,lineEnding:P,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:B,resourceDestinationString:F,resourceTitleString:L,resource:O,setextHeading:l(k),setextHeadingLineSequence:N,setextHeadingText:w,strong:l(),thematicBreak:l()}};Bg(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const a={stack:[r],tokenStack:[],config:t,enter:o,exit:c,buffer:i,resume:d,data:n},l=[];let u=-1;for(;++u<e.length;)if("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type)if("enter"===e[u][0])l.push(u);else{u=s(e,l.pop(),u)}for(u=-1;++u<e.length;){const n=t[e[u][0]];Lg.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},a),e[u][1])}if(a.tokenStack.length>0){const e=a.tokenStack[a.tokenStack.length-1];(e[1]||Ug).call(a,void 0,e[0])}for(r.position={start:zg(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:zg(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)r=t.transforms[u](r)||r;return r}function s(e,t,n){let r,s,a,i,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||i||l||a||(a=o),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let i=o;for(s=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!s||a<s)&&(r._spread=!0),r.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=s,e.splice(o,0,["enter",s,t[2]]),o++,n++,a=void 0,i=!0}}}return e[t][1]._spread=c,n}function a(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:zg(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Cp({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||Ug).call(this,e,r[0])}n.position.end=zg(e.end)}function d(){return function(e){return Xp(e,"boolean"!=typeof Gp.includeImageAlt||Gp.includeImageAlt,"boolean"!=typeof Gp.includeHtml||Gp.includeHtml)}(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function m(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function y(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=af(this.sliceSerialize(e)).toLowerCase()}function v(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function j(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function N(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:zg(e.start),end:void 0},t.push(n)),this.stack.push(n)}function C(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=zg(e.end)}function P(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=zg(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),C.call(this,e))}function _(){this.data.atHardBreak=!0}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function D(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function A(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function R(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Ig,Fg)}(t),n.identifier=af(t).toLowerCase()}function I(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function F(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function O(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function B(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=af(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function V(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=sf(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Zp(t)}this.stack[this.stack.length-1].value+=r}function q(e){this.stack.pop().position.end=zg(e.end)}function W(e){C.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function H(e){C.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function Y(){return{type:"blockquote",children:[]}}function K(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function X(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:0,children:[]}}function Z(){return{type:"break"}}function $(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function ae(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Vf(e););return e}(Ag(n).document().write(function(){let e,t=1,n="",r=!0;return function(s,a,i){const o=[];let l,c,d,u,h;for(s=n+("string"==typeof s?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,n="",r&&(65279===s.charCodeAt(0)&&d++,r=void 0);d<s.length;){if(Rg.lastIndex=d,l=Rg.exec(s),u=l&&void 0!==l.index?l.index:s.length,h=s.charCodeAt(u),!l){n=s.slice(d);break}if(10===h&&d===u&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),d<u&&(o.push(s.slice(d,u)),t+=u-d),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}d=u+1}return i&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function zg(e){return{line:e.line,column:e.column,offset:e.offset}}function Bg(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Bg(e,r):Vg(e,r)}}function Vg(e,t){let n;for(n in t)if(Lg.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Ug(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Cp({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Cp({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Cp({start:t.start,end:t.end})+") is still open")}function qg(e){const t=this;t.parser=function(n){return Og(n,Q(X(X({},t.data("settings")),e),{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}function Wg(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&"text"===a.type?a.value="["+a.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&"text"===i.type?i.value+=r:s.push({type:"text",value:r}),s}function Hg(e){const t=e.spread;return null==t?e.children.length>1:t}function Yg(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Kg(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Kg(t.slice(s),s>0,!1)),a.join("")}function Kg(e,t,n){let r=0,s=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(s-1);for(;9===t||32===t;)s--,t=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}const Gg={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=bf(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let i,o=e.footnoteCounts.get(r);void 0===o?(o=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=a+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Wg(e,t);const s={src:bf(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){const n={src:bf(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Wg(e,t);const s={href:bf(r.url||"")};null!==r.title&&void 0!==r.title&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){const n={href:bf(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Hg(n[r])}return t}(n):Hg(t),a={},i=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const e=r[o];(s||0!==o||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?i.push(e):i.push(...e.children)}const l=r[r.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&i.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:a,children:i};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let s=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++s<r.length;){const e=r[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=kp(t.children[1]),i=Np(t.children[t.children.length-1]);a&&i&&(r.position={start:a,end:i}),s.push(r)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,s=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,i=a?a.length:t.children.length;let o=-1;const l=[];for(;++o<i;){const n=t.children[o],r={},i=a?a[o]:void 0;i&&(r.align=i);let c={type:"element",tagName:s,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Yg(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Xg,yaml:Xg,definition:Xg,footnoteDefinition:Xg};function Xg(){}const Qg="object"==typeof self?self:globalThis,Jg=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[a,i]=t[s];switch(a){case 0:case-1:return n(i,s);case 1:{const e=n([],s);for(const t of i)e.push(r(t));return e}case 2:{const e=n({},s);for(const[t,n]of i)e[r(t)]=r(n);return e}case 3:return n(new Date(i),s);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of i)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,s);for(const t of i)e.add(r(t));return e}case 7:{const{name:e,message:t}=i;return n(new Qg[e](t),s)}case 8:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:e}=new Uint8Array(i);return n(new DataView(e),i)}}return n(new Qg[a](i),s)};return r})(new Map,e)(0),Zg="",{toString:$g}={},{keys:ex}=Object,tx=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=$g.call(e).slice(8,-1);switch(n){case"Array":return[1,Zg];case"Object":return[2,Zg];case"Date":return[3,Zg];case"RegExp":return[4,Zg];case"Map":return[5,Zg];case"Set":return[6,Zg];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},nx=([e,t])=>0===e&&("function"===t||"symbol"===t),rx=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},a=r=>{if(n.has(r))return n.get(r);let[i,o]=tx(r);switch(i){case 0:{let t=r;switch(o){case"bigint":i=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return s([-1],r)}return s([i,t],r)}case 1:{if(o){let e=r;return"DataView"===o?e=new Uint8Array(r.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(r)),s([o,[...e]],r)}const e=[],t=s([i,e],r);for(const n of r)e.push(a(n));return t}case 2:{if(o)switch(o){case"BigInt":return s([o,r.toString()],r);case"Boolean":case"Number":case"String":return s([o,r.valueOf()],r)}if(t&&"toJSON"in r)return a(r.toJSON());const n=[],l=s([i,n],r);for(const t of ex(r))!e&&nx(tx(r[t]))||n.push([a(t),a(r[t])]);return l}case 3:return s([i,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([i,{source:e,flags:t}],r)}case 5:{const t=[],n=s([i,t],r);for(const[s,i]of r)(e||!nx(tx(s))&&!nx(tx(i)))&&t.push([a(s),a(i)]);return n}case 6:{const t=[],n=s([i,t],r);for(const s of r)!e&&nx(tx(s))||t.push(a(s));return n}}const{message:l}=r;return s([i,{name:o,message:l}],r)};return a})(!(t||n),!!t,new Map,r)(e),r},sx="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Jg(rx(e,t)):structuredClone(e):(e,t)=>Jg(rx(e,t));function ax(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function ix(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const ox=function(e){if(null==e)return cx;if("function"==typeof e)return lx(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ox(e[n]);return lx(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return lx(n);function n(n){const r=n;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}(e);if("string"==typeof e)return function(e){return lx(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function lx(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function cx(){return!0}const dx=[],ux=!0,hx=!1;function mx(e,t,n,r){let s;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):s=t;const a=ox(s),i=r?-1:1;!function e(s,o,l){const c=s&&"object"==typeof s?s:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return d;function d(){let c,d,u,h=dx;if((!t||a(s,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[ux,e];return null==e?dx:[e]}(n(s,l)),h[0]===hx))return h;if("children"in s&&s.children){const t=s;if(t.children&&"skip"!==h[0])for(d=(r?t.children.length:-1)+i,u=l.concat(t);d>-1&&d<t.children.length;){const n=t.children[d];if(c=e(n,d,u)(),c[0]===hx)return c;d="number"==typeof c[1]?c[1]:d+i}}return h}}(e,void 0,[])()}function px(e,t,n,r){let s,a,i;"function"==typeof t&&"function"!=typeof n?(a=void 0,i=t,s=n):(a=t,i=n,s=r),mx(e,a,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return i(e,r,n)},s)}const fx={}.hasOwnProperty,gx={};function xx(e,t){e.position&&(t.position=function(e){const t=kp(e),n=Np(e);if(t&&n)return{start:t,end:n}}(e))}function yx(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,sx(s)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function vx(e,t){const n=t.data||{},r=!("value"in t)||fx.call(n,"hProperties")||fx.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function bx(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function jx(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function wx(e,t){const n=function(e,t){const n=t||gx,r=new Map,s=new Map,a=new Map,i=X(X({},Gg),n.handlers),o={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const s=o.one(n[r],e);if(s){if(r&&"break"===n[r-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=jx(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=jx(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:yx,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,r=o.handlers[n];if(fx.call(o.handlers,n)&&r)return r(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const t=e,{children:n}=t,r=J(t,["children"]),s=sx(r);return s.children=o.all(e),s}return sx(e)}return(o.options.unknownHandler||vx)(o,e,t)},options:n,patch:xx,wrap:bx};return px(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),o}(e,t),r=n.one(e,void 0),s=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ax,r=e.options.footnoteBackLabel||ix,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const a=e.all(s),i=String(s.identifier).toUpperCase(),c=bf(i.toLowerCase());let d=0;const u=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++d<=h;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,d);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=a[a.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...u)}else a.push(...u);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(a,!0)};e.patch(s,p),o.push(p)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:Q(X({},sx(i)),{id:"footnote-label"}),children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:"\n"},s),a}function Nx(e,t){return e&&"run"in e?function(n,r){return ae(this,null,function*(){const s=wx(n,X({file:r},t));yield e.run(s,r)})}:function(n,r){return wx(n,X({file:r},e||t))}}function kx(e){if(e)throw e}var Sx=Object.prototype.hasOwnProperty,Cx=Object.prototype.toString,Px=Object.defineProperty,_x=Object.getOwnPropertyDescriptor,Ex=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Cx.call(e)},Tx=function(e){if(!e||"[object Object]"!==Cx.call(e))return!1;var t,n=Sx.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Sx.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||Sx.call(e,t)},Dx=function(e,t){Px&&"__proto__"===t.name?Px(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Mx=function(e,t){if("__proto__"===t){if(!Sx.call(e,t))return;if(_x)return _x(e,t).value}return e[t]};const Ax=it(function e(){var t,n,r,s,a,i,o=arguments[0],l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=Mx(o,n),o!==(s=Mx(t,n))&&(d&&s&&(Tx(s)||(a=Ex(s)))?(a?(a=!1,i=r&&Ex(r)?r:[]):i=r&&Tx(r)?r:{},Dx(o,{name:n,newValue:e(d,i,s)})):void 0!==s&&Dx(o,{name:n,newValue:s}));return o});function Rx(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function Ix(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function s(a,...i){const o=e[++n];let l=-1;if(a)r(a);else{for(;++l<t.length;)null!==i[l]&&void 0!==i[l]||(i[l]=t[l]);t=i,o?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let o;r&&t.push(s);try{o=e.apply(this,t)}catch(a){if(r&&n)throw a;return s(a)}r||(o&&o.then&&"function"==typeof o.then?o.then(i,s):o instanceof Error?s(o):i(o))}function s(e,...r){n||(n=!0,t(e,...r))}function i(e){s(null,e)}}(o,s)(...i):r(null,...i)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Fx={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');Lx(e);let n,r=0,s=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else s<0&&(n=!0,s=a+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let i=-1,o=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1),o>-1&&(e.codePointAt(a)===t.codePointAt(o--)?o<0&&(s=a):(o=-1,s=i));r===s?s=i:s<0&&(s=e.length);return e.slice(r,s)},dirname:function(e){if(Lx(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){Lx(e);let t,n=e.length,r=-1,s=0,a=-1,i=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)r<0&&(t=!0,r=n+1),46===o?a<0?a=n:1!==i&&(i=1):a>-1&&(i=-1);else if(t){s=n+1;break}}if(a<0||r<0||0===i||1===i&&a===r-1&&a===s+1)return"";return e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)Lx(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){Lx(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,s="",a=0,i=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===o);else if(i!==l-1&&2===o){if(s.length<2||2!==a||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(r=s.lastIndexOf("/"),r!==s.length-1){r<0?(s="",a=0):(s=s.slice(0,r),a=s.length-1-s.lastIndexOf("/")),i=l,o=0;continue}}else if(s.length>0){s="",a=0,i=l,o=0;continue}t&&(s=s.length>0?s+"/..":"..",a=2)}else s.length>0?s+="/"+e.slice(i+1,l):s=e.slice(i+1,l),a=l-i-1;i=l,o=0}else 46===n&&o>-1?o++:o=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function Lx(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ox={cwd:function(){return"/"}};function zx(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function Bx(e){if("string"==typeof e)e=new URL(e);else if(!zx(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Vx=["history","path","basename","stem","extname","dirname"];class Ux{constructor(e){let t;t=e?zx(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Ox.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<Vx.length;){const e=Vx[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Vx.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?Fx.basename(this.path):void 0}set basename(e){Wx(e,"basename"),qx(e,"basename"),this.path=Fx.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?Fx.dirname(this.path):void 0}set dirname(e){Hx(this.basename,"dirname"),this.path=Fx.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?Fx.extname(this.path):void 0}set extname(e){if(qx(e,"extname"),Hx(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Fx.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){zx(e)&&(e=Bx(e)),Wx(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?Fx.basename(this.path,this.extname):void 0}set stem(e){Wx(e,"stem"),qx(e,"stem"),this.path=Fx.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new Tp(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function qx(e,t){if(e&&e.includes(Fx.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Fx.sep+"`")}function Wx(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Hx(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Yx=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},Kx={}.hasOwnProperty;class Gx extends Yx{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ix()}copy(){const e=new Gx;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Ax(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(Zx("data",this.frozen),this.namespace[e]=t,this):Kx.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Zx("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=ty(e),n=this.parser||this.Parser;return Qx("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),Qx("process",this.parser||this.Parser),Jx("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,s){const a=ty(e),i=n.parse(a);function o(e,n){e||!n?s(e):r?r(n):t(void 0,n)}n.run(i,a,function(e,t,r){if(e||!t||!r)return o(e);const s=t,a=n.stringify(s,r);var i;"string"==typeof(i=a)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(i)?r.value=a:r.result=a,o(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),Qx("processSync",this.parser||this.Parser),Jx("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,kx(e),t=r}),ey("processSync","process",n),t}run(e,t,n){$x(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,a){const i=ty(t);r.run(e,i,function(t,r,i){const o=r||e;t?a(t):s?s(o):n(void 0,o,i)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){kx(e),n=t,r=!0}),ey("runSync","run",r),n}stringify(e,t){this.freeze();const n=ty(t),r=this.compiler||this.Compiler;return Jx("stringify",r),$x(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(Zx("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?i(e):a(e)}return this;function s(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else a(e)}}function a(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(e.plugins),e.settings&&(r.settings=Ax(!0,r.settings,e.settings))}function i(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function o(e,t){let r=-1,s=-1;for(;++r<n.length;)if(n[r][0]===e){s=r;break}if(-1===s)n.push([e,...t]);else if(t.length>0){let[r,...a]=t;const i=n[s][1];Rx(i)&&Rx(r)&&(r=Ax(!0,i,r)),n[s]=[e,r,...a]}}}}const Xx=(new Gx).freeze();function Qx(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Jx(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Zx(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $x(e){if(!Rx(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function ey(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ty(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new Ux(e)}const ny=[],ry={allowDangerousHtml:!0},sy=/^(https?|ircs?|mailto|xmpp)$/i,ay=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function iy(e){const t=function(e){const t=e.rehypePlugins||ny,n=e.remarkPlugins||ny,r=e.remarkRehypeOptions?X(X({},e.remarkRehypeOptions),ry):ry,s=Xx().use(qg).use(n).use(Nx,r).use(t);return s}(e),n=function(e){const t=e.children||"",n=new Ux;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,i=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||oy;for(const d of ay)Object.hasOwn(t,d.from)&&um((d.from,d.to&&d.to,d.id));return px(e,c),Lp(e,{Fragment:ie.Fragment,components:s,ignoreInvalidStyle:!0,jsx:ie.jsx,jsxs:ie.jsxs,passKeys:!0,passNode:!0});function c(e,t,s){if("raw"===e.type&&s&&"number"==typeof t)return i?s.children.splice(t,1):s.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in Kp)if(Object.hasOwn(Kp,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=Kp[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!a&&a.includes(e.tagName);if(!i&&r&&"number"==typeof t&&(i=!r(e,t,s)),i&&s&&"number"==typeof t)return o&&e.children?s.children.splice(t,1,...e.children):s.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function oy(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==n&&t>n||-1!==r&&t>r||sy.test(e.slice(0,t))?e:""}const ly=({message:e,isProjectChat:t=!1})=>{const n="user"===e.sender;return ie.jsxs(Du.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3 p-4 ".concat(n?"justify-end":"justify-start"," ").concat(e.isWelcome?"bg-gradient-to-r from-emerald-500/5 via-blue-500/5 to-purple-500/5 border border-emerald-500/10 rounded-lg":""),children:[!n&&ie.jsx("div",{className:"flex-shrink-0",children:ie.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-full flex items-center justify-center",children:t?ie.jsx(th,{className:"w-4 h-4 text-white"}):ie.jsx(Bu,{className:"w-4 h-4 text-white"})})}),ie.jsxs("div",{className:"flex flex-col max-w-[80%] ".concat(n?"items-end":"items-start"),children:[ie.jsx("div",{className:"px-4 py-3 rounded-2xl ".concat(n?"bg-emerald-500 text-white ml-auto":e.isWelcome?"bg-gradient-to-br from-gray-800/50 to-gray-900/50 text-gray-100 border border-emerald-500/20":"bg-gray-800/70 text-gray-100"," shadow-lg backdrop-blur-sm"),children:"assistant"===e.sender?ie.jsxs("div",{className:"prose prose-invert prose-sm max-w-none",children:[ie.jsx(iy,{components:{p:({children:e})=>ie.jsx("p",{className:"mb-2 last:mb-0",children:e}),ul:({children:e})=>ie.jsx("ul",{className:"list-disc pl-4 mb-2",children:e}),ol:({children:e})=>ie.jsx("ol",{className:"list-decimal pl-4 mb-2",children:e}),li:({children:e})=>ie.jsx("li",{className:"mb-1",children:e}),strong:({children:e})=>ie.jsx("strong",{className:"font-semibold text-emerald-300",children:e}),em:({children:e})=>ie.jsx("em",{className:"italic text-blue-300",children:e}),code:({children:e})=>ie.jsx("code",{className:"bg-gray-700/50 px-1 py-0.5 rounded text-xs",children:e}),h1:({children:e})=>ie.jsx("h1",{className:"text-lg font-bold mb-2 text-emerald-300",children:e}),h2:({children:e})=>ie.jsx("h2",{className:"text-base font-bold mb-2 text-emerald-300",children:e}),h3:({children:e})=>ie.jsx("h3",{className:"text-sm font-bold mb-1 text-emerald-300",children:e})},children:e.text}),void 0!==e.documentsAnalyzed&&e.documentsAnalyzed>0&&ie.jsx("div",{className:"mt-3 pt-2 border-t border-gray-600/50",children:ie.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[ie.jsx(dh,{className:"w-3 h-3"}),ie.jsxs("span",{children:["Analyzed ",e.documentsAnalyzed," project document",1!==e.documentsAnalyzed?"s":""]})]})})]}):ie.jsx("p",{className:"text-sm leading-relaxed",children:e.text})}),ie.jsx("div",{className:"text-xs text-gray-500 mt-1 ".concat(n?"text-right":"text-left"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),n&&ie.jsx("div",{className:"flex-shrink-0",children:ie.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-600 to-gray-700 rounded-full flex items-center justify-center",children:ie.jsx(Yh,{className:"w-4 h-4 text-white"})})})]})},cy=st.forwardRef((e,t)=>{var n=e,{className:r,type:s}=n,a=J(n,["className","type"]);return ie.jsx("input",X({type:s,className:zn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},a))});cy.displayName="Input";const dy=(e,t=!0)=>{const[n,r]=st.useState([]),[s,a]=st.useState(!0),[i,o]=st.useState(null),[l,c]=st.useState({}),d=st.useRef(null),u=()=>ae(void 0,null,function*(){if(e&&t){o(null);try{const{data:t,error:n}=yield Jh.from("conversations").select("id, title, created_at, updated_at, project_id").eq("user_id",e).order("updated_at",{ascending:!1});if(n)throw n;r(t||[])}catch(n){o(n.message||"Failed to load conversations")}finally{a(!1)}}else a(!1)}),h=()=>ae(void 0,null,function*(){if(e&&t)try{const{data:t,error:n}=yield Jh.from("project_documents").select("project_id").eq("user_id",e);if(n)throw n;const{data:r,error:s}=yield Jh.from("project_schedule_of_works").select("project_id").eq("user_id",e);if(s)throw s;const a={};null==t||t.forEach(e=>{a[e.project_id]||(a[e.project_id]={documents:0,scheduleOfWorks:0}),a[e.project_id].documents++}),null==r||r.forEach(e=>{a[e.project_id]||(a[e.project_id]={documents:0,scheduleOfWorks:0}),a[e.project_id].scheduleOfWorks++}),c(a)}catch(n){o(n.message||"Failed to load project counts")}});st.useEffect(()=>{t&&(u(),h())},[e,t]),st.useEffect(()=>{if(!e||!t)return;return ae(void 0,null,function*(){try{d.current&&(yield Jh.removeChannel(d.current),d.current=null);const t="conversations-".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),n=Jh.channel(t);n.on("postgres_changes",{event:"*",schema:"public",table:"conversations",filter:"user_id=eq.".concat(e)},e=>{u()}).on("postgres_changes",{event:"*",schema:"public",table:"project_documents",filter:"user_id=eq.".concat(e)},e=>{h()}).on("postgres_changes",{event:"*",schema:"public",table:"project_schedule_of_works",filter:"user_id=eq.".concat(e)},e=>{h()}).subscribe(e=>{}),d.current=n}catch(t){}}),()=>{d.current&&(Jh.removeChannel(d.current),d.current=null)}},[e,t]);return{conversations:n,loading:s,error:i,refreshConversations:()=>{u(),h()},getProjectConversationCount:e=>n.filter(t=>t.project_id===e).length,getProjectDocumentCount:e=>{var t;return(null==(t=l[e])?void 0:t.documents)||0},getProjectScheduleOfWorksCount:e=>{var t;return(null==(t=l[e])?void 0:t.scheduleOfWorks)||0},incrementDocumentCount:e=>{c(t=>{var n,r;return Q(X({},t),{[e]:{documents:((null==(n=t[e])?void 0:n.documents)||0)+1,scheduleOfWorks:(null==(r=t[e])?void 0:r.scheduleOfWorks)||0}})})},incrementScheduleCount:e=>{c(t=>{var n,r;return Q(X({},t),{[e]:{documents:(null==(n=t[e])?void 0:n.documents)||0,scheduleOfWorks:((null==(r=t[e])?void 0:r.scheduleOfWorks)||0)+1}})})}}},uy=({isOpen:e,onClose:t,onViewPlans:n,user:r,onSelectConversation:s,currentConversationId:a,projectId:i})=>{const[o,l]=st.useState(""),[c,d]=st.useState({}),{conversations:u,loading:h,refreshConversations:m}=dy(null==r?void 0:r.id),{hasActiveSubscription:p}=lm(null==r?void 0:r.id),{toast:f}=im();st.useEffect(()=>{ae(void 0,null,function*(){if(!(null==r?void 0:r.id)||0===u.length)return;const e=[...new Set(u.filter(e=>e.project_id).map(e=>e.project_id))];if(0!==e.length)try{const{data:t,error:n}=yield Jh.from("projects").select("id, name").in("id",e);if(n)throw n;const r={};null==t||t.forEach(e=>{r[e.id]=e.name}),d(r)}catch(t){}})},[u,null==r?void 0:r.id]),st.useEffect(()=>{},[i,u]);const g=u.filter(e=>{const t=e.title.toLowerCase().includes(o.toLowerCase());if(i){return t&&e.project_id===i}return t}),x=e=>{const t=new Date(e),n=((new Date).getTime()-t.getTime())/36e5;return n<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n<48?"Yesterday":t.toLocaleDateString()};return ie.jsx(Do,{children:e&&ie.jsxs(ie.Fragment,{children:[ie.jsx(Du.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:t}),ie.jsxs(Du.div,{initial:{x:-320},animate:{x:0},exit:{x:-320},transition:{type:"spring",damping:25,stiffness:200},className:"fixed left-0 top-0 h-full w-80 bg-gradient-to-b from-gray-950 via-black to-gray-950 border-r border-gray-800/50 z-50 lg:relative lg:z-auto flex flex-col shadow-2xl",children:[ie.jsxs("div",{className:"p-4 border-b border-gray-800/50",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ie.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[ie.jsx(kh,{className:"w-5 h-5 mr-2 text-emerald-400"}),i?"Project Chats":"Chat History"]}),ie.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800/50 rounded-lg transition-colors lg:hidden",children:ie.jsx(Qh,{className:"w-4 h-4 text-gray-400"})})]}),ie.jsxs("div",{className:"relative mb-4",children:[ie.jsx(Rh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),ie.jsx(cy,{placeholder:"Search conversations...",value:o,onChange:e=>l(e.target.value),className:"pl-10 bg-gray-900/50 border-gray-700/50 text-white placeholder-gray-400 text-sm"})]}),!p&&ie.jsx(Du.div,{whileHover:{scale:1.02},className:"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-xl p-3 mb-4 cursor-pointer",onClick:n,children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(nh,{className:"w-4 h-4 text-amber-400 mr-2"}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-xs font-medium text-amber-300",children:"Upgrade to Pro"}),ie.jsx("p",{className:"text-xs text-amber-200",children:"Unlimited chats & features"})]})]}),ie.jsx(Xu,{className:"w-4 h-4 text-amber-400"})]})})]}),ie.jsx("div",{className:"flex-1 overflow-y-auto",children:h?ie.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((e,t)=>ie.jsx("div",{className:"h-16 bg-gray-800/30 rounded-lg animate-pulse"},t))}):0===g.length?ie.jsxs("div",{className:"p-4 text-center",children:[ie.jsx(kh,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),ie.jsx("p",{className:"text-gray-400 text-sm mb-2",children:o?"No conversations found":i?"No project chats yet":"No conversations yet"}),ie.jsx("p",{className:"text-gray-500 text-xs",children:i?"Start a new chat about this project":"Start a new conversation to get help"})]}):ie.jsx("div",{className:"p-2",children:g.map((e,t)=>ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"group relative p-3 rounded-lg mb-2 cursor-pointer transition-all duration-200 ".concat(a===e.id?"bg-emerald-500/20 border border-emerald-500/30":"hover:bg-gray-800/50 border border-transparent"),onClick:()=>s(e.id),children:ie.jsxs("div",{className:"flex items-start justify-between",children:[ie.jsxs("div",{className:"flex-1 min-w-0",children:[ie.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[ie.jsx("h3",{className:"text-sm font-medium text-white truncate",children:e.title}),e.project_id&&ie.jsxs("div",{className:"flex items-center bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs min-w-0 flex-shrink-0",children:[ie.jsx(hh,{className:"w-3 h-3 mr-1 flex-shrink-0"}),ie.jsx("span",{className:"truncate max-w-20",children:c[e.project_id]||"Project"})]})]}),ie.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[ie.jsx(th,{className:"w-3 h-3 mr-1"}),ie.jsx("span",{children:x(e.updated_at)})]})]}),ie.jsx("button",{onClick:t=>((e,t)=>ae(void 0,null,function*(){t.stopPropagation();try{const{error:t}=yield Jh.from("messages").delete().eq("conversation_id",e);if(t)throw t;const{error:n}=yield Jh.from("conversations").delete().eq("id",e);if(n)throw n;m(),a===e&&s(""),f({title:"Conversation Deleted",description:"The conversation has been successfully deleted."})}catch(n){f({title:"Error",description:"Failed to delete conversation. Please try again.",variant:"destructive"})}}))(e.id,t),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 rounded transition-all duration-200 ml-2",children:ie.jsx(Uh,{className:"w-3 h-3 text-red-400"})})]})},e.id))})})]})]})})},hy=({images:e})=>e&&0!==e.length?ie.jsxs(Du.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-800/30 rounded-xl p-4 border border-white/10",children:[ie.jsx("h3",{className:"text-sm font-medium text-emerald-300 mb-3",children:"Related Images"}),ie.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.map((e,t)=>ie.jsx("div",{className:"group cursor-pointer",children:ie.jsxs("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden border border-white/5 hover:border-emerald-500/30 transition-colors",children:[ie.jsx("img",{src:e.url,alt:e.title,className:"w-full h-24 object-cover group-hover:scale-105 transition-transform"}),ie.jsxs("div",{className:"p-2",children:[ie.jsx("p",{className:"text-xs text-white font-medium truncate",children:e.title}),ie.jsx("p",{className:"text-xs text-gray-400 truncate",children:e.source})]})]})},t))})]}):null,my=e=>{const[t,n]=st.useState([]),[r,s]=st.useState(!1);return st.useEffect(()=>{var t;e?(t=e,ae(void 0,null,function*(){s(!0);try{const{data:e,error:r}=yield Jh.from("messages").select("id, content, role, created_at").eq("conversation_id",t).order("created_at",{ascending:!0});if(r)throw r;const s=(e||[]).map(e=>Q(X({},e),{role:e.role}));n(s)}catch(e){n([])}finally{s(!1)}})):n([])},[e]),{messages:t,loading:r}},py=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),fy=({user:e,onViewPlans:t,projectId:n,conversationId:r,onChatComplete:s})=>{const[a,i]=st.useState([]),[o,l]=st.useState(""),[c,d]=st.useState(!1),[u,h]=st.useState(!1),[m,p]=st.useState(r||null),[f,g]=st.useState(""),[x,y]=st.useState(null),[v,b]=st.useState(!1),j=st.useRef(null),w=st.useRef(null),N=st.useRef(null),[k,S]=st.useState([]),{toast:C}=im();st.useEffect(()=>{r&&p(r)},[r]),st.useEffect(()=>{n&&P()},[n]);const P=()=>ae(void 0,null,function*(){if(n)try{const{data:e,error:t}=yield Jh.from("projects").select("*").eq("id",n).single();if(t)throw t;y(e)}catch(e){}}),{messages:_}=my(m);st.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[a]);const E={id:"welcome",text:"Welcome to EezyBuild! 👋\n\nI'm your UK Building Regulations specialist, here to help you navigate construction requirements, planning permissions, and building standards.\n\n**What I can help with:**\n• Building Regulations compliance (Parts A-P)\n• Planning permission requirements\n• Fire safety regulations\n• Accessibility standards\n• Energy efficiency requirements\n• Structural requirements\n• And much more!\n\nFeel free to ask me anything about UK Building Regulations. I'm here to make compliance simple and straightforward.",sender:"assistant",timestamp:new Date,isWelcome:!0},T=()=>({id:"project-welcome",text:"Welcome to your project chat! 🏗️\n\nHere I will take into account previous chats, review your images and documents, and assist with everything involving your project.\n\n**Project: ".concat((null==x?void 0:x.name)||"Loading project...","**\n").concat((null==x?void 0:x.description)?"**Description:** ".concat(x.description):"","\n").concat((null==x?void 0:x.label)?"**Category:** ".concat(x.label):"","\n\nI have access to:\n• Your previous conversations about this project\n• Any documents and images you've uploaded\n• Project-specific building regulations\n• Your project timeline and Schedule of Works\n\nAll my responses will be tailored specifically to your project needs. Let's make your project a success!\n\nWhat would you like to discuss about your project?"),sender:"assistant",timestamp:new Date,isWelcome:!0});st.useEffect(()=>{if(0===a.length&&!m){const e=n?T():E;i([e])}},[n,x,m]),st.useEffect(()=>{if(n&&x&&1===a.length&&"project-welcome"===a[0].id){const e=T();i([e])}},[x]),st.useEffect(()=>{if(_.length>0){const e=_.map(e=>({id:e.id,text:e.content,sender:e.role,timestamp:new Date(e.created_at)}));i(e),S([])}},[_]);const D=(e,t,n)=>ae(void 0,null,function*(){try{const{error:r}=yield Jh.from("messages").insert([{conversation_id:e,content:t,role:n}]);if(r)throw r}catch(r){}}),M=()=>ae(void 0,null,function*(){if(""===o.trim())return;const t={id:py(),text:o,sender:"user",timestamp:new Date};i(e=>[...e,t]);const r=o;l("");let s=m;if(!s&&e){if(s=yield(a=r,ae(void 0,null,function*(){try{if(!(null==e?void 0:e.id))throw new Error("User authentication required");const r={user_id:e.id,title:a.slice(0,50)+(a.length>50?"...":"")};n&&(r.project_id=n);const{data:s,error:i}=yield Jh.from("conversations").insert([r]).select().single();if(i)throw i;if(n)try{const{error:e}=yield Jh.from("projects").update({updated_at:(new Date).toISOString()}).eq("id",n);if(e);else{const{count:e,error:t}=yield Jh.from("conversations").select("*",{count:"exact",head:!0}).eq("project_id",n)}}catch(t){}return s.id}catch(r){return C({variant:"destructive",title:"Error creating conversation",description:"Failed to create new conversation. Please try again."}),null}})),!s)return;p(s)}var a;s&&e&&(yield D(s,r,"user")),h(!0);try{const t={message:r};if(n&&x&&(null==e?void 0:e.id)){const{data:r,error:s}=yield Jh.from("project_documents").select("*").eq("project_id",n).eq("user_id",e.id),{data:a,error:i}=yield Jh.from("conversations").select("\n            id,\n            title,\n            messages (\n              role,\n              content,\n              created_at\n            )\n          ").eq("project_id",n).eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);t.projectContext={id:n,userId:e.id,name:x.name,description:x.description,label:x.label,status:x.status,documents:r||[],recentConversations:a||[]}}const a=yield fetch("https://srwbgkssoatrhxdrrtff.supabase.co/functions/v1/building-regulations-chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyd2Jna3Nzb2F0cmh4ZHJydGZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMzE0OTcsImV4cCI6MjA2NTkwNzQ5N30.FxPPrtKlz5MZxnS_6kAHMOMJiT25DYXOKzT1V9k-KhU"},body:JSON.stringify(t)});if(!a.ok){const e=yield a.text();throw new Error("HTTP error! status: ".concat(a.status,", message: ").concat(e))}const o=yield a.json();if(t.projectContext&&o.projectId&&o.projectId!==n)throw new Error("Security violation detected in response");const l={id:py(),text:o.response,sender:"assistant",timestamp:new Date,images:o.images,documentsAnalyzed:o.documentsAnalyzed};i(e=>[...e,l]),S(o.images||[]),s&&e&&(yield D(s,o.response,"assistant"))}catch(c){let e="There was a problem with the server. Please try again later.";c.message.includes("Security violation")&&(e="Security error detected. Please contact support immediately."),C({variant:"destructive",title:"Uh oh! Something went wrong.",description:e})}finally{h(!1)}});return ie.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-gray-950 via-black to-gray-950",children:[ie.jsx(cm,{title:n&&x?x.name:"",subtitle:n&&x?"Building regulations assistance for ".concat(x.name):"",onToggleSidebar:()=>d(!c),sidebarOpen:c,onNewConversation:()=>{const e=n?T():E;i([e]),p(null),g(""),S([])},onExitProjectChat:()=>{s&&s(),i([E]),p(null),g(""),S([])},isProjectChat:!!n}),ie.jsxs("div",{className:"flex-1 flex min-h-0",children:[ie.jsx(uy,{isOpen:c,onClose:()=>d(!1),onViewPlans:t,user:e,onSelectConversation:e=>ae(void 0,null,function*(){d(!1),p(e),i([]);try{const{data:t,error:n}=yield Jh.from("conversations").select("title").eq("id",e).single();if(n)throw n;g(t.title)}catch(t){}}),currentConversationId:m,projectId:n}),ie.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[ie.jsxs("div",{ref:j,className:"flex-1 p-4 overflow-y-auto",children:[a.map(e=>ie.jsx(ly,{message:e,isProjectChat:!!n},e.id)),u&&ie.jsx(ly,{message:{id:"loading",text:"Thinking...",sender:"assistant",timestamp:new Date},isProjectChat:!!n})]}),k.length>0&&ie.jsx(Du.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"px-4 pb-4",children:ie.jsx(hy,{images:k})}),ie.jsx("div",{className:"border-t border-gray-800/30 p-4 bg-gradient-to-r from-gray-950/80 via-black/80 to-gray-950/80 backdrop-blur-xl",children:ie.jsx("div",{className:"max-w-4xl mx-auto",children:ie.jsxs("div",{className:"flex items-center space-x-3",children:[n&&ie.jsx("button",{onClick:()=>{N.current&&N.current.click()},disabled:v,className:"p-3 hover:bg-gray-800/50 rounded-lg transition-colors text-gray-400 hover:text-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed",title:"Upload Document",children:ie.jsx(Wh,{className:"w-5 h-5 ".concat(v?"animate-pulse":"")})}),n&&ie.jsx("button",{onClick:()=>ae(void 0,null,function*(){if(n&&e)try{const{data:t,error:r}=yield Jh.from("project_schedule_of_works").select("*").eq("project_id",n).eq("user_id",e.id);if(r)throw r;const s=(null==t?void 0:t.length)||0,a="**Project Schedule of Works Summary**\n\nYou currently have **".concat(s,"** work item").concat(1!==s?"s":""," in your schedule of works.\n\n").concat(s>0?"Here are your work items:\n".concat(t.map((e,t)=>"".concat(t+1,". **").concat(e.title,"** ").concat(e.completed?"✅":"⏳","\n   ").concat(e.description||"No description","\n   ").concat(e.due_date?"Due: ".concat(new Date(e.due_date).toLocaleDateString()):"No due date")).join("\n\n")):"No work items have been created yet.","\n\nYou can manage your project schedule of works by going to the Projects page and clicking on this project to view details.\n\nWould you like me to help you plan any work items or discuss project timeline management?"),o={id:py(),text:a,sender:"assistant",timestamp:new Date};i(e=>[...e,o])}catch(t){C({title:"Error",description:"Failed to load project schedule of works. Please try again.",variant:"destructive"})}else C({title:"Error",description:"Project context required for schedule of works management.",variant:"destructive"})}),className:"p-3 hover:bg-gray-800/50 rounded-lg transition-colors text-gray-400 hover:text-emerald-400",title:"Schedule of Works",children:ie.jsx(th,{className:"w-5 h-5"})}),ie.jsx("input",{ref:N,type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.svg,.pdf,.doc,.docx,.txt,.csv,.md",onChange:t=>{const r=t.target.files;if(r&&r.length>0){const s=r[0];if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","text/markdown"].includes(s.type))return void C({variant:"destructive",title:"Invalid file type",description:"Please select an image, PDF, Word document, or text file."});if(s.size>10485760)return void C({variant:"destructive",title:"File too large",description:"Please select a file smaller than 10MB."});(t=>{ae(void 0,null,function*(){if(n&&e){b(!0);try{const r="".concat(e.id,"/").concat(n,"/").concat(Date.now(),"-").concat(t.name),{data:s,error:a}=yield Jh.storage.from("project-documents").upload(r,t);if(a)throw a;const{error:i}=yield Jh.from("project_documents").insert([{project_id:n,user_id:e.id,file_name:t.name,file_path:r,file_type:t.type,file_size:t.size}]);if(i)throw i;C({title:"Document uploaded successfully",description:"".concat(t.name," has been uploaded to your project. The AI can now analyze it to help answer your questions.")})}catch(r){C({variant:"destructive",title:"Upload failed",description:r.message||"Failed to upload document. Please try again."})}finally{b(!1)}}else C({variant:"destructive",title:"Upload failed",description:"Project ID and user authentication required for document upload."})})})(s),t.target.value=""}},className:"hidden"}),ie.jsxs("div",{className:"flex-1 relative flex items-center",children:[ie.jsx("textarea",{ref:w,value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},rows:1,placeholder:n&&x?"Ask about ".concat(x.name,"..."):"Ask me a question...",className:"w-full px-4 py-3 pr-12 rounded-xl bg-gray-900/70 border border-gray-700/50 text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 resize-none backdrop-blur-sm shadow-lg text-sm leading-relaxed font-medium min-h-[48px] max-h-[120px]"}),ie.jsx(Du.button,{whileTap:{scale:.95},whileHover:{scale:1.02},onClick:M,disabled:!o.trim()||u,className:"absolute right-3 w-8 h-8 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 disabled:from-gray-600 disabled:to-gray-700 text-white rounded-lg p-0 transition-all duration-300 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:ie.jsx(Ih,{className:"w-4 h-4"})})]})]})})})]})]})]})},gy=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,xy=Ht,yy=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return xy(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const i=gy(t)||gy(r);return s[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let n=t,{class:r,className:s}=n,i=J(n,["class","className"]);return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(X(X({},a),o)[t]):X(X({},a),o)[t]===n})?[...e,r,s]:e},[]);return xy(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},vy=yy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),by=st.forwardRef((e,t)=>{var n=e,{className:r,variant:s,size:a,asChild:i=!1}=n,o=J(n,["className","variant","size","asChild"]);const l=i?ye:"button";return ie.jsx(l,X({className:zn(vy({variant:s,size:a,className:r})),ref:t},o))});by.displayName="Button";const jy=({onViewPlans:e})=>ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto text-center",children:[ie.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:ie.jsx(vh,{className:"w-10 h-10 text-white"})}),ie.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Subscription Required"}),ie.jsx("p",{className:"text-gray-400 mb-8 leading-relaxed",children:"To access the UK Building Regulations AI assistant and save your chat history, you'll need a subscription. Choose from our professional plans designed for building industry professionals."}),ie.jsxs(by,{onClick:t=>{t.preventDefault(),t.stopPropagation(),e()},className:"w-full h-12 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold",children:[ie.jsx(nh,{className:"w-5 h-5 mr-2"}),"View Subscription Plans"]})]})}),wy=({user:e,onViewPlans:t,projectId:n,conversationId:r,onChatComplete:s})=>{const{hasActiveSubscription:a,loading:i}=lm(null==e?void 0:e.id);return i?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):a?ie.jsx(fy,{user:e,onViewPlans:t,projectId:n,conversationId:r,onChatComplete:s}):ie.jsx(jy,{onViewPlans:t})},Ny=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("div",X({ref:t,className:zn("rounded-lg border bg-card text-card-foreground shadow-sm",r)},s))});Ny.displayName="Card";const ky=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("div",X({ref:t,className:zn("flex flex-col space-y-1.5 p-6",r)},s))});ky.displayName="CardHeader";const Sy=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("h3",X({ref:t,className:zn("text-2xl font-semibold leading-none tracking-tight",r)},s))});Sy.displayName="CardTitle";const Cy=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("p",X({ref:t,className:zn("text-sm text-muted-foreground",r)},s))});Cy.displayName="CardDescription";const Py=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("div",X({ref:t,className:zn("p-6 pt-0",r)},s))});Py.displayName="CardContent";st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("div",X({ref:t,className:zn("flex items-center p-6 pt-0",r)},s))}).displayName="CardFooter";const _y=({user:e,onBack:t})=>{const[n,r]=st.useState(""),[s,a]=st.useState(""),[i,o]=st.useState(""),[l,c]=st.useState("");st.useState(!1);const[d,u]=st.useState(!1),[h,m]=st.useState(!1),[p,f]=st.useState(!1),{toast:g}=im();return ie.jsx("div",{className:"flex-1 overflow-y-auto bg-black text-white",children:ie.jsxs("div",{className:"px-6 py-8",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center mb-8",children:[ie.jsx(by,{onClick:t,variant:"ghost",className:"p-2 hover:bg-gray-800 rounded-xl mr-4",children:ie.jsx(Fu,{className:"w-6 h-6 text-white"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold",children:"Account Settings"}),ie.jsx("p",{className:"text-gray-400",children:"Manage your account security"})]})]}),ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-800 mb-6",children:[ie.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Current Account"}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("p",{className:"text-sm text-gray-400",children:"Email Address"}),ie.jsx("p",{className:"text-white",children:null==e?void 0:e.email})]})]}),ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-800 mb-6",children:[ie.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[ie.jsx("div",{className:"w-12 h-12 bg-blue-600/20 rounded-xl flex items-center justify-center",children:ie.jsx(vh,{className:"w-6 h-6 text-blue-400"})}),ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-lg font-semibold",children:"Change Password"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Update your account password"})]})]}),ie.jsxs("form",{onSubmit:e=>ae(void 0,null,function*(){if(e.preventDefault(),s===i)if(s.length<6)g({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});else{m(!0);try{const{error:e}=yield Jh.auth.updateUser({password:s});if(e)throw e;g({title:"Success",description:"Password updated successfully"}),r(""),a(""),o("")}catch(t){g({title:"Error",description:t.message||"Failed to update password",variant:"destructive"})}finally{m(!1)}}else g({title:"Error",description:"New passwords don't match",variant:"destructive"})}),className:"space-y-4",children:[ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-sm font-medium text-gray-300",children:"New Password"}),ie.jsxs("div",{className:"relative",children:[ie.jsx("input",{type:d?"text":"password",value:s,onChange:e=>a(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",placeholder:"Enter new password",required:!0}),ie.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:d?ie.jsx(ih,{className:"w-5 h-5"}):ie.jsx(oh,{className:"w-5 h-5"})})]})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Confirm New Password"}),ie.jsx("input",{type:"password",value:i,onChange:e=>o(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",placeholder:"Confirm new password",required:!0})]}),ie.jsx(by,{type:"submit",disabled:h||!s||!i,className:"w-full h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-xl",children:h?"Updating Password...":"Update Password"})]})]}),ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-800",children:[ie.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[ie.jsx("div",{className:"w-12 h-12 bg-green-600/20 rounded-xl flex items-center justify-center",children:ie.jsx(jh,{className:"w-6 h-6 text-green-400"})}),ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-lg font-semibold",children:"Change Email"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Update your email address"})]})]}),ie.jsxs("form",{onSubmit:t=>ae(void 0,null,function*(){if(t.preventDefault(),!l||l===(null==e?void 0:e.email))return void g({title:"Error",description:"Please enter a new email address",variant:"destructive"});if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)){f(!0);try{const{error:e}=yield Jh.auth.updateUser({email:l});if(e)throw e;g({title:"Success",description:"Email update request sent. Please check your new email to confirm the change."}),c("")}catch(n){g({title:"Error",description:n.message||"Failed to update email",variant:"destructive"})}finally{f(!1)}}else g({title:"Error",description:"Please enter a valid email address",variant:"destructive"})}),className:"space-y-4",children:[ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-sm font-medium text-gray-300",children:"New Email Address"}),ie.jsx("input",{type:"email",value:l,onChange:e=>c(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",placeholder:"Enter new email address",required:!0})]}),ie.jsx(by,{type:"submit",disabled:p||!l,className:"w-full h-12 bg-green-600 hover:bg-green-700 text-white rounded-xl",children:p?"Updating Email...":"Update Email"})]}),ie.jsx("div",{className:"mt-4 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:ie.jsxs("p",{className:"text-sm text-yellow-300",children:[ie.jsx("strong",{children:"Note:"})," After updating your email, you'll need to confirm the change by clicking the link sent to your new email address."]})})]})]})})},Ey=({user:e,onNavigateToSettings:t})=>{const{subscription:n,hasActiveSubscription:r,refetch:s,openCustomerPortal:a}=lm(null==e?void 0:e.id),[i,o]=st.useState(!1),[l,c]=st.useState(null),[d,u]=st.useState(!1),{toast:h}=im();st.useEffect(()=>{ae(void 0,null,function*(){if(null==e?void 0:e.id){const{data:t,error:n}=yield Jh.from("profiles").select("*").eq("user_id",e.id).single();t&&!n&&c(t)}})},[null==e?void 0:e.id]);const m=()=>ae(void 0,null,function*(){if(r)try{yield a()}catch(e){h({title:"Unable to open subscription management",description:"Please try again later or contact support if the issue persists.",variant:"destructive"})}else t()}),p=()=>{u(!1)};return d?ie.jsx(_y,{user:e,onBack:p}):ie.jsx("div",{className:"flex-1 overflow-y-auto bg-black text-white",children:ie.jsxs("div",{className:"px-6 py-8",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[ie.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:ie.jsx(Yh,{className:"w-12 h-12 text-white"})}),ie.jsx("h1",{className:"text-2xl font-bold mb-2",children:(null==l?void 0:l.full_name)||(null==e?void 0:e.name)||"User"}),ie.jsx("p",{className:"text-gray-400",children:null==e?void 0:e.email}),ie.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Member since ",(null==e?void 0:e.created_at)?new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"January 2024"]})]}),ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:r?ie.jsx(Ny,{className:"relative overflow-hidden border border-emerald-500/30 bg-gradient-to-br from-emerald-950/50 via-gray-900/80 to-emerald-950/30 backdrop-blur-xl",children:ie.jsx(Py,{className:"p-8",children:ie.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[ie.jsxs("div",{className:"flex items-start gap-6",children:[ie.jsxs("div",{className:"relative flex-shrink-0",children:[ie.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:ie.jsx(nh,{className:"w-8 h-8 text-white"})}),ie.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-emerald-400 rounded-full animate-pulse"})]}),ie.jsxs("div",{className:"min-w-0 flex-1",children:[ie.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ie.jsx(Lh,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),ie.jsx("span",{className:"text-sm font-medium text-emerald-300 uppercase tracking-wider",children:"Active Subscription"})]}),ie.jsxs("h3",{className:"text-2xl font-bold text-white mb-3",children:[(()=>{if(!r||!n)return"No Plan";switch(n.plan_type){case"basic":return"EezyBuild";case"pro":return"Pro";case"enterprise":return"ProMax";default:return"Unknown Plan"}})()," Plan"]}),ie.jsx("p",{className:"text-gray-300 text-base mb-4",children:"Your premium subscription is active and ready to use"}),ie.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx(Hu,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),ie.jsxs("span",{className:"text-gray-300",children:["Renews ",r&&(null==n?void 0:n.current_period_end)?new Date(n.current_period_end).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"]})]}),ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx("div",{className:"w-3 h-3 bg-emerald-400 rounded-full animate-pulse"}),ie.jsx("span",{className:"text-emerald-300 font-medium text-base",children:"Active"})]})]})]})]}),ie.jsx("div",{className:"flex-shrink-0",children:ie.jsx(by,{onClick:m,size:"lg",className:"w-full sm:w-auto bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm transition-all duration-200 px-6 py-3 font-medium",children:"Manage Subscription"})})]})})}):ie.jsx("div",{className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl border border-gray-800 p-6",children:ie.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gray-600",children:ie.jsx(nh,{className:"w-5 h-5 text-white"})}),ie.jsxs("div",{children:[ie.jsx("h3",{className:"font-semibold text-white",children:"Subscription Status"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"No Active Plan"})]})]}),ie.jsx(by,{onClick:m,variant:"outline",size:"sm",className:"text-blue-400 border-blue-400/30 hover:bg-blue-400/10",children:"Subscribe"})]})})}),ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl border border-gray-800 p-6 mb-6",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Personal Information"}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg",children:[ie.jsx(Yh,{className:"w-5 h-5 text-emerald-400"}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-400",children:"Full Name"}),ie.jsx("p",{className:"text-white",children:(null==l?void 0:l.full_name)||"Not provided"})]})]}),(null==l?void 0:l.occupation)&&ie.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg",children:[ie.jsx(Yh,{className:"w-5 h-5 text-emerald-400"}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-400",children:"Occupation"}),ie.jsx("p",{className:"text-white",children:l.occupation})]})]})]})]}),ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-3",children:[ie.jsxs(by,{onClick:()=>{u(!0)},variant:"outline",className:"w-full h-12 bg-gray-900/50 border-gray-700 hover:bg-gray-800/50 text-white",children:[ie.jsx(Fh,{className:"w-5 h-5 mr-3"}),"Account Settings"]}),ie.jsxs(by,{onClick:()=>ae(void 0,null,function*(){o(!0);try{const{error:e}=yield Jh.auth.signOut();if(e)throw e;window.location.href="/"}catch(e){h({title:"Error",description:"Failed to sign out. Please try again.",variant:"destructive"})}finally{o(!1)}}),disabled:i,variant:"outline",className:"w-full h-12 bg-red-900/20 border-red-700/50 hover:bg-red-800/30 text-red-400 hover:text-red-300",children:[ie.jsx(bh,{className:"w-5 h-5 mr-3"}),i?"Signing Out...":"Sign Out"]})]})]})})};
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var Ty,Dy;(Dy=Ty||(Ty={})).Unimplemented="UNIMPLEMENTED",Dy.Unavailable="UNAVAILABLE";class My extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Ay=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),a=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},i=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=s,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==s(),n.isPluginAvailable=e=>{const t=i.get(e);return!!(null==t?void 0:t.platforms.has(s()))||!!a(e)},n.registerPlugin=(e,o={})=>{const l=i.get(e);if(l)return l.proxy;const c=s(),d=a(e);let u;const h=r=>{let s;const a=(...a)=>{const i=ae(void 0,null,function*(){return!u&&c in o?u=u="function"==typeof o[c]?yield o[c]():o[c]:null!==t&&!u&&"web"in o&&(u=u="function"==typeof o.web?yield o.web():o.web),u}).then(t=>{const i=((t,r)=>{var s,a;if(!d){if(t)return null===(a=t[r])||void 0===a?void 0:a.bind(t);throw new My('"'.concat(e,'" plugin is not implemented on ').concat(c),Ty.Unimplemented)}{const a=null==d?void 0:d.methods.find(e=>r===e.name);if(a)return"promise"===a.rtype?t=>n.nativePromise(e,r.toString(),t):(t,s)=>n.nativeCallback(e,r.toString(),t,s);if(t)return null===(s=t[r])||void 0===s?void 0:s.bind(t)}})(t,r);if(i){const e=i(...a);return s=null==e?void 0:e.remove,e}throw new My('"'.concat(e,".").concat(r,'()" is not implemented on ').concat(c),Ty.Unimplemented)});return"addListener"===r&&(i.remove=()=>ae(void 0,null,function*(){return s()})),i};return a.toString=()=>"".concat(r.toString(),"() { [capacitor code] }"),Object.defineProperty(a,"name",{value:r,writable:!1,configurable:!1}),a},m=h("addListener"),p=h("removeListener"),f=(e,t)=>{const n=m({eventName:e},t),r=()=>ae(void 0,null,function*(){const r=yield n;p({eventName:e,callbackId:r},t)}),s=new Promise(e=>n.then(()=>e({remove:r})));return s.remove=()=>ae(void 0,null,function*(){yield r()}),s},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?f:m;case"removeListener":return p;default:return h(t)}}});return r[e]=g,i.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(o),...d?[c]:[]])}),g},n.Exception=My,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Ry=(e=>e.Capacitor=Ay(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),Iy=Ry.registerPlugin;class Fy{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:()=>ae(this,null,function*(){return this.removeListener(e,t)})})}removeAllListeners(){return ae(this,null,function*(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Ry.Exception(e,Ty.Unimplemented)}unavailable(e="not available"){return new Ry.Exception(e,Ty.Unavailable)}removeListener(e,t){return ae(this,null,function*(){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const Ly=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Oy=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class zy extends Fy{getCookies(){return ae(this,null,function*(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=Oy(n).trim(),r=Oy(r).trim(),t[n]=r}),t})}setCookie(e){return ae(this,null,function*(){try{const t=Ly(e.key),n=Ly(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),s=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(s,"; ").concat(a,";")}catch(t){return Promise.reject(t)}})}deleteCookie(e){return ae(this,null,function*(){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}})}clearCookies(){return ae(this,null,function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}})}clearAllCookies(){return ae(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}}Iy("CapacitorCookies",{web:()=>new zy});const By=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,r,s)=>(n[r]=e[t[s]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class Vy extends Fy{request(e){return ae(this,null,function*(){const t=By(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[r,s]=n;let a,i;return Array.isArray(s)?(i="",s.forEach(e=>{a=t?encodeURIComponent(e):e,i+="".concat(r,"=").concat(a,"&")}),i.slice(0,-1)):(a=t?encodeURIComponent(s):s,i="".concat(r,"=").concat(a)),"".concat(e,"&").concat(i)},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,s=yield fetch(r,t),a=s.headers.get("content-type")||"";let i,o,{responseType:l="text"}=s.ok?e:{};switch(a.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=yield s.blob(),i=yield(e=>ae(void 0,null,function*(){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)})}))(o);break;case"json":i=yield s.json();break;default:i=yield s.text()}const c={};return s.headers.forEach((e,t)=>{c[t]=e}),{data:i,headers:c,status:s.status,url:s.url}})}get(e){return ae(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return ae(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return ae(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return ae(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return ae(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}}Iy("CapacitorHttp",{web:()=>new Vy});const Uy="com.lovable.callcreateconnect.basic_monthly",qy="com.lovable.callcreateconnect.pro_monthly",Wy="com.lovable.callcreateconnect.enterprise_monthly",Hy=({user:e,onBack:t})=>{const{subscription:n,hasActiveSubscription:r,hasUsedTrial:s,createCheckoutSession:a,openCustomerPortal:i}=lm(null==e?void 0:e.id),{products:o,loading:l,isNative:c,purchaseProduct:d,restorePurchases:u}=(e=>{const[t,n]=st.useState([]),[r,s]=st.useState(!1),{toast:a}=im(),i=Ry.isNativePlatform();st.useEffect(()=>{i&&e&&o()},[i,e]);const o=()=>{n([{productId:Uy,title:"EezyBuild Monthly",description:"Essential building regulations assistant",price:"£14.99",currency:"GBP"},{productId:qy,title:"Pro Monthly",description:"Advanced features for professionals",price:"£29.99",currency:"GBP"},{productId:Wy,title:"ProMax Monthly",description:"Complete solution for teams and enterprises",price:"£59.99",currency:"GBP"}])};return{products:t,loading:r,isNative:i,purchaseProduct:e=>ae(void 0,null,function*(){try{if(s(!0),!i)throw new Error("In-app purchases only available on mobile devices");a({title:"Native Purchase Required",description:"This feature requires the app to be built and deployed to app stores with proper in-app purchase configuration.",variant:"destructive"})}catch(e){a({title:"Purchase Failed",description:"Unable to complete purchase. Please try again.",variant:"destructive"})}finally{s(!1)}}),restorePurchases:()=>ae(void 0,null,function*(){try{if(s(!0),!i)throw new Error("Restore purchases only available on mobile devices");a({title:"Restore Purchases",description:"This feature will be available when the app is deployed to app stores."})}catch(e){a({title:"Restore Failed",description:"Unable to restore purchases. Please try again.",variant:"destructive"})}finally{s(!1)}})}})(null==e?void 0:e.id),[h,m]=st.useState(null),p=[{name:"EezyBuild",price:"£14.99",period:"per month",description:"Essential building regulations assistant",features:["AI chat assistance","Basic building regulations guidance","Standard response time","Email support","Chat history"],planType:"basic",current:r&&"basic"===(null==n?void 0:n.plan_type)},{name:"Pro",price:"£29.99",period:"per month",description:"Advanced features for professionals",features:["Everything in EezyBuild","Priority response time","Advanced building tools","Document upload","Priority support","Extended chat history"],planType:"pro",popular:!0,current:r&&"pro"===(null==n?void 0:n.plan_type)},{name:"ProMax",price:"£59.99",period:"per month",description:"Complete solution for teams and enterprises",features:["Everything in Pro","Advanced search capabilities","Project management","Team collaboration","Advanced analytics","Custom integrations","White-label options","Dedicated support"],planType:"enterprise",enterprise:!0,current:r&&"enterprise"===(null==n?void 0:n.plan_type)}],f=()=>ae(void 0,null,function*(){m("manage");try{c?yield u():yield i()}catch(e){}finally{m(null)}});return ie.jsx("div",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-gray-950 via-black to-gray-950 text-white",children:ie.jsxs("div",{className:"px-6 py-8",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center mb-8",children:[ie.jsx(by,{onClick:t,variant:"ghost",className:"p-2 hover:bg-gray-800 rounded-xl mr-4 text-white hover:text-white",children:ie.jsx(Fu,{className:"w-6 h-6"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-3xl font-bold text-white",children:"Choose Your Plan"}),ie.jsxs("p",{className:"text-gray-400",children:["Professional building regulations assistance",!s&&!r&&" with 7-day free trial",c&&ie.jsxs("span",{className:"block text-sm text-emerald-400 mt-1",children:["Payments processed through ","ios"===Ry.getPlatform()?"App Store":"Google Play"]})]})]})]}),r&&ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:ie.jsx(Ny,{className:"relative overflow-hidden border border-emerald-500/30 bg-gradient-to-br from-emerald-950/50 via-gray-900/80 to-emerald-950/30 backdrop-blur-xl",children:ie.jsxs(Py,{className:"p-8",children:[ie.jsx("div",{className:"absolute top-6 right-6",children:ie.jsxs("div",{className:"relative flex-shrink-0",children:[ie.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:ie.jsx(nh,{className:"w-8 h-8 text-white"})}),ie.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-emerald-400 rounded-full animate-pulse"})]})}),ie.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[ie.jsxs("div",{className:"flex-1 pr-20",children:[ie.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ie.jsx(Lh,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),ie.jsx("span",{className:"text-sm font-medium text-emerald-300 uppercase tracking-wider",children:"Active Subscription"})]}),ie.jsxs("h3",{className:"text-2xl font-bold text-white mb-3",children:[(()=>{if(!r||!n)return"No Plan";switch(n.plan_type){case"basic":return"EezyBuild";case"pro":return"Pro";case"enterprise":return"ProMax";default:return"Unknown Plan"}})()," Plan"]}),ie.jsx("p",{className:"text-gray-300 text-base mb-4",children:"Your premium subscription is active and ready to use. You have full access to all advanced features, priority support, enhanced building tools, and extended chat history. Enjoy unlimited access to our comprehensive building regulations assistance."}),ie.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx(Hu,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),ie.jsxs("span",{className:"text-gray-300",children:["Renews ",r&&(null==n?void 0:n.current_period_end)?new Date(n.current_period_end).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"]})]}),ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx("div",{className:"w-3 h-3 bg-emerald-400 rounded-full animate-pulse"}),ie.jsx("span",{className:"text-emerald-300 font-medium text-base",children:"Active"})]})]})]}),ie.jsx("div",{className:"flex-shrink-0",children:ie.jsx(by,{onClick:f,disabled:"manage"===h,size:"lg",className:"w-full sm:w-auto bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm transition-all duration-200 px-6 py-3 font-medium",children:"manage"===h?ie.jsxs(ie.Fragment,{children:[ie.jsx(yh,{className:"w-4 h-4 animate-spin mr-2"}),"Loading..."]}):"Manage Subscription"})})]})]})})}),ie.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:p.map((e,t)=>ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*(t+1)},className:"relative rounded-2xl p-6 border backdrop-blur-sm ".concat(e.current?"border-emerald-500 bg-emerald-500/10":e.popular?"border-blue-500 bg-blue-500/10":e.enterprise?"border-purple-500 bg-purple-500/10":"border-gray-700 bg-gray-900/50"),children:[e.popular&&ie.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:ie.jsxs("div",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[ie.jsx(Bh,{className:"w-3 h-3"}),ie.jsx("span",{children:"Most Popular"})]})}),e.enterprise&&ie.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:ie.jsxs("div",{className:"bg-purple-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[ie.jsx(qu,{className:"w-3 h-3"}),ie.jsx("span",{children:"Enterprise"})]})}),ie.jsxs("div",{className:"text-center mb-6",children:[ie.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),ie.jsx("div",{className:"mb-2",children:c&&o.length>0?(()=>{const t=o.find(t=>t.productId.includes(e.planType));return t?ie.jsxs(ie.Fragment,{children:[ie.jsx("span",{className:"text-3xl font-bold text-white",children:t.price}),ie.jsxs("span",{className:"text-gray-400 ml-1",children:["/",e.period]})]}):ie.jsxs(ie.Fragment,{children:[ie.jsx("span",{className:"text-3xl font-bold text-white",children:e.price}),ie.jsxs("span",{className:"text-gray-400 ml-1",children:["/",e.period]})]})})():ie.jsxs(ie.Fragment,{children:[ie.jsx("span",{className:"text-3xl font-bold text-white",children:e.price}),ie.jsxs("span",{className:"text-gray-400 ml-1",children:["/",e.period]})]})}),!s&&!r&&!c&&ie.jsx("div",{className:"mb-2",children:ie.jsx("span",{className:"text-sm font-medium text-emerald-400",children:"7-day free trial"})}),ie.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]}),ie.jsx("ul",{className:"space-y-3 mb-8",children:e.features.map((e,t)=>ie.jsxs("li",{className:"flex items-center space-x-3",children:[ie.jsx(Yu,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"}),ie.jsx("span",{className:"text-gray-300 text-sm",children:e})]},t))}),ie.jsxs(by,{onClick:()=>{return t=e.planType,ae(void 0,null,function*(){m(t);try{if(c){const e="com.lovable.callcreateconnect.".concat(t,"_monthly");yield d(e)}else yield a(t)}catch(e){}finally{m(null)}});var t},disabled:e.current||h===e.planType||c&&l,className:"w-full h-12 rounded-xl font-medium ".concat(e.current?"bg-emerald-600 text-white cursor-default":e.popular?"bg-blue-600 hover:bg-blue-700 text-white":e.enterprise?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"),children:[h===e.planType||c&&l?ie.jsx(yh,{className:"w-4 h-4 animate-spin mr-2"}):null,e.current?"Current Plan":c||s||r?"Subscribe Now":"Start Free Trial"]})]},e.name))}),!r&&!s&&!c&&ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-8 text-center bg-emerald-500/10 rounded-2xl p-6 border border-emerald-500/20",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Start Your Free Trial"}),ie.jsx("p",{className:"text-gray-300 text-sm",children:"Try any plan free for 7 days. No credit card required upfront. Cancel anytime during your trial period with no charges."})]}),(s||r)&&!r||c&&ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-8 text-center bg-orange-500/10 rounded-2xl p-6 border border-orange-500/20",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:c?"App Store Subscription":"No Free Trial Available"}),ie.jsx("p",{className:"text-gray-300 text-sm",children:c?"Subscriptions are managed through your ".concat("ios"===Ry.getPlatform()?"App Store":"Google Play"," account and will be charged immediately."):"You've already used your 7-day free trial. All subscriptions will be charged immediately at the full monthly rate."})]}),r&&ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-8 text-center",children:[ie.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Need to ",c?"manage":"downgrade or cancel"," your subscription?"]}),ie.jsx(by,{onClick:f,variant:"ghost",className:"text-gray-300 hover:text-white hover:bg-gray-800",children:c?"Restore Purchases":"Manage Subscription & Billing"})]})]})})},Yy=({onAuth:e,setUser:t})=>{const[n,r]=st.useState(!0),[s,a]=st.useState(!1),[i,o]=st.useState(""),[l,c]=st.useState(""),[d,u]=st.useState(""),[h,m]=st.useState(!1),[p,f]=st.useState(!1),[g,x]=st.useState(""),{toast:y}=im();return ie.jsxs("div",{className:"h-screen h-dvh bg-black text-white flex flex-col overflow-hidden",children:[ie.jsx("div",{className:"absolute inset-0 bg-black"}),ie.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%2316a34a%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-30"}),ie.jsxs("div",{className:"relative flex-1 flex flex-col px-4 py-4",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},className:"text-center mb-4 flex-shrink-0",children:[ie.jsx(Du.div,{className:"w-48 mx-auto mb-3",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400},children:ie.jsx("img",{src:"/lovable-uploads/19d9139a-985d-44a8-bf7c-29a6d7876dd0.png",alt:"EezyBuild Logo",className:"w-full h-auto object-contain"})}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Your Building Regulations Assistant"})]}),ie.jsx("div",{className:"flex-1 flex flex-col justify-center min-h-0",children:ie.jsxs(Du.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:"card-professional rounded-2xl p-6 max-w-sm mx-auto w-full",children:[ie.jsxs("div",{className:"flex mb-6 bg-gray-800/30 rounded-xl p-1",children:[ie.jsx("button",{onClick:()=>r(!0),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-all duration-300 text-sm ".concat(n?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-lg":"text-gray-400 hover:text-emerald-300"),children:"Sign In"}),ie.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-all duration-300 text-sm ".concat(n?"text-gray-400 hover:text-emerald-300":"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-lg"),children:"Sign Up"})]}),g&&ie.jsx(Du.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm",children:g}),ie.jsxs("form",{onSubmit:s=>ae(void 0,null,function*(){var a;s.preventDefault(),m(!0);try{if(n){const{data:n,error:r}=yield Jh.auth.signInWithPassword({email:i,password:l});if(r){let e=r.message;return"Invalid login credentials"===r.message&&(e="Invalid email or password. Please check your credentials and try again."),x(e),void y({title:"Login Failed",description:e,variant:"destructive"})}if(n.user){const r={id:n.user.id,email:n.user.email,name:(null==(a=n.user.user_metadata)?void 0:a.name)||i.split("@")[0],subscription:"pro",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(i)};t(r),e(!0),setTimeout(()=>{y({title:"Welcome back!",description:"You've successfully signed in.",duration:2e3})},500)}}else{const{data:e,error:t}=yield Jh.auth.signUp({email:i,password:l,options:{data:{name:d},emailRedirectTo:"".concat(window.location.origin,"/")}});if(t)return void y({title:"Registration Failed",description:t.message,variant:"destructive"});e.user&&(y({title:"Account Created!",description:"Please check your email to confirm your account.",duration:3e3}),r(!0))}}catch(o){y({title:"Error",description:o.message||"An unexpected error occurred",variant:"destructive"})}finally{m(!1)}}),className:"space-y-4",children:[!n&&ie.jsxs(Du.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2",children:[ie.jsx("label",{className:"text-xs font-medium text-emerald-300",children:"Full Name"}),ie.jsx(cy,{type:"text",value:d,onChange:e=>u(e.target.value),className:"bg-gray-800/50 border-emerald-500/30 text-white placeholder-gray-500 h-10 focus:border-emerald-400 focus:ring-emerald-400/20",placeholder:"Enter your full name",required:!0})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-xs font-medium text-emerald-300",children:"Email"}),ie.jsxs("div",{className:"relative",children:[ie.jsx(jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-emerald-500/60"}),ie.jsx(cy,{type:"email",value:i,onChange:e=>{o(e.target.value),g&&x("")},className:"bg-gray-800/50 border-emerald-500/30 text-white placeholder-gray-500 h-10 pl-10 focus:border-emerald-400 focus:ring-emerald-400/20",placeholder:"Enter your email",required:!0})]})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-xs font-medium text-emerald-300",children:"Password"}),ie.jsxs("div",{className:"relative",children:[ie.jsx(vh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-emerald-500/60"}),ie.jsx(cy,{type:s?"text":"password",value:l,onChange:e=>{c(e.target.value),g&&x("")},className:"bg-gray-800/50 border-emerald-500/30 text-white placeholder-gray-500 h-10 pl-10 pr-10 focus:border-emerald-400 focus:ring-emerald-400/20",placeholder:"Enter your password",required:!0,minLength:6}),ie.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-500/60 hover:text-emerald-400 transition-colors",children:s?ie.jsx(ih,{className:"w-4 h-4"}):ie.jsx(oh,{className:"w-4 h-4"})})]})]}),ie.jsx("button",{type:"submit",disabled:h,className:"w-full h-10 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl hover:shadow-emerald-500/20 disabled:opacity-50",children:h?ie.jsxs("div",{className:"flex items-center justify-center space-x-2 text-white",children:[ie.jsx(Du.div,{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),ie.jsx("span",{className:"text-white text-sm",children:n?"Signing In...":"Creating Account..."})]}):ie.jsxs(Du.div,{className:"flex items-center justify-center space-x-2 text-white",whileHover:{x:2},transition:{type:"spring",stiffness:400},children:[ie.jsx("span",{className:"text-white text-sm",children:n?"Sign In":"Create Account"}),ie.jsx(Lu,{className:"w-4 h-4 text-white"})]})}),n&&ie.jsx("div",{className:"text-center",children:ie.jsx("button",{type:"button",onClick:()=>ae(void 0,null,function*(){if(i){m(!0);try{const{error:e}=yield Jh.auth.resetPasswordForEmail(i,{redirectTo:"".concat(window.location.origin,"/password-reset")});e?y({title:"Error",description:e.message,variant:"destructive"}):(y({title:"Reset Email Sent",description:"Check your email for password reset instructions"}),f(!1))}catch(e){y({title:"Error",description:e.message||"Failed to send reset email",variant:"destructive"})}finally{m(!1)}}else y({title:"Email Required",description:"Please enter your email address first",variant:"destructive"})}),disabled:h,className:"text-emerald-400 hover:text-emerald-300 text-sm underline",children:"Forgot your password?"})})]})]})}),ie.jsx(Du.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center text-gray-500 text-xs mt-3 flex-shrink-0 px-4",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})]})};var Ky=st.forwardRef((e,t)=>ie.jsx(oe.label,Q(X({},e),{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));Ky.displayName="Label";var Gy=Ky;const Xy=yy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qy=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Gy,X({ref:t,className:zn(Xy(),r)},s))});function Jy(e,[t,n]){return Math.min(n,Math.max(t,e))}function Zy(e){const t=st.useRef({value:e,previous:e});return st.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}Qy.displayName=Gy.displayName;var $y=[" ","Enter","ArrowUp","ArrowDown"],ev=[" ","Enter"],tv="Select",[nv,rv,sv]=ve(tv),[av,iv]=le(tv,[sv,ce]),ov=ce(),[lv,cv]=av(tv),[dv,uv]=av(tv),hv=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:m,form:p}=e,f=ov(t),[g,x]=st.useState(null),[y,v]=st.useState(null),[b,j]=st.useState(!1),w=_e(c),[N=!1,k]=Ee({prop:r,defaultProp:s,onChange:a}),[S,C]=Ee({prop:i,defaultProp:o,onChange:l}),P=st.useRef(null),_=!g||(p||!!g.closest("form")),[E,T]=st.useState(new Set),D=Array.from(E).map(e=>e.props.value).join(";");return ie.jsx(Te,Q(X({},f),{children:ie.jsxs(lv,{required:m,scope:t,trigger:g,onTriggerChange:x,valueNode:y,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:Se(),value:S,onValueChange:C,open:N,onOpenChange:k,dir:w,triggerPointerDownPosRef:P,disabled:h,children:[ie.jsx(nv.Provider,{scope:t,children:ie.jsx(dv,{scope:e.__scopeSelect,onNativeOptionAdd:st.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:st.useCallback(e=>{T(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),_?ie.jsxs(Zv,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:u,value:S,onChange:e=>C(e.target.value),disabled:h,form:p,children:[void 0===S?ie.jsx("option",{value:""}):null,Array.from(E)]},D):null]})}))};hv.displayName=tv;var mv="SelectTrigger",pv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,disabled:s=!1}=n,a=J(n,["__scopeSelect","disabled"]),i=ov(r),o=cv(mv,r),l=o.disabled||s,c=de(t,o.onTriggerChange),d=rv(r),u=st.useRef("touch"),[h,m,p]=$v(e=>{const t=d().filter(e=>!e.disabled),n=t.find(e=>e.value===o.value),r=eb(t,e,n);void 0!==r&&o.onValueChange(r.value)}),f=e=>{l||(o.onOpenChange(!0),p()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return ie.jsx(ue,Q(X({asChild:!0},i),{children:ie.jsx(oe.button,Q(X({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Jv(o.value)?"":void 0},a),{ref:c,onClick:he(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&f(e)}),onPointerDown:he(a.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())}),onKeyDown:he(a.onKeyDown,e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||$y.includes(e.key)&&(f(),e.preventDefault())})}))}))});pv.displayName=mv;var fv="SelectValue",gv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,className:s,style:a,children:i,placeholder:o=""}=n,l=J(n,["__scopeSelect","className","style","children","placeholder"]),c=cv(fv,r),{onValueNodeHasChildrenChange:d}=c,u=void 0!==i,h=de(t,c.onValueNodeChange);return be(()=>{d(u)},[d,u]),ie.jsx(oe.span,Q(X({},l),{ref:h,style:{pointerEvents:"none"},children:Jv(c.value)?ie.jsx(ie.Fragment,{children:o}):i}))});gv.displayName=fv;var xv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,children:s}=n,a=J(n,["__scopeSelect","children"]);return ie.jsx(oe.span,Q(X({"aria-hidden":!0},a),{ref:t,children:s||"▼"}))});xv.displayName="SelectIcon";var yv=e=>ie.jsx(Pe,X({asChild:!0},e));yv.displayName="SelectPortal";var vv="SelectContent",bv=st.forwardRef((e,t)=>{const n=cv(vv,e.__scopeSelect),[r,s]=st.useState();if(be(()=>{s(new DocumentFragment)},[]),!n.open){const t=r;return t?rt.createPortal(ie.jsx(wv,{scope:e.__scopeSelect,children:ie.jsx(nv.Slot,{scope:e.__scopeSelect,children:ie.jsx("div",{children:e.children})})}),t):null}return ie.jsx(kv,Q(X({},e),{ref:t}))});bv.displayName=vv;var jv=10,[wv,Nv]=av(vv),kv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:g,avoidCollisions:x}=n,y=J(n,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),v=cv(vv,r),[b,j]=st.useState(null),[w,N]=st.useState(null),k=de(t,e=>j(e)),[S,C]=st.useState(null),[P,_]=st.useState(null),E=rv(r),[T,D]=st.useState(!1),M=st.useRef(!1);st.useEffect(()=>{if(b)return je(b)},[b]),we();const A=st.useCallback(e=>{const[t,...n]=E().map(e=>e.ref.current),[r]=n.slice(-1),s=document.activeElement;for(const a of e){if(a===s)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&w&&(w.scrollTop=0),a===r&&w&&(w.scrollTop=w.scrollHeight),null==a||a.focus(),document.activeElement!==s)return}},[E,w]),R=st.useCallback(()=>A([S,b]),[A,S,b]);st.useEffect(()=>{T&&R()},[T,R]);const{onOpenChange:I,triggerPointerDownPosRef:F}=v;st.useEffect(()=>{if(b){let e={x:0,y:0};const t=t=>{var n,r,s,a;e={x:Math.abs(Math.round(t.pageX)-(null!=(r=null==(n=F.current)?void 0:n.x)?r:0)),y:Math.abs(Math.round(t.pageY)-(null!=(a=null==(s=F.current)?void 0:s.y)?a:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():b.contains(n.target)||I(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[b,I,F]),st.useEffect(()=>{const e=()=>I(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[I]);const[L,O]=$v(e=>{const t=E().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=eb(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),z=st.useCallback((e,t,n)=>{const r=!M.current&&!n;(void 0!==v.value&&v.value===t||r)&&(C(e),r&&(M.current=!0))},[v.value]),B=st.useCallback(()=>null==b?void 0:b.focus(),[b]),V=st.useCallback((e,t,n)=>{const r=!M.current&&!n;(void 0!==v.value&&v.value===t||r)&&_(e)},[v.value]),U="popper"===s?Cv:Sv,q=U===Cv?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:g,avoidCollisions:x}:{};return ie.jsx(wv,{scope:r,content:b,viewport:w,onViewportChange:N,itemRefCallback:z,selectedItem:S,onItemLeave:B,itemTextRefCallback:V,focusSelectedItem:R,selectedItemText:P,position:s,isPositioned:T,searchRef:L,children:ie.jsx(Ne,{as:ye,allowPinchZoom:!0,children:ie.jsx(ke,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:he(a,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:ie.jsx(pe,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:ie.jsx(U,Q(X(X({role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault()},y),q),{onPlaced:()=>D(!0),ref:k,style:X({display:"flex",flexDirection:"column",outline:"none"},y.style),onKeyDown:he(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||O(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=E().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>A(t)),e.preventDefault()}})}))})})})})});kv.displayName="SelectContentImpl";var Sv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,onPlaced:s}=n,a=J(n,["__scopeSelect","onPlaced"]),i=cv(vv,r),o=Nv(vv,r),[l,c]=st.useState(null),[d,u]=st.useState(null),h=de(t,e=>u(e)),m=rv(r),p=st.useRef(!1),f=st.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:y,focusSelectedItem:v}=o,b=st.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&x&&y){const e=i.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),n=i.valueNode.getBoundingClientRect(),r=y.getBoundingClientRect();if("rtl"!==i.dir){const s=r.left-t.left,a=n.left-s,i=e.left-a,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-jv,u=Jy(a,[jv,Math.max(jv,d-c)]);l.style.minWidth=o+"px",l.style.left=u+"px"}else{const s=t.right-r.right,a=window.innerWidth-n.right-s,i=window.innerWidth-e.right-a,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-jv,u=Jy(a,[jv,Math.max(jv,d-c)]);l.style.minWidth=o+"px",l.style.right=u+"px"}const a=m(),o=window.innerHeight-2*jv,c=g.scrollHeight,u=window.getComputedStyle(d),h=parseInt(u.borderTopWidth,10),f=parseInt(u.paddingTop,10),v=parseInt(u.borderBottomWidth,10),b=h+f+c+parseInt(u.paddingBottom,10)+v,j=Math.min(5*x.offsetHeight,b),w=window.getComputedStyle(g),N=parseInt(w.paddingTop,10),k=parseInt(w.paddingBottom,10),S=e.top+e.height/2-jv,C=o-S,P=x.offsetHeight/2,_=h+f+(x.offsetTop+P),E=b-_;if(_<=S){const e=a.length>0&&x===a[a.length-1].ref.current;l.style.bottom="0px";const t=d.clientHeight-g.offsetTop-g.offsetHeight,n=_+Math.max(C,P+(e?k:0)+t+v);l.style.height=n+"px"}else{const e=a.length>0&&x===a[0].ref.current;l.style.top="0px";const t=Math.max(S,h+g.offsetTop+(e?N:0)+P)+E;l.style.height=t+"px",g.scrollTop=_-S+g.offsetTop}l.style.margin="".concat(jv,"px 0"),l.style.minHeight=j+"px",l.style.maxHeight=o+"px",null==s||s(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,g,x,y,i.dir,s]);be(()=>b(),[b]);const[j,w]=st.useState();be(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const N=st.useCallback(e=>{e&&!0===f.current&&(b(),null==v||v(),f.current=!1)},[b,v]);return ie.jsx(Pv,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:ie.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:ie.jsx(oe.div,Q(X({},a),{ref:h,style:X({boxSizing:"border-box",maxHeight:"100%"},a.style)}))})})});Sv.displayName="SelectItemAlignedPosition";var Cv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,align:s="start",collisionPadding:a=jv}=n,i=J(n,["__scopeSelect","align","collisionPadding"]),o=ov(r);return ie.jsx(fe,Q(X(X({},o),i),{ref:t,align:s,collisionPadding:a,style:X(X({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Cv.displayName="SelectPopperPosition";var[Pv,_v]=av(vv,{}),Ev="SelectViewport",Tv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,nonce:s}=n,a=J(n,["__scopeSelect","nonce"]),i=Nv(Ev,r),o=_v(Ev,r),l=de(t,i.onViewportChange),c=st.useRef(0);return ie.jsxs(ie.Fragment,{children:[ie.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),ie.jsx(nv.Slot,{scope:r,children:ie.jsx(oe.div,Q(X({"data-radix-select-viewport":"",role:"presentation"},a),{ref:l,style:X({position:"relative",flex:1,overflow:"hidden auto"},a.style),onScroll:he(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=o;if((null==r?void 0:r.current)&&n){const e=Math.abs(c.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*jv,s=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),i=Math.max(s,a);if(i<r){const s=i+e,a=Math.min(r,s),o=s-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}c.current=t.scrollTop})}))})]})});Tv.displayName=Ev;var Dv="SelectGroup",[Mv,Av]=av(Dv);st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,s=J(n,["__scopeSelect"]),a=Se();return ie.jsx(Mv,{scope:r,id:a,children:ie.jsx(oe.div,Q(X({role:"group","aria-labelledby":a},s),{ref:t}))})}).displayName=Dv;var Rv="SelectLabel",Iv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,s=J(n,["__scopeSelect"]),a=Av(Rv,r);return ie.jsx(oe.div,Q(X({id:a.id},s),{ref:t}))});Iv.displayName=Rv;var Fv="SelectItem",[Lv,Ov]=av(Fv),zv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,value:s,disabled:a=!1,textValue:i}=n,o=J(n,["__scopeSelect","value","disabled","textValue"]),l=cv(Fv,r),c=Nv(Fv,r),d=l.value===s,[u,h]=st.useState(null!=i?i:""),[m,p]=st.useState(!1),f=de(t,e=>{var t;return null==(t=c.itemRefCallback)?void 0:t.call(c,e,s,a)}),g=Se(),x=st.useRef("touch"),y=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(""===s)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return ie.jsx(Lv,{scope:r,value:s,disabled:a,textId:g,isSelected:d,onItemTextChange:st.useCallback(e=>{h(t=>{var n;return t||(null!=(n=null==e?void 0:e.textContent)?n:"").trim()})},[]),children:ie.jsx(nv.ItemSlot,{scope:r,value:s,disabled:a,textValue:u,children:ie.jsx(oe.div,Q(X({role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o),{ref:f,onFocus:he(o.onFocus,()=>p(!0)),onBlur:he(o.onBlur,()=>p(!1)),onClick:he(o.onClick,()=>{"mouse"!==x.current&&y()}),onPointerUp:he(o.onPointerUp,()=>{"mouse"===x.current&&y()}),onPointerDown:he(o.onPointerDown,e=>{x.current=e.pointerType}),onPointerMove:he(o.onPointerMove,e=>{var t;x.current=e.pointerType,a?null==(t=c.onItemLeave)||t.call(c):"mouse"===x.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=c.onItemLeave)||t.call(c))}),onKeyDown:he(o.onKeyDown,e=>{var t;""!==(null==(t=c.searchRef)?void 0:t.current)&&" "===e.key||(ev.includes(e.key)&&y()," "===e.key&&e.preventDefault())})}))})})});zv.displayName=Fv;var Bv="SelectItemText",Vv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,className:s,style:a}=n,i=J(n,["__scopeSelect","className","style"]),o=cv(Bv,r),l=Nv(Bv,r),c=Ov(Bv,r),d=uv(Bv,r),[u,h]=st.useState(null),m=de(t,e=>h(e),c.onItemTextChange,e=>{var t;return null==(t=l.itemTextRefCallback)?void 0:t.call(l,e,c.value,c.disabled)}),p=null==u?void 0:u.textContent,f=st.useMemo(()=>ie.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return be(()=>(g(f),()=>x(f)),[g,x,f]),ie.jsxs(ie.Fragment,{children:[ie.jsx(oe.span,Q(X({id:c.textId},i),{ref:m})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?rt.createPortal(i.children,o.valueNode):null]})});Vv.displayName=Bv;var Uv="SelectItemIndicator",qv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,s=J(n,["__scopeSelect"]);return Ov(Uv,r).isSelected?ie.jsx(oe.span,Q(X({"aria-hidden":!0},s),{ref:t})):null});qv.displayName=Uv;var Wv="SelectScrollUpButton",Hv=st.forwardRef((e,t)=>{const n=Nv(Wv,e.__scopeSelect),r=_v(Wv,e.__scopeSelect),[s,a]=st.useState(!1),i=de(t,r.onScrollButtonChange);return be(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?ie.jsx(Gv,Q(X({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});Hv.displayName=Wv;var Yv="SelectScrollDownButton",Kv=st.forwardRef((e,t)=>{const n=Nv(Yv,e.__scopeSelect),r=_v(Yv,e.__scopeSelect),[s,a]=st.useState(!1),i=de(t,r.onScrollButtonChange);return be(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;a(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?ie.jsx(Gv,Q(X({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});Kv.displayName=Yv;var Gv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,onAutoScroll:s}=n,a=J(n,["__scopeSelect","onAutoScroll"]),i=Nv("SelectScrollButton",r),o=st.useRef(null),l=rv(r),c=st.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return st.useEffect(()=>()=>c(),[c]),be(()=>{var e;const t=l().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[l]),ie.jsx(oe.div,Q(X({"aria-hidden":!0},a),{ref:t,style:X({flexShrink:0},a.style),onPointerDown:he(a.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(s,50))}),onPointerMove:he(a.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===o.current&&(o.current=window.setInterval(s,50))}),onPointerLeave:he(a.onPointerLeave,()=>{c()})}))}),Xv=st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,s=J(n,["__scopeSelect"]);return ie.jsx(oe.div,Q(X({"aria-hidden":!0},s),{ref:t}))});Xv.displayName="SelectSeparator";var Qv="SelectArrow";function Jv(e){return""===e||void 0===e}st.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,s=J(n,["__scopeSelect"]),a=ov(r),i=cv(Qv,r),o=Nv(Qv,r);return i.open&&"popper"===o.position?ie.jsx(xe,Q(X(X({},a),s),{ref:t})):null}).displayName=Qv;var Zv=st.forwardRef((e,t)=>{const n=e,{value:r}=n,s=J(n,["value"]),a=st.useRef(null),i=de(t,a),o=Zy(r);return st.useEffect(()=>{const e=a.current,t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==r&&n){const t=new Event("change",{bubbles:!0});n.call(e,r),e.dispatchEvent(t)}},[o,r]),ie.jsx(yt,{asChild:!0,children:ie.jsx("select",Q(X({},s),{ref:i,defaultValue:r}))})});function $v(e){const t=Ce(e),n=st.useRef(""),r=st.useRef(0),s=st.useCallback(e=>{const s=n.current+e;t(s),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),a=st.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return st.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function eb(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=(i=e,o=Math.max(s,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}Zv.displayName="BubbleSelect";var tb=pv,nb=xv,rb=yv,sb=bv,ab=Tv,ib=Iv,ob=zv,lb=Vv,cb=qv,db=Hv,ub=Kv,hb=Xv;const mb=hv,pb=gv,fb=st.forwardRef((e,t)=>{var n=e,{className:r,children:s}=n,a=J(n,["className","children"]);return ie.jsxs(tb,Q(X({ref:t,className:zn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},a),{children:[s,ie.jsx(nb,{asChild:!0,children:ie.jsx(Ku,{className:"h-4 w-4 opacity-50"})})]}))});fb.displayName=tb.displayName;const gb=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(db,Q(X({ref:t,className:zn("flex cursor-default items-center justify-center py-1",r)},s),{children:ie.jsx(Qu,{className:"h-4 w-4"})}))});gb.displayName=db.displayName;const xb=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(ub,Q(X({ref:t,className:zn("flex cursor-default items-center justify-center py-1",r)},s),{children:ie.jsx(Ku,{className:"h-4 w-4"})}))});xb.displayName=ub.displayName;const yb=st.forwardRef((e,t)=>{var n=e,{className:r,children:s,position:a="popper"}=n,i=J(n,["className","children","position"]);return ie.jsx(rb,{children:ie.jsxs(sb,Q(X({ref:t,className:zn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a},i),{children:[ie.jsx(gb,{}),ie.jsx(ab,{className:zn("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),ie.jsx(xb,{})]}))})});yb.displayName=sb.displayName;st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(ib,X({ref:t,className:zn("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},s))}).displayName=ib.displayName;const vb=st.forwardRef((e,t)=>{var n=e,{className:r,children:s}=n,a=J(n,["className","children"]);return ie.jsxs(ob,Q(X({ref:t,className:zn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},a),{children:[ie.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ie.jsx(cb,{children:ie.jsx(Yu,{className:"h-4 w-4"})})}),ie.jsx(lb,{children:s})]}))});vb.displayName=ob.displayName;st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(hb,X({ref:t,className:zn("-mx-1 my-1 h-px bg-muted",r)},s))}).displayName=hb.displayName;const bb=({onSearch:e,isSearching:t})=>{const[n,r]=st.useState({text:""});return ie.jsxs(Du.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"p-6 h-full overflow-y-auto glass",children:[ie.jsxs(Du.div,{className:"flex items-center space-x-3 mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[ie.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center",children:ie.jsx(uh,{className:"w-4 h-4 text-white"})}),ie.jsx("h2",{className:"text-lg font-semibold bg-gradient-to-r from-emerald-400 to-green-300 bg-clip-text text-transparent",children:"Search Filters"})]}),ie.jsxs("form",{onSubmit:t=>{t.preventDefault(),e(n)},className:"space-y-6",children:[ie.jsxs(Du.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[ie.jsx(Qy,{htmlFor:"search-text",className:"text-emerald-100 font-medium",children:"Search Query"}),ie.jsx(cy,{id:"search-text",type:"text",placeholder:"Enter keywords, regulation numbers, or requirements...",value:n.text,onChange:e=>r(t=>Q(X({},t),{text:e.target.value})),className:"bg-black/30 border-emerald-500/30 text-white placeholder:text-gray-400 focus:border-emerald-400 focus:ring-emerald-400/20 backdrop-blur-sm"})]}),ie.jsxs(Du.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:[ie.jsx(Qy,{className:"text-emerald-100 font-medium",children:"Regulation Part"}),ie.jsxs(mb,{value:n.part||"all-parts",onValueChange:e=>{r(t=>Q(X({},t),{part:"all-parts"===e?void 0:e}))},children:[ie.jsx(fb,{className:"bg-black/30 border-emerald-500/30 text-white backdrop-blur-sm focus:border-emerald-400",children:ie.jsx(pb,{placeholder:"Select regulation part"})}),ie.jsxs(yb,{className:"bg-black/90 border-emerald-500/30 backdrop-blur-xl",children:[ie.jsx(vb,{value:"all-parts",className:"text-white hover:bg-emerald-500/20 focus:bg-emerald-500/20",children:"All Parts"}),[{value:"part-a",label:"Part A - Structure"},{value:"part-b",label:"Part B - Fire Safety"},{value:"part-c",label:"Part C - Site Preparation"},{value:"part-d",label:"Part D - Toxic Substances"},{value:"part-e",label:"Part E - Sound"},{value:"part-f",label:"Part F - Ventilation"},{value:"part-g",label:"Part G - Sanitation"},{value:"part-h",label:"Part H - Drainage"},{value:"part-j",label:"Part J - Combustion Appliances"},{value:"part-k",label:"Part K - Protection from Falls"},{value:"part-l",label:"Part L - Conservation of Fuel"},{value:"part-m",label:"Part M - Access & Facilities"},{value:"part-n",label:"Part N - Glazing Safety"},{value:"part-p",label:"Part P - Electrical Safety"}].map(e=>ie.jsx(vb,{value:e.value,className:"text-white hover:bg-emerald-500/20 focus:bg-emerald-500/20",children:e.label},e.value))]})]})]}),ie.jsxs(Du.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[ie.jsx(Qy,{className:"text-emerald-100 font-medium",children:"Building Type"}),ie.jsxs(mb,{value:n.buildingType||"all-types",onValueChange:e=>{r(t=>Q(X({},t),{buildingType:"all-types"===e?void 0:e}))},children:[ie.jsx(fb,{className:"bg-black/30 border-emerald-500/30 text-white backdrop-blur-sm focus:border-emerald-400",children:ie.jsx(pb,{placeholder:"Select building type"})}),ie.jsxs(yb,{className:"bg-black/90 border-emerald-500/30 backdrop-blur-xl",children:[ie.jsx(vb,{value:"all-types",className:"text-white hover:bg-emerald-500/20 focus:bg-emerald-500/20",children:"All Types"}),[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"industrial",label:"Industrial"},{value:"educational",label:"Educational"},{value:"healthcare",label:"Healthcare"},{value:"retail",label:"Retail"}].map(e=>ie.jsx(vb,{value:e.value,className:"text-white hover:bg-emerald-500/20 focus:bg-emerald-500/20",children:e.label},e.value))]})]})]}),ie.jsxs(Du.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},children:[ie.jsx(Qy,{className:"text-emerald-100 font-medium",children:"Topic"}),ie.jsxs(mb,{value:n.topic||"all-topics",onValueChange:e=>{r(t=>Q(X({},t),{topic:"all-topics"===e?void 0:e}))},children:[ie.jsx(fb,{className:"bg-black/30 border-emerald-500/30 text-white backdrop-blur-sm focus:border-emerald-400",children:ie.jsx(pb,{placeholder:"Select topic"})}),ie.jsxs(yb,{className:"bg-black/90 border-emerald-500/30 backdrop-blur-xl",children:[ie.jsx(vb,{value:"all-topics",className:"text-white hover:bg-emerald-500/20 focus:bg-emerald-500/20",children:"All Topics"}),[{value:"fire-safety",label:"Fire Safety"},{value:"structural",label:"Structural Requirements"},{value:"accessibility",label:"Accessibility"},{value:"energy-efficiency",label:"Energy Efficiency"},{value:"ventilation",label:"Ventilation"},{value:"drainage",label:"Drainage & Plumbing"},{value:"electrical",label:"Electrical Safety"},{value:"glazing",label:"Glazing & Windows"}].map(e=>ie.jsx(vb,{value:e.value,className:"text-white hover:bg-emerald-500/20 focus:bg-emerald-500/20",children:e.label},e.value))]})]})]}),ie.jsxs(Du.div,{className:"space-y-3 pt-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7},children:[ie.jsxs(by,{type:"submit",disabled:t||!n.text.trim(),className:"w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white font-medium shadow-lg shadow-emerald-500/25 transition-all duration-300",children:[t?ie.jsx(Du.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}):ie.jsx(Rh,{className:"w-4 h-4 mr-2"}),"Search Regulations"]}),ie.jsx(by,{type:"button",variant:"outline",onClick:()=>{r({text:""})},className:"w-full border-emerald-500/40 text-emerald-300 hover:bg-emerald-500/10 hover:border-emerald-400 backdrop-blur-sm",children:"Clear Filters"})]})]})]})},jb=yy("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wb=st.forwardRef((e,t)=>{var n=e,{className:r,variant:s}=n,a=J(n,["className","variant"]);return ie.jsx("div",X({ref:t,role:"alert",className:zn(jb({variant:s}),r)},a))});wb.displayName="Alert";st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("h5",X({ref:t,className:zn("mb-1 font-medium leading-none tracking-tight",r)},s))}).displayName="AlertTitle";const Nb=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("div",X({ref:t,className:zn("text-sm [&_p]:leading-relaxed",r)},s))});Nb.displayName="AlertDescription";const kb=({results:e,isSearching:t,query:n,favorites:r,onToggleFavorite:s})=>{var a;const i=e=>r.some(t=>t.id===e.id);if(t)return ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:ie.jsxs(Du.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[ie.jsx(yh,{className:"w-12 h-12 text-emerald-500 animate-spin mx-auto mb-4"}),ie.jsx("p",{className:"text-gray-400 text-lg",children:"Searching UK Building Regulations..."}),ie.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Analyzing regulations and requirements"})]})});if(!n.text&&0===e.length)return ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[ie.jsx(Rh,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),ie.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Search Building Regulations"}),ie.jsx("p",{className:"text-gray-400",children:"Use the search filters on the left to find specific UK Building Regulations requirements, compliance information, and guidance."}),ie.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[ie.jsx("p",{children:"Try searching for:"}),ie.jsxs("ul",{className:"mt-2 space-y-1",children:[ie.jsx("li",{children:'• "fire safety requirements"'}),ie.jsx("li",{children:'• "structural calculations"'}),ie.jsx("li",{children:'• "accessibility compliance"'}),ie.jsx("li",{children:'• "energy efficiency standards"'})]})]})]})});if(0===e.length&&n.text)return ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[ie.jsx(dh,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),ie.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Results Found"}),ie.jsx("p",{className:"text-gray-400 mb-4",children:"No regulations found matching your search criteria. Try adjusting your search terms or filters."}),ie.jsxs("div",{className:"text-sm text-gray-500",children:[ie.jsx("p",{children:"Suggestions:"}),ie.jsxs("ul",{className:"mt-2 space-y-1 text-left",children:[ie.jsx("li",{children:"• Use more general terms"}),ie.jsx("li",{children:"• Check spelling and try alternative words"}),ie.jsx("li",{children:"• Remove some filters to broaden the search"}),ie.jsx("li",{children:"• Try searching for specific Part letters (A, B, C, etc.)"})]})]})]})});const o=e.some(e=>"System"===e.part&&"Error"===e.section);return ie.jsx("div",{className:"flex-1 overflow-y-auto",children:ie.jsxs("div",{className:"p-6",children:[ie.jsxs("div",{className:"mb-6",children:[ie.jsxs("h2",{className:"text-xl font-semibold text-white mb-2",children:["Search Results (",e.length,")"]}),n.text&&ie.jsxs("div",{className:"text-gray-400",children:[ie.jsxs("p",{className:"mb-1 break-words",children:['Results for "',ie.jsx("span",{className:"text-emerald-400 font-medium",children:n.text}),'"']}),(n.part||n.buildingType||n.topic)&&ie.jsxs("div",{className:"text-sm space-x-2 flex flex-wrap gap-1",children:[n.part&&ie.jsx("span",{className:"inline-block px-2 py-1 bg-emerald-600/20 text-emerald-400 rounded text-xs",children:n.part}),n.buildingType&&ie.jsx("span",{className:"inline-block px-2 py-1 bg-blue-600/20 text-blue-400 rounded text-xs",children:n.buildingType}),n.topic&&ie.jsx("span",{className:"inline-block px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-xs",children:n.topic})]})]})]}),o&&ie.jsxs(wb,{className:"mb-6 border-red-600 bg-red-600/10",children:[ie.jsx(Ju,{className:"h-4 w-4 text-red-500"}),ie.jsx(Nb,{className:"text-red-300",children:(null==(a=e.find(e=>"System"===e.part))?void 0:a.content)||"There was an issue performing the search. Please try again or contact support if the problem persists."})]}),ie.jsx("div",{className:"space-y-4",children:ie.jsx(Do,{children:e.map((e,t)=>ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.1*t},children:ie.jsxs(Ny,{className:"".concat(o&&"System"===e.part?"bg-red-900/20 border-red-600":"bg-gray-800/50 border-gray-700 hover:bg-gray-800/70"," transition-colors overflow-hidden"),children:[ie.jsx(ky,{className:"pb-3",children:ie.jsxs("div",{className:"flex items-start justify-between gap-4",children:[ie.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[ie.jsx(Sy,{className:"text-white text-lg mb-2 break-words hyphens-auto leading-relaxed",children:e.title}),ie.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400 flex-wrap gap-2",children:[ie.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(o&&"System"===e.part?"bg-red-600/20 text-red-400":"bg-emerald-600/20 text-emerald-400"),children:e.part}),"Error"!==e.section&&ie.jsxs(ie.Fragment,{children:[ie.jsxs("span",{className:"text-gray-500",children:["Section ",e.section]}),ie.jsxs("span",{className:"text-gray-500",children:["Relevance: ",Math.round(100*e.relevanceScore),"%"]})]})]})]}),!o&&"System"!==e.part&&ie.jsx(by,{variant:"ghost",size:"icon",onClick:()=>s(e),className:"flex-shrink-0 ".concat(i(e)?"text-yellow-500":"text-gray-400"," hover:text-yellow-500 transition-colors"),children:ie.jsx(Bh,{className:"w-5 h-5 ".concat(i(e)?"fill-current":"")})})]})}),ie.jsxs(Py,{className:"pt-0 space-y-4",children:[ie.jsx("div",{className:"prose prose-sm prose-invert max-w-none",children:ie.jsx("div",{className:"text-gray-300 leading-relaxed break-words hyphens-auto overflow-wrap-anywhere",children:e.content})}),e.images&&e.images.length>0&&ie.jsx("div",{className:"mt-4",children:ie.jsx(hy,{images:e.images})}),!o&&"System"!==e.part&&ie.jsxs("div",{className:"flex items-center justify-between pt-2 flex-wrap gap-2",children:[ie.jsxs(by,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:[ie.jsx(ah,{className:"w-4 h-4 mr-2"}),"View Full Regulation"]}),e.images&&e.images.length>0&&ie.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[ie.jsx(gh,{className:"w-3 h-3 mr-1"}),e.images.length," image",e.images.length>1?"s":""]})]})]})]})},e.id))})})]})})};var Sb="Tabs",[Cb,Pb]=le(Sb,[De]),_b=De(),[Eb,Tb]=Cb(Sb),Db=st.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic"}=n,d=J(n,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),u=_e(l),[h,m]=Ee({prop:s,onChange:a,defaultProp:i});return ie.jsx(Eb,{scope:r,baseId:Se(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:ie.jsx(oe.div,Q(X({dir:u,"data-orientation":o},d),{ref:t}))})});Db.displayName=Sb;var Mb="TabsList",Ab=st.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,loop:s=!0}=n,a=J(n,["__scopeTabs","loop"]),i=Tb(Mb,r),o=_b(r);return ie.jsx(Me,Q(X({asChild:!0},o),{orientation:i.orientation,dir:i.dir,loop:s,children:ie.jsx(oe.div,Q(X({role:"tablist","aria-orientation":i.orientation},a),{ref:t}))}))});Ab.displayName=Mb;var Rb="TabsTrigger",Ib=st.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,value:s,disabled:a=!1}=n,i=J(n,["__scopeTabs","value","disabled"]),o=Tb(Rb,r),l=_b(r),c=Ob(o.baseId,s),d=zb(o.baseId,s),u=s===o.value;return ie.jsx(Ae,Q(X({asChild:!0},l),{focusable:!a,active:u,children:ie.jsx(oe.button,Q(X({type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c},i),{ref:t,onMouseDown:he(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:he(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:he(e.onFocus,()=>{const e="manual"!==o.activationMode;u||a||!e||o.onValueChange(s)})}))}))});Ib.displayName=Rb;var Fb="TabsContent",Lb=st.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,value:s,forceMount:a,children:i}=n,o=J(n,["__scopeTabs","value","forceMount","children"]),l=Tb(Fb,r),c=Ob(l.baseId,s),d=zb(l.baseId,s),u=s===l.value,h=st.useRef(u);return st.useEffect(()=>{const e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),ie.jsx(me,{present:a||u,children:({present:n})=>ie.jsx(oe.div,Q(X({"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:d,tabIndex:0},o),{ref:t,style:Q(X({},e.style),{animationDuration:h.current?"0s":void 0}),children:n&&i}))})});function Ob(e,t){return"".concat(e,"-trigger-").concat(t)}function zb(e,t){return"".concat(e,"-content-").concat(t)}Lb.displayName=Fb;var Bb=Ab,Vb=Ib,Ub=Lb;const qb=Db,Wb=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Bb,X({ref:t,className:zn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r)},s))});Wb.displayName=Bb.displayName;const Hb=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Vb,X({ref:t,className:zn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r)},s))});Hb.displayName=Vb.displayName;const Yb=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Ub,X({ref:t,className:zn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r)},s))});Yb.displayName=Ub.displayName;const Kb=({subscriptionTier:e="none",onViewPlans:t})=>{const[n,r]=st.useState(""),[s,a]=st.useState(null),i="basic"===e?[{id:"u-value",title:"U-Value Calculator",description:"Calculate thermal transmittance for building elements",icon:Wu}]:[{id:"u-value",title:"U-Value Calculator",description:"Calculate thermal transmittance for building elements",icon:Wu},{id:"fire-escape",title:"Fire Escape Distance",description:"Calculate maximum travel distances for fire escape routes",icon:Wu},{id:"ventilation",title:"Ventilation Rate",description:"Calculate required ventilation rates for different spaces",icon:Wu}];return ie.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:ie.jsxs(qb,{defaultValue:"lookup",className:"w-full",children:[ie.jsxs(Wb,{className:"grid w-full grid-cols-3 bg-gray-800 mb-6",children:[ie.jsx(Hb,{value:"lookup",className:"data-[state=active]:bg-gray-700",children:"Regulation Lookup"}),ie.jsx(Hb,{value:"calculators",className:"data-[state=active]:bg-gray-700",children:"Calculators"}),ie.jsx(Hb,{value:"checklists",className:"data-[state=active]:bg-gray-700",children:"Checklists"})]}),ie.jsx(Yb,{value:"lookup",children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Rh,{className:"w-5 h-5 mr-2 text-blue-400"}),"Quick Regulation Lookup"]})}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"flex space-x-3",children:[ie.jsxs("div",{className:"flex-1",children:[ie.jsx(Qy,{htmlFor:"reg-code",className:"text-white",children:"Regulation Code or Reference"}),ie.jsx(cy,{id:"reg-code",placeholder:"e.g., Part B, B1, A1/2, etc.",value:n,onChange:e=>r(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsx(by,{onClick:()=>{a({code:n,title:"Part B - Fire Safety Requirements",description:"Requirements for fire safety provisions in buildings including escape routes, fire resistance, and alarm systems.",sections:["B1 - Means of warning","B2 - Internal fire spread","B3 - External fire spread"]})},disabled:!n.trim(),className:"bg-blue-600 hover:bg-blue-700 mt-6",children:"Lookup"})]}),s&&ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[ie.jsx("h3",{className:"text-white font-semibold mb-2",children:s.title}),ie.jsx("p",{className:"text-gray-300 mb-3",children:s.description}),ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-white text-sm font-medium mb-2",children:"Related Sections:"}),ie.jsx("ul",{className:"space-y-1",children:s.sections.map((e,t)=>ie.jsxs("li",{className:"text-gray-400 text-sm",children:["• ",e]},t))})]})]})]})]})}),ie.jsx(Yb,{value:"calculators",children:ie.jsxs("div",{className:"space-y-4",children:[ie.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>{const t=e.icon;return ie.jsx(Du.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700 hover:bg-gray-800/70 transition-colors cursor-pointer",children:[ie.jsx(ky,{className:"pb-3",children:ie.jsxs(Sy,{className:"text-white flex items-center text-lg",children:[ie.jsx(t,{className:"w-5 h-5 mr-2 text-blue-400"}),e.title]})}),ie.jsxs(Py,{children:[ie.jsx("p",{className:"text-gray-400 text-sm mb-4",children:e.description}),ie.jsx(by,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Open Calculator"})]})]})},e.id)})}),"basic"===e&&t&&ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-lg p-6 text-center",children:[ie.jsx(nh,{className:"w-8 h-8 text-blue-400 mx-auto mb-3"}),ie.jsx("h3",{className:"text-white font-semibold mb-2",children:"Want More Tools?"}),ie.jsx("p",{className:"text-gray-400 mb-4",children:"Unlock fire escape calculators, ventilation tools, and more with Pro or ProMax"}),ie.jsxs(by,{onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[ie.jsx(nh,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]})]})}),ie.jsx(Yb,{value:"checklists",children:ie.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[{id:"new-build",title:"New Build Residential",description:"Complete checklist for new residential construction",items:12},{id:"extension",title:"House Extension",description:"Requirements for residential extensions",items:8},{id:"commercial",title:"Commercial Building",description:"Commercial building compliance checklist",items:15}].map(e=>ie.jsx(Du.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700 hover:bg-gray-800/70 transition-colors cursor-pointer",children:[ie.jsx(ky,{className:"pb-3",children:ie.jsxs(Sy,{className:"text-white flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(Oh,{className:"w-5 h-5 mr-2 text-green-400"}),e.title]}),ie.jsxs("span",{className:"text-sm text-gray-400",children:[e.items," items"]})]})}),ie.jsxs(Py,{children:[ie.jsx("p",{className:"text-gray-400 text-sm mb-4",children:e.description}),ie.jsxs(by,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[ie.jsx(dh,{className:"w-4 h-4 mr-2"}),"View Checklist"]})]})]})},e.id))})})]})})},Gb=({searchHistory:e,favorites:t,onSearch:n,onToggleFavorite:r})=>{const s=e=>{let t=e.text;const n=[];return e.part&&n.push("Part: ".concat(e.part)),e.buildingType&&n.push("Type: ".concat(e.buildingType)),e.topic&&n.push("Topic: ".concat(e.topic)),n.length>0&&(t+=" (".concat(n.join(", "),")")),t};return ie.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:ie.jsxs(qb,{defaultValue:"history",className:"w-full",children:[ie.jsxs(Wb,{className:"grid w-full grid-cols-2 bg-gray-800 mb-6",children:[ie.jsx(Hb,{value:"history",className:"data-[state=active]:bg-gray-700",children:"Search History"}),ie.jsx(Hb,{value:"favorites",className:"data-[state=active]:bg-gray-700",children:"Favorites"})]}),ie.jsx(Yb,{value:"history",children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(ph,{className:"w-5 h-5 mr-2 text-blue-400"}),"Recent Searches"]})}),ie.jsx(Py,{children:0===e.length?ie.jsxs("div",{className:"text-center py-8",children:[ie.jsx(th,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),ie.jsx("p",{className:"text-gray-400",children:"No recent searches"})]}):ie.jsx("div",{className:"space-y-3",children:ie.jsx(Do,{children:e.map((e,t)=>ie.jsxs(Du.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-gray-900/50 rounded-lg border border-gray-700 hover:bg-gray-900/70 transition-colors",children:[ie.jsx("div",{className:"flex-1",children:ie.jsx("p",{className:"text-white text-sm font-medium",children:s(e)})}),ie.jsx("div",{className:"flex items-center space-x-2",children:ie.jsxs(by,{variant:"ghost",size:"sm",onClick:()=>n(e),className:"text-blue-400 hover:text-blue-300 hover:bg-blue-400/10",children:[ie.jsx(Rh,{className:"w-4 h-4 mr-1"}),"Search Again"]})})]},t))})})})]})}),ie.jsx(Yb,{value:"favorites",children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Bh,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Favorite Regulations"]})}),ie.jsx(Py,{children:0===t.length?ie.jsxs("div",{className:"text-center py-8",children:[ie.jsx(Bh,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),ie.jsx("p",{className:"text-gray-400",children:"No favorite regulations yet"}),ie.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Star regulations in search results to save them here"})]}):ie.jsx("div",{className:"space-y-4",children:ie.jsx(Do,{children:t.map(e=>ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:[ie.jsxs("div",{className:"flex items-start justify-between mb-2",children:[ie.jsx("h3",{className:"text-white font-medium",children:e.title}),ie.jsx(by,{variant:"ghost",size:"icon",onClick:()=>r(e),className:"text-yellow-500 hover:text-yellow-400",children:ie.jsx(Bh,{className:"w-4 h-4 fill-current"})})]}),ie.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-400 mb-2",children:[ie.jsx("span",{className:"bg-blue-600/20 text-blue-400 px-2 py-1 rounded",children:e.part}),ie.jsxs("span",{children:["Section ",e.section]})]}),ie.jsx("p",{className:"text-gray-300 text-sm line-clamp-2",children:e.content})]},e.id))})})})]})})]})})},{createElement:Xb,createContext:Qb,createRef:Jb,forwardRef:Zb,useCallback:$b,useContext:ej,useEffect:tj,useImperativeHandle:nj,useLayoutEffect:rj,useMemo:sj,useRef:aj,useState:ij}=ot,oj=ot["useId".concat(Math.random()).slice(0,5)],lj=rj,cj=Qb(null);cj.displayName="PanelGroupContext";const dj=lj,uj="function"==typeof oj?oj:()=>null;let hj=0;function mj(e=null){const t=uj(),n=aj(e||t||null);return null===n.current&&(n.current=""+hj++),null!=e?e:n.current}function pj(e){var t=e,{children:n,className:r="",collapsedSize:s,collapsible:a,defaultSize:i,forwardedRef:o,id:l,maxSize:c,minSize:d,onCollapse:u,onExpand:h,onResize:m,order:p,style:f,tagName:g="div"}=t,x=J(t,["children","className","collapsedSize","collapsible","defaultSize","forwardedRef","id","maxSize","minSize","onCollapse","onExpand","onResize","order","style","tagName"]);const y=ej(cj);if(null===y)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:b,getPanelSize:j,getPanelStyle:w,groupId:N,isPanelCollapsed:k,reevaluatePanelConstraints:S,registerPanel:C,resizePanel:P,unregisterPanel:_}=y,E=mj(l),T=aj({callbacks:{onCollapse:u,onExpand:h,onResize:m},constraints:{collapsedSize:s,collapsible:a,defaultSize:i,maxSize:c,minSize:d},id:E,idIsFromProps:void 0!==l,order:p});aj({didLogMissingDefaultSizeWarning:!1}),dj(()=>{const{callbacks:e,constraints:t}=T.current,n=X({},t);T.current.id=E,T.current.idIsFromProps=void 0!==l,T.current.order=p,e.onCollapse=u,e.onExpand=h,e.onResize=m,t.collapsedSize=s,t.collapsible=a,t.defaultSize=i,t.maxSize=c,t.minSize=d,n.collapsedSize===t.collapsedSize&&n.collapsible===t.collapsible&&n.maxSize===t.maxSize&&n.minSize===t.minSize||S(T.current,n)}),dj(()=>{const e=T.current;return C(e),()=>{_(e)}},[p,E,C,_]),nj(o,()=>({collapse:()=>{v(T.current)},expand:e=>{b(T.current,e)},getId:()=>E,getSize:()=>j(T.current),isCollapsed:()=>k(T.current),isExpanded:()=>!k(T.current),resize:e=>{P(T.current,e)}}),[v,b,j,k,E,P]);const D=w(T.current,i);return Xb(g,Q(X({},x),{children:n,className:r,id:l,style:X(X({},D),f),"data-panel":"","data-panel-collapsible":a||void 0,"data-panel-group-id":N,"data-panel-id":E,"data-panel-size":parseFloat(""+D.flexGrow).toFixed(1)}))}const fj=Zb((e,t)=>Xb(pj,Q(X({},e),{forwardedRef:t})));pj.displayName="Panel",fj.displayName="forwardRef(Panel)";let gj=null,xj=null;function yj(e,t){const n=function(e,t){if(t){const e=0!==(t&Mj),n=0!==(t&Aj);if(0!==(t&Tj))return e?"se-resize":n?"ne-resize":"e-resize";if(0!==(t&Dj))return e?"sw-resize":n?"nw-resize":"w-resize";if(e)return"s-resize";if(n)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);gj!==n&&(gj=n,null===xj&&(xj=document.createElement("style"),document.head.appendChild(xj)),xj.innerHTML="*{cursor: ".concat(n,"!important;}"))}function vj(e){return"keydown"===e.type}function bj(e){return e.type.startsWith("pointer")}function jj(e){return e.type.startsWith("mouse")}function wj(e){if(bj(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(jj(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Nj(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}const kj=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Sj(e){const t=getComputedStyle(e);return"fixed"===t.position||(!("auto"===t.zIndex||"static"===t.position&&!function(e){var t;const n=getComputedStyle(null!==(t=Ej(e))&&void 0!==t?t:e).display;return"flex"===n||"inline-flex"===n}(e))||(+t.opacity<1||("transform"in t&&"none"!==t.transform||("webkitTransform"in t&&"none"!==t.webkitTransform||("mixBlendMode"in t&&"normal"!==t.mixBlendMode||("filter"in t&&"none"!==t.filter||("webkitFilter"in t&&"none"!==t.webkitFilter||("isolation"in t&&"isolate"===t.isolation||(!!kj.test(t.willChange)||"touch"===t.webkitOverflowScrolling)))))))))}function Cj(e){let t=e.length;for(;t--;){const n=e[t];if(Gj(n,"Missing node"),Sj(n))return n}return null}function Pj(e){return e&&Number(getComputedStyle(e).zIndex)||0}function _j(e){const t=[];for(;e;)t.push(e),e=Ej(e);return t}function Ej(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Tj=1,Dj=2,Mj=4,Aj=8,Rj="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let Ij=[],Fj=!1,Lj=new Map,Oj=new Map;const zj=new Set;function Bj(e){const{target:t}=e,{x:n,y:r}=wj(e);Fj=!0,qj({target:t,x:n,y:r}),Yj(),Ij.length>0&&(Kj("down",e),e.preventDefault(),e.stopPropagation())}function Vj(e){const{x:t,y:n}=wj(e);if(Fj&&0===e.buttons&&(Fj=!1,Kj("up",e)),!Fj){const{target:r}=e;qj({target:r,x:t,y:n})}Kj("move",e),Hj(),Ij.length>0&&e.preventDefault()}function Uj(e){const{target:t}=e,{x:n,y:r}=wj(e);Oj.clear(),Fj=!1,Ij.length>0&&e.preventDefault(),Kj("up",e),qj({target:t,x:n,y:r}),Hj(),Yj()}function qj({target:e,x:t,y:n}){Ij.splice(0);let r=null;e instanceof HTMLElement&&(r=e),zj.forEach(e=>{const{element:s,hitAreaMargins:a}=e,i=s.getBoundingClientRect(),{bottom:o,left:l,right:c,top:d}=i,u=Rj?a.coarse:a.fine;if(t>=l-u&&t<=c+u&&n>=d-u&&n<=o+u){if(null!==r&&document.contains(r)&&s!==r&&!s.contains(r)&&!r.contains(s)&&function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:_j(e),b:_j(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;Gj(r,"Stacking order can only be calculated for elements with a common ancestor");const s=Pj(Cj(n.a)),a=Pj(Cj(n.b));if(s===a){const e=r.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)};let s=e.length;for(;s--;){const n=e[s];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(s-a)}(r,s)>0){let e=r,t=!1;for(;e&&!e.contains(s);){if(Nj(e.getBoundingClientRect(),i)){t=!0;break}e=e.parentElement}if(t)return}Ij.push(e)}})}function Wj(e,t){Oj.set(e,t)}function Hj(){let e=!1,t=!1;Ij.forEach(n=>{const{direction:r}=n;"horizontal"===r?e=!0:t=!0});let n=0;Oj.forEach(e=>{n|=e}),e&&t?yj("intersection",n):e?yj("horizontal",n):t?yj("vertical",n):null!==xj&&(document.head.removeChild(xj),gj=null,xj=null)}function Yj(){Lj.forEach((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",Uj),n.removeEventListener("pointerdown",Bj),n.removeEventListener("pointerleave",Vj),n.removeEventListener("pointermove",Vj)}),window.removeEventListener("pointerup",Uj),window.removeEventListener("pointercancel",Uj),zj.size>0&&(Fj?(Ij.length>0&&Lj.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",Uj),n.addEventListener("pointerleave",Vj),n.addEventListener("pointermove",Vj))}),window.addEventListener("pointerup",Uj),window.addEventListener("pointercancel",Uj)):Lj.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",Bj,{capture:!0}),n.addEventListener("pointermove",Vj))}))}function Kj(e,t){zj.forEach(n=>{const{setResizeHandlerState:r}=n,s=Ij.includes(n);r(e,s,t)})}function Gj(e,t){if(!e)throw Error(t)}function Xj(e,t,n=10){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Qj(e,t,n=10){return 0===Xj(e,t,n)}function Jj(e,t,n){return 0===Xj(e,t,n)}function Zj({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];Gj(null!=r,"Panel constraints not found for index ".concat(t));let{collapsedSize:s=0,collapsible:a,maxSize:i=100,minSize:o=0}=r;if(Xj(n,o)<0)if(a){n=Xj(n,(s+o)/2)<0?s:o}else n=o;return n=Math.min(i,n),n=parseFloat(n.toFixed(10))}function $j({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:a}){if(Jj(e,0))return t;const i=[...t],[o,l]=r;Gj(null!=o,"Invalid first pivot index"),Gj(null!=l,"Invalid second pivot index");let c=0;if("keyboard"===a){{const r=e<0?l:o,s=n[r];Gj(s,"Panel constraints not found for index ".concat(r));const{collapsedSize:a=0,collapsible:i,minSize:c=0}=s;if(i){const n=t[r];if(Gj(null!=n,"Previous layout not found for panel index ".concat(r)),Jj(n,a)){const t=c-n;Xj(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{const r=e<0?o:l,s=n[r];Gj(s,"No panel constraints found for index ".concat(r));const{collapsedSize:a=0,collapsible:i,minSize:c=0}=s;if(i){const n=t[r];if(Gj(null!=n,"Previous layout not found for panel index ".concat(r)),Jj(n,c)){const t=n-a;Xj(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{const r=e<0?1:-1;let s=e<0?l:o,a=0;for(;;){const e=t[s];Gj(null!=e,"Previous layout not found for panel index ".concat(s));if(a+=Zj({panelConstraints:n,panelIndex:s,size:100})-e,s+=r,s<0||s>=n.length)break}const i=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-i:i}{let r=e<0?o:l;for(;r>=0&&r<n.length;){const s=Math.abs(e)-Math.abs(c),a=t[r];Gj(null!=a,"Previous layout not found for panel index ".concat(r));const o=Zj({panelConstraints:n,panelIndex:r,size:a-s});if(!Jj(a,o)&&(c+=a-o,i[r]=o,c.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Jj(e[r],t[r],n))return!1;return!0}(s,i))return s;{const r=e<0?l:o,s=t[r];Gj(null!=s,"Previous layout not found for panel index ".concat(r));const a=s+c,d=Zj({panelConstraints:n,panelIndex:r,size:a});if(i[r]=d,!Jj(d,a)){let t=a-d;let r=e<0?l:o;for(;r>=0&&r<n.length;){const s=i[r];Gj(null!=s,"Previous layout not found for panel index ".concat(r));const a=Zj({panelConstraints:n,panelIndex:r,size:s+t});if(Jj(s,a)||(t-=a-s,i[r]=a),Jj(t,0))break;e>0?r--:r++}}}return Jj(i.reduce((e,t)=>t+e,0),100)?i:s}function ew({layout:e,panelsArray:t,pivotIndices:n}){let r=0,s=100,a=0,i=0;const o=n[0];Gj(null!=o,"No pivot index found"),t.forEach((e,t)=>{const{constraints:n}=e,{maxSize:l=100,minSize:c=0}=n;t===o?(r=c,s=l):(a+=c,i+=l)});return{valueMax:Math.min(s,100-a),valueMin:Math.max(r,100-i),valueNow:e[o]}}function tw(e,t=document){return Array.from(t.querySelectorAll('[data-panel-resize-handle-id][data-panel-group-id="'.concat(e,'"]')))}function nw(e,t,n=document){const r=tw(e,n).findIndex(e=>e.getAttribute("data-panel-resize-handle-id")===t);return null!=r?r:null}function rw(e,t,n){const r=nw(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function sw(e,t=document){var n;if(t instanceof HTMLElement&&(null==t||null===(n=t.dataset)||void 0===n?void 0:n.panelGroupId)==e)return t;const r=t.querySelector('[data-panel-group][data-panel-group-id="'.concat(e,'"]'));return r||null}function aw(e,t=document){const n=t.querySelector('[data-panel-resize-handle-id="'.concat(e,'"]'));return n||null}function iw({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:s,panelGroupElement:a,setLayout:i}){aj({didWarnAboutMissingResizeHandle:!1}),dj(()=>{if(!a)return;const e=tw(n,a);for(let t=0;t<s.length-1;t++){const{valueMax:n,valueMin:a,valueNow:i}=ew({layout:r,panelsArray:s,pivotIndices:[t,t+1]}),o=e[t];if(null==o);else{const e=s[t];Gj(e,'No panel data found for index "'.concat(t,'"')),o.setAttribute("aria-controls",e.id),o.setAttribute("aria-valuemax",""+Math.round(n)),o.setAttribute("aria-valuemin",""+Math.round(a)),o.setAttribute("aria-valuenow",null!=i?""+Math.round(i):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[n,r,s,a]),tj(()=>{if(!a)return;const e=t.current;Gj(e,"Eager values not found");const{panelDataArray:s}=e;Gj(null!=sw(n,a),'No group found for id "'.concat(n,'"'));const o=tw(n,a);Gj(o,'No resize handles found for group id "'.concat(n,'"'));const l=o.map(e=>{const t=e.getAttribute("data-panel-resize-handle-id");Gj(t,"Resize handle element has no handle id attribute");const[o,l]=function(e,t,n,r=document){var s,a,i,o;const l=aw(t,r),c=tw(e,r),d=l?c.indexOf(l):-1;return[null!==(s=null===(a=n[d])||void 0===a?void 0:a.id)&&void 0!==s?s:null,null!==(i=null===(o=n[d+1])||void 0===o?void 0:o.id)&&void 0!==i?i:null]}(n,t,s,a);if(null==o||null==l)return()=>{};const c=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const l=s.findIndex(e=>e.id===o);if(l>=0){const e=s[l];Gj(e,"No panel data found for index ".concat(l));const o=r[l],{collapsedSize:c=0,collapsible:d,minSize:u=0}=e.constraints;if(null!=o&&d){const e=$j({delta:Jj(o,c)?u-c:c-o,initialLayout:r,panelConstraints:s.map(e=>e.constraints),pivotIndices:rw(n,t,a),prevLayout:r,trigger:"keyboard"});r!==e&&i(e)}}break}}};return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}});return()=>{l.forEach(e=>e())}},[a,e,t,n,r,s,i])}function ow(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lw(e,t){const n="horizontal"===e,{x:r,y:s}=wj(t);return n?r:s}function cw(e,t,n,r,s,a){if(vj(e)){const t="horizontal"===n;let r=0;r=e.shiftKey?100:null!=s?s:10;let a=0;switch(e.key){case"ArrowDown":a=t?0:r;break;case"ArrowLeft":a=t?-r:0;break;case"ArrowRight":a=t?r:0;break;case"ArrowUp":a=t?0:-r;break;case"End":a=100;break;case"Home":a=-100}return a}return null==r?0:function(e,t,n,r,s){const a="horizontal"===n,i=aw(t,s);Gj(i,'No resize handle element found for id "'.concat(t,'"'));const o=i.getAttribute("data-panel-group-id");Gj(o,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=lw(n,e),d=sw(o,s);Gj(d,'No group element found for id "'.concat(o,'"'));const u=d.getBoundingClientRect();return(c-l)/(a?u.width:u.height)*100}(e,t,n,r,a)}function dw(e,t,n){t.forEach((t,r)=>{const s=e[r];Gj(s,"Panel data not found for index ".concat(r));const{callbacks:a,constraints:i,id:o}=s,{collapsedSize:l=0,collapsible:c}=i,d=n[o];if(null==d||t!==d){n[o]=t;const{onCollapse:e,onExpand:r,onResize:s}=a;s&&s(t,d),c&&(e||r)&&(!r||null!=d&&!Qj(d,l)||Qj(t,l)||r(),!e||null!=d&&Qj(d,l)||!Qj(t,l)||e())}})}function uw(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function hw(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)}}catch(t){e.getItem=()=>null,e.setItem=()=>{}}}function mw(e){return"react-resizable-panels:".concat(e)}function pw(e){return e.map(e=>{const{constraints:t,id:n,idIsFromProps:r,order:s}=e;return r?n:s?"".concat(s,":").concat(JSON.stringify(t)):JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function fw(e,t){try{const n=mw(e),r=t.getItem(n);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(n){}return null}function gw(e,t,n,r,s){var a;const i=mw(e),o=pw(t),l=null!==(a=fw(e,s))&&void 0!==a?a:{};l[o]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(i,JSON.stringify(l))}catch(c){}}function xw({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((e,t)=>e+t,0);if(n.length!==t.length)throw Error("Invalid ".concat(t.length," panel layout: ").concat(n.map(e=>"".concat(e,"%")).join(", ")));if(!Jj(r,100)&&n.length>0)for(let a=0;a<t.length;a++){const e=n[a];Gj(null!=e,"No layout data found for index ".concat(a));const t=100/r*e;n[a]=t}let s=0;for(let a=0;a<t.length;a++){const e=n[a];Gj(null!=e,"No layout data found for index ".concat(a));const r=Zj({panelConstraints:t,panelIndex:a,size:e});e!=r&&(s+=e-r,n[a]=r)}if(!Jj(s,0))for(let a=0;a<t.length;a++){const e=n[a];Gj(null!=e,"No layout data found for index ".concat(a));const r=Zj({panelConstraints:t,panelIndex:a,size:e+s});if(e!==r&&(s-=r-e,n[a]=r,Jj(s,0)))break}return n}const yw={getItem:e=>(hw(yw),yw.getItem(e)),setItem:(e,t)=>{hw(yw),yw.setItem(e,t)}},vw={};function bw(e){var t=e,{autoSaveId:n=null,children:r,className:s="",direction:a,forwardedRef:i,id:o=null,onLayout:l=null,keyboardResizeBy:c=null,storage:d=yw,style:u,tagName:h="div"}=t,m=J(t,["autoSaveId","children","className","direction","forwardedRef","id","onLayout","keyboardResizeBy","storage","style","tagName"]);const p=mj(o),f=aj(null),[g,x]=ij(null),[y,v]=ij([]),b=function(){const[e,t]=ij(0);return $b(()=>t(e=>e+1),[])}(),j=aj({}),w=aj(new Map),N=aj(0),k=aj({autoSaveId:n,direction:a,dragState:g,id:p,keyboardResizeBy:c,onLayout:l,storage:d}),S=aj({layout:y,panelDataArray:[],panelDataArrayChanged:!1});aj({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),nj(i,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:e}=S.current;return e},setLayout:e=>{const{onLayout:t}=k.current,{layout:n,panelDataArray:r}=S.current,s=xw({layout:e,panelConstraints:r.map(e=>e.constraints)});ow(n,s)||(v(s),S.current.layout=s,t&&t(s),dw(r,s,j.current))}}),[]),dj(()=>{k.current.autoSaveId=n,k.current.direction=a,k.current.dragState=g,k.current.id=p,k.current.onLayout=l,k.current.storage=d}),iw({committedValuesRef:k,eagerValuesRef:S,groupId:p,layout:y,panelDataArray:S.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),tj(()=>{const{panelDataArray:e}=S.current;if(n){if(0===y.length||y.length!==e.length)return;let t=vw[n];null==t&&(t=function(e,t=10){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}(gw,100),vw[n]=t);const r=[...e],s=new Map(w.current);t(n,r,s,y,d)}},[n,y,d]),tj(()=>{});const C=$b(e=>{const{onLayout:t}=k.current,{layout:n,panelDataArray:r}=S.current;if(e.constraints.collapsible){const s=r.map(e=>e.constraints),{collapsedSize:a=0,panelSize:i,pivotIndices:o}=Nw(r,e,n);if(Gj(null!=i,'Panel size not found for panel "'.concat(e.id,'"')),!Qj(i,a)){w.current.set(e.id,i);const l=$j({delta:ww(r,e)===r.length-1?i-a:a-i,initialLayout:n,panelConstraints:s,pivotIndices:o,prevLayout:n,trigger:"imperative-api"});uw(n,l)||(v(l),S.current.layout=l,t&&t(l),dw(r,l,j.current))}}},[]),P=$b((e,t)=>{const{onLayout:n}=k.current,{layout:r,panelDataArray:s}=S.current;if(e.constraints.collapsible){const a=s.map(e=>e.constraints),{collapsedSize:i=0,panelSize:o=0,minSize:l=0,pivotIndices:c}=Nw(s,e,r),d=null!=t?t:l;if(Qj(o,i)){const t=w.current.get(e.id),i=null!=t&&t>=d?t:d,l=$j({delta:ww(s,e)===s.length-1?o-i:i-o,initialLayout:r,panelConstraints:a,pivotIndices:c,prevLayout:r,trigger:"imperative-api"});uw(r,l)||(v(l),S.current.layout=l,n&&n(l),dw(s,l,j.current))}}},[]),_=$b(e=>{const{layout:t,panelDataArray:n}=S.current,{panelSize:r}=Nw(n,e,t);return Gj(null!=r,'Panel size not found for panel "'.concat(e.id,'"')),r},[]),E=$b((e,t)=>{const{panelDataArray:n}=S.current,r=ww(n,e);return function({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:s,precision:a=3}){const i=n[s];let o;return o=null==i?null!=e?e.toPrecision(a):"1":1===r.length?"1":i.toPrecision(a),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:g,layout:y,panelData:n,panelIndex:r})},[g,y]),T=$b(e=>{const{layout:t,panelDataArray:n}=S.current,{collapsedSize:r=0,collapsible:s,panelSize:a}=Nw(n,e,t);return Gj(null!=a,'Panel size not found for panel "'.concat(e.id,'"')),!0===s&&Qj(a,r)},[]),D=$b(e=>{const{layout:t,panelDataArray:n}=S.current,{collapsedSize:r=0,collapsible:s,panelSize:a}=Nw(n,e,t);return Gj(null!=a,'Panel size not found for panel "'.concat(e.id,'"')),!s||Xj(a,r)>0},[]),M=$b(e=>{const{panelDataArray:t}=S.current;t.push(e),t.sort((e,t)=>{const n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r}),S.current.panelDataArrayChanged=!0,b()},[b]);dj(()=>{if(S.current.panelDataArrayChanged){S.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:t,storage:n}=k.current,{layout:r,panelDataArray:s}=S.current;let a=null;if(e){const t=function(e,t,n){var r,s;return null!==(s=(null!==(r=fw(e,n))&&void 0!==r?r:{})[pw(t)])&&void 0!==s?s:null}(e,s,n);t&&(w.current=new Map(Object.entries(t.expandToSizes)),a=t.layout)}null==a&&(a=function({panelDataArray:e}){const t=Array(e.length),n=e.map(e=>e.constraints);let r=0,s=100;for(let a=0;a<e.length;a++){const e=n[a];Gj(e,"Panel constraints not found for index ".concat(a));const{defaultSize:i}=e;null!=i&&(r++,t[a]=i,s-=i)}for(let a=0;a<e.length;a++){const i=n[a];Gj(i,"Panel constraints not found for index ".concat(a));const{defaultSize:o}=i;if(null!=o)continue;const l=s/(e.length-r);r++,t[a]=l,s-=l}return t}({panelDataArray:s}));const i=xw({layout:a,panelConstraints:s.map(e=>e.constraints)});ow(r,i)||(v(i),S.current.layout=i,t&&t(i),dw(s,i,j.current))}}),dj(()=>{const e=S.current;return()=>{e.layout=[]}},[]);const A=$b(e=>function(t){t.preventDefault();const n=f.current;if(!n)return()=>null;const{direction:r,dragState:s,id:a,keyboardResizeBy:i,onLayout:o}=k.current,{layout:l,panelDataArray:c}=S.current,{initialLayout:d}=null!=s?s:{},u=rw(a,e,n);let h=cw(t,e,r,s,i,n);const m="horizontal"===r;"rtl"===document.dir&&m&&(h=-h);const p=$j({delta:h,initialLayout:null!=d?d:l,panelConstraints:c.map(e=>e.constraints),pivotIndices:u,prevLayout:l,trigger:vj(t)?"keyboard":"mouse-or-touch"}),g=!uw(l,p);(bj(t)||jj(t))&&N.current!=h&&(N.current=h,Wj(e,g||0===h?0:m?h<0?Tj:Dj:h<0?Mj:Aj)),g&&(v(p),S.current.layout=p,o&&o(p),dw(c,p,j.current))},[]),R=$b((e,t)=>{const{onLayout:n}=k.current,{layout:r,panelDataArray:s}=S.current,a=s.map(e=>e.constraints),{panelSize:i,pivotIndices:o}=Nw(s,e,r);Gj(null!=i,'Panel size not found for panel "'.concat(e.id,'"'));const l=$j({delta:ww(s,e)===s.length-1?i-t:t-i,initialLayout:r,panelConstraints:a,pivotIndices:o,prevLayout:r,trigger:"imperative-api"});uw(r,l)||(v(l),S.current.layout=l,n&&n(l),dw(s,l,j.current))},[]),I=$b((e,t)=>{const{layout:n,panelDataArray:r}=S.current,{collapsedSize:s=0,collapsible:a}=t,{collapsedSize:i=0,collapsible:o,maxSize:l=100,minSize:c=0}=e.constraints,{panelSize:d}=Nw(r,e,n);null!=d&&(a&&o&&Qj(d,s)?Qj(s,i)||R(e,i):d<c?R(e,c):d>l&&R(e,l))},[R]),F=$b((e,t)=>{const{direction:n}=k.current,{layout:r}=S.current;if(!f.current)return;const s=aw(e,f.current);Gj(s,'Drag handle element not found for id "'.concat(e,'"'));const a=lw(n,t);x({dragHandleId:e,dragHandleRect:s.getBoundingClientRect(),initialCursorPosition:a,initialLayout:r})},[]),L=$b(()=>{x(null)},[]),O=$b(e=>{const{panelDataArray:t}=S.current,n=ww(t,e);n>=0&&(t.splice(n,1),delete j.current[e.id],S.current.panelDataArrayChanged=!0,b())},[b]),z=sj(()=>({collapsePanel:C,direction:a,dragState:g,expandPanel:P,getPanelSize:_,getPanelStyle:E,groupId:p,isPanelCollapsed:T,isPanelExpanded:D,reevaluatePanelConstraints:I,registerPanel:M,registerResizeHandle:A,resizePanel:R,startDragging:F,stopDragging:L,unregisterPanel:O,panelGroupElement:f.current}),[C,g,a,P,_,E,p,T,D,I,M,A,R,F,L,O]),B={display:"flex",flexDirection:"horizontal"===a?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Xb(cj.Provider,{value:z},Xb(h,Q(X({},m),{children:r,className:s,id:o,ref:f,style:X(X({},B),u),"data-panel-group":"","data-panel-group-direction":a,"data-panel-group-id":p})))}const jw=Zb((e,t)=>Xb(bw,Q(X({},e),{forwardedRef:t})));function ww(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function Nw(e,t,n){const r=ww(e,t),s=r===e.length-1?[r-1,r]:[r,r+1],a=n[r];return Q(X({},t.constraints),{panelSize:a,pivotIndices:s})}function kw(e){var t,n,r=e,{children:s=null,className:a="",disabled:i=!1,hitAreaMargins:o,id:l,onBlur:c,onDragging:d,onFocus:u,style:h={},tabIndex:m=0,tagName:p="div"}=r,f=J(r,["children","className","disabled","hitAreaMargins","id","onBlur","onDragging","onFocus","style","tabIndex","tagName"]);const g=aj(null),x=aj({onDragging:d});tj(()=>{x.current.onDragging=d});const y=ej(cj);if(null===y)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:v,groupId:b,registerResizeHandle:j,startDragging:w,stopDragging:N,panelGroupElement:k}=y,S=mj(l),[C,P]=ij("inactive"),[_,E]=ij(!1),[T,D]=ij(null),M=aj({state:C});dj(()=>{M.current.state=C}),tj(()=>{if(i)D(null);else{const e=j(S);D(()=>e)}},[i,S,j]);const A=null!==(t=null==o?void 0:o.coarse)&&void 0!==t?t:15,R=null!==(n=null==o?void 0:o.fine)&&void 0!==n?n:5;tj(()=>{if(i||null==T)return;const e=g.current;Gj(e,"Element ref not attached");return function(e,t,n,r,s){var a;const{ownerDocument:i}=t,o={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:s},l=null!==(a=Lj.get(i))&&void 0!==a?a:0;return Lj.set(i,l+1),zj.add(o),Yj(),function(){var t;Oj.delete(e),zj.delete(o);const n=null!==(t=Lj.get(i))&&void 0!==t?t:1;if(Lj.set(i,n-1),Yj(),1===n&&Lj.delete(i),Ij.includes(o)){const e=Ij.indexOf(o);e>=0&&Ij.splice(e,1),Hj(),s("up",!0,null)}}}(S,e,v,{coarse:A,fine:R},(e,t,n)=>{if(t)switch(e){case"down":{P("drag"),Gj(n,'Expected event to be defined for "down" action'),w(S,n);const{onDragging:e}=x.current;e&&e(!0);break}case"move":{const{state:e}=M.current;"drag"!==e&&P("hover"),Gj(n,'Expected event to be defined for "move" action'),T(n);break}case"up":{P("hover"),N();const{onDragging:e}=x.current;e&&e(!1);break}}else P("inactive")})},[A,v,i,R,j,S,T,w,N]),function({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){tj(()=>{if(e||null==n||null==r)return;const s=aw(t,r);if(null==s)return;const a=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),n(e);break;case"F6":{e.preventDefault();const n=s.getAttribute("data-panel-group-id");Gj(n,'No group element found for id "'.concat(n,'"'));const a=tw(n,r),i=nw(n,t,r);Gj(null!==i,'No resize element found for id "'.concat(t,'"')),a[e.shiftKey?i>0?i-1:a.length-1:i+1<a.length?i+1:0].focus();break}}};return s.addEventListener("keydown",a),()=>{s.removeEventListener("keydown",a)}},[r,e,t,n])}({disabled:i,handleId:S,resizeHandler:T,panelGroupElement:k});return Xb(p,Q(X({},f),{children:s,className:a,id:l,onBlur:()=>{E(!1),null==c||c()},onFocus:()=>{E(!0),null==u||u()},ref:g,role:"separator",style:X(X({},{touchAction:"none",userSelect:"none"}),h),tabIndex:m,"data-panel-group-direction":v,"data-panel-group-id":b,"data-resize-handle":"","data-resize-handle-active":"drag"===C?"pointer":_?"keyboard":void 0,"data-resize-handle-state":C,"data-panel-resize-handle-enabled":!i,"data-panel-resize-handle-id":S}))}bw.displayName="PanelGroup",jw.displayName="forwardRef(PanelGroup)",kw.displayName="PanelResizeHandle";const Sw=e=>{var t=e,{className:n}=t,r=J(t,["className"]);return ie.jsx(jw,X({className:zn("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n)},r))},Cw=fj,Pw=e=>{var t=e,{withHandle:n,className:r}=t,s=J(t,["withHandle","className"]);return ie.jsx(kw,Q(X({className:zn("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",r)},s),{children:n&&ie.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:ie.jsx(mh,{className:"h-2.5 w-2.5"})})}))},_w=({user:e})=>{const[t,n]=st.useState({text:""}),[r,s]=st.useState([]),[a,i]=st.useState(!1),[o,l]=st.useState([]),[c,d]=st.useState([]),[u,h]=st.useState(!0),{toast:m}=im(),p=e=>ae(void 0,null,function*(){var t,r,a;if(e.text.trim()){i(!0),n(e),h(!1);try{const{data:{session:t},error:n}=yield Jh.auth.getSession();if(n)throw new Error("Authentication error");if(!t)return m({title:"Authentication Required",description:"Please sign in to use the search feature",variant:"destructive"}),void i(!1);l(t=>[e,...t.slice(0,9)]);let r=e.text;const a=[];e.part&&a.push("focusing on ".concat(e.part)),e.buildingType&&a.push("for ".concat(e.buildingType," buildings")),e.topic&&a.push("related to ".concat(e.topic)),a.length>0&&(r+=" (".concat(a.join(", "),")"));const{data:o,error:c}=yield Jh.functions.invoke("building-regulations-chat",{body:{message:r,projectContext:null}});if(c)throw c;if(!o||!o.response)throw new Error("No response received from search service");const d=o.response,u=o.images||[],h=f(d,e,u);s(h),m({title:"Search Complete",description:"Found ".concat(h.length," result").concat(1!==h.length?"s":""," ").concat(u.length>0?"with ".concat(u.length," image").concat(u.length>1?"s":""):"")})}catch(o){let e="Unable to perform search at this time.";(null==(t=o.message)?void 0:t.includes("fetch"))?e="Network error - please check your connection and try again.":(null==(r=o.message)?void 0:r.includes("auth"))?e="Authentication error - please sign in again.":(null==(a=o.message)?void 0:a.includes("function"))&&(e="Search service unavailable - please try again later."),m({title:"Search Error",description:e,variant:"destructive"}),s([{id:"error-1",title:"Search Error",content:e+" Please check your connection and try again, or contact support if the problem persists.",part:"System",section:"Error",relevanceScore:0}])}finally{i(!1)}}else m({title:"Search Error",description:"Please enter a search term",variant:"destructive"})}),f=(e,t,n=[])=>{const r=[],s=n.map((e,t)=>({url:e.url||e.image_url||e.src||"",title:e.title||e.alt||"Building Regulation Image ".concat(t+1),source:e.source||"UK Building Regulations"})).filter(e=>e.url),a=e.split(/(?:Part [A-P]|Section \d+|(?:\d+\.){1,2}\d+)/g),i=e.match(/Part [A-P]|Section \d+|(?:\d+\.){1,2}\d+/g)||[];if(a.length>1&&i.length>0&&a.forEach((e,n)=>{if(e.trim()&&n>0){const a=i[n-1],o=e.trim();o.length>50&&r.push({id:"result-".concat(n),title:"Building Regulations - ".concat(a),content:o.length>300?o.substring(0,300)+"...":o,part:a.includes("Part")?a:t.part||"Building Regulations",section:a.includes("Section")?a.replace("Section ",""):"1.0",relevanceScore:Math.max(.7,1-.1*n),images:1===n?s:[]})}}),0===r.length){const n=t.part?"Building Regulations - ".concat(t.part):"Building Regulations: ".concat(t.text);r.push({id:"result-1",title:n,content:e.length>400?e.substring(0,400)+"...":e,part:t.part||"Building Regulations",section:"1.0",relevanceScore:.95,images:s})}return r},g=e=>{d(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])};return ie.jsx("div",{className:"flex-1 bg-black text-white",children:ie.jsxs("div",{className:"h-full flex flex-col",children:[ie.jsx("div",{className:"border-b border-gray-800 p-4",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Advanced Search"}),ie.jsx("p",{className:"text-gray-400",children:"Search through UK Building Regulations with advanced filters and tools"})]}),!u&&r.length>0&&ie.jsxs(by,{variant:"outline",onClick:()=>{h(!0),s([]),n({text:""})},className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:[ie.jsx(Gu,{className:"w-4 h-4 mr-2"}),"Back to Filters"]})]})}),ie.jsx("div",{className:"flex-1 overflow-hidden",children:ie.jsxs(qb,{defaultValue:"search",className:"h-full flex flex-col",children:[ie.jsxs(Wb,{className:"bg-gray-900 border-b border-gray-800 rounded-none w-full justify-start px-4",children:[ie.jsx(Hb,{value:"search",className:"data-[state=active]:bg-gray-800",children:"Search"}),ie.jsx(Hb,{value:"tools",className:"data-[state=active]:bg-gray-800",children:"Quick Tools"}),ie.jsx(Hb,{value:"history",className:"data-[state=active]:bg-gray-800",children:"History & Favorites"})]}),ie.jsx(Yb,{value:"search",className:"flex-1 m-0",children:u?ie.jsxs(Sw,{direction:"horizontal",className:"h-full",children:[ie.jsx(Cw,{defaultSize:50,minSize:30,maxSize:70,children:ie.jsx("div",{className:"h-full border-r border-gray-800 bg-gray-900/50",children:ie.jsx(bb,{onSearch:p,isSearching:a})})}),ie.jsx(Pw,{withHandle:!0}),ie.jsx(Cw,{defaultSize:50,minSize:30,children:ie.jsx(kb,{results:r,isSearching:a,query:t,favorites:c,onToggleFavorite:g})})]}):ie.jsx(kb,{results:r,isSearching:a,query:t,favorites:c,onToggleFavorite:g})}),ie.jsx(Yb,{value:"tools",className:"flex-1 m-0",children:ie.jsx(Kb,{})}),ie.jsx(Yb,{value:"history",className:"flex-1 m-0",children:ie.jsx(Gb,{searchHistory:o,favorites:c,onSearch:p,onToggleFavorite:g})})]})})]})})},Ew=({onBack:e})=>{const[t,n]=st.useState({length:"",width:"",depth:""}),[r,s]=st.useState({length:"",width:"",depth:""}),[a,i]=st.useState({diameter:"",height:""}),o=(e,t,n)=>e*t*n,l=t.length&&t.width&&t.depth?o(parseFloat(t.length),parseFloat(t.width),parseFloat(t.depth)):0,c=r.length&&r.width&&r.depth?o(parseFloat(r.length),parseFloat(r.width),parseFloat(r.depth)):0,d=a.diameter&&a.height?((e,t)=>{const n=e/2;return Math.PI*n*n*t})(parseFloat(a.diameter),parseFloat(a.height)):0,u=(h=l,{cementBags:Math.ceil(7*h),sandTonnes:(.5*h).toFixed(2),aggregateTonnes:(1*h).toFixed(2)});var h;return ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center space-x-4",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back"]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500/20 to-purple-500/20 flex items-center justify-center border border-blue-500/20",children:ie.jsx(Wu,{className:"w-5 h-5 text-blue-400"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"Volumetric Calculator"}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Calculate volumes for building construction"})]})]})]}),ie.jsxs(qb,{defaultValue:"concrete",className:"w-full",children:[ie.jsxs(Wb,{className:"grid w-full grid-cols-3 bg-gray-800",children:[ie.jsx(Hb,{value:"concrete",className:"data-[state=active]:bg-gray-700",children:"Concrete"}),ie.jsx(Hb,{value:"excavation",className:"data-[state=active]:bg-gray-700",children:"Excavation"}),ie.jsx(Hb,{value:"cylindrical",className:"data-[state=active]:bg-gray-700",children:"Cylindrical"})]}),ie.jsx(Yb,{value:"concrete",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-blue-400"}),"Concrete Volume"]}),ie.jsx(Cy,{children:"Calculate concrete volume and material requirements"})]}),ie.jsx(Py,{className:"space-y-4",children:ie.jsxs("div",{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"concrete-length",className:"text-white",children:"Length (m)"}),ie.jsx(cy,{id:"concrete-length",type:"number",placeholder:"Enter length",value:t.length,onChange:e=>n(Q(X({},t),{length:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"concrete-width",className:"text-white",children:"Width (m)"}),ie.jsx(cy,{id:"concrete-width",type:"number",placeholder:"Enter width",value:t.width,onChange:e=>n(Q(X({},t),{width:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"concrete-depth",className:"text-white",children:"Depth/Thickness (m)"}),ie.jsx(cy,{id:"concrete-depth",type:"number",placeholder:"Enter depth",value:t.depth,onChange:e=>n(Q(X({},t),{depth:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]})})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Results"})}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsx("div",{className:"bg-blue-500/10 rounded-lg p-4 border border-blue-500/20",children:ie.jsxs("div",{className:"text-center",children:[ie.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[l.toFixed(2)," m³"]}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Total Volume"})]})}),ie.jsxs("div",{className:"space-y-3",children:[ie.jsx("h4",{className:"text-white font-medium",children:"Material Requirements:"}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Cement:"}),ie.jsxs("span",{className:"text-white font-medium",children:[u.cementBags," bags"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Sand:"}),ie.jsxs("span",{className:"text-white font-medium",children:[u.sandTonnes," tonnes"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Aggregate:"}),ie.jsxs("span",{className:"text-white font-medium",children:[u.aggregateTonnes," tonnes"]})]})]})]}),ie.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-3 border border-yellow-500/20 flex items-start space-x-2",children:[ie.jsx(xh,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),ie.jsx("div",{className:"text-xs text-yellow-300",children:"Based on 1:2:4 mix ratio. Add 10% extra for wastage."})]})]})]})]})}),ie.jsx(Yb,{value:"excavation",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-green-400"}),"Excavation Volume"]}),ie.jsx(Cy,{children:"Calculate earth removal and backfill requirements"})]}),ie.jsx(Py,{className:"space-y-4",children:ie.jsxs("div",{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"excavation-length",className:"text-white",children:"Length (m)"}),ie.jsx(cy,{id:"excavation-length",type:"number",placeholder:"Enter length",value:r.length,onChange:e=>s(Q(X({},r),{length:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"excavation-width",className:"text-white",children:"Width (m)"}),ie.jsx(cy,{id:"excavation-width",type:"number",placeholder:"Enter width",value:r.width,onChange:e=>s(Q(X({},r),{width:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"excavation-depth",className:"text-white",children:"Depth (m)"}),ie.jsx(cy,{id:"excavation-depth",type:"number",placeholder:"Enter depth",value:r.depth,onChange:e=>s(Q(X({},r),{depth:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]})})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Results"})}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsx("div",{className:"bg-green-500/10 rounded-lg p-4 border border-green-500/20",children:ie.jsxs("div",{className:"text-center",children:[ie.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[c.toFixed(2)," m³"]}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Earth to Remove"})]})}),ie.jsxs("div",{className:"space-y-3",children:[ie.jsx("h4",{className:"text-white font-medium",children:"Estimates:"}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Truck loads (7m³):"}),ie.jsxs("span",{className:"text-white font-medium",children:[Math.ceil(c/7)," loads"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Backfill required:"}),ie.jsxs("span",{className:"text-white font-medium",children:[(.8*c).toFixed(2)," m³"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Compacted volume:"}),ie.jsxs("span",{className:"text-white font-medium",children:[(.75*c).toFixed(2)," m³"]})]})]})]}),ie.jsxs("div",{className:"bg-blue-500/10 rounded-lg p-3 border border-blue-500/20 flex items-start space-x-2",children:[ie.jsx(xh,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),ie.jsx("div",{className:"text-xs text-blue-300",children:"Estimates based on typical soil conditions. Add safety margins."})]})]})]})]})}),ie.jsx(Yb,{value:"cylindrical",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-purple-400"}),"Cylindrical Volume"]}),ie.jsx(Cy,{children:"Calculate volume for columns, pipes, tanks"})]}),ie.jsx(Py,{className:"space-y-4",children:ie.jsxs("div",{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"cylindrical-diameter",className:"text-white",children:"Diameter (m)"}),ie.jsx(cy,{id:"cylindrical-diameter",type:"number",placeholder:"Enter diameter",value:a.diameter,onChange:e=>i(Q(X({},a),{diameter:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"cylindrical-height",className:"text-white",children:"Height (m)"}),ie.jsx(cy,{id:"cylindrical-height",type:"number",placeholder:"Enter height",value:a.height,onChange:e=>i(Q(X({},a),{height:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]})})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Results"})}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsx("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/20",children:ie.jsxs("div",{className:"text-center",children:[ie.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[d.toFixed(2)," m³"]}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Cylindrical Volume"})]})}),ie.jsxs("div",{className:"space-y-3",children:[ie.jsx("h4",{className:"text-white font-medium",children:"Additional Info:"}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Surface area:"}),ie.jsxs("span",{className:"text-white font-medium",children:[a.diameter&&a.height?(2*Math.PI*(parseFloat(a.diameter)/2)*parseFloat(a.height)).toFixed(2):"0.00"," m²"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Circumference:"}),ie.jsxs("span",{className:"text-white font-medium",children:[a.diameter?(Math.PI*parseFloat(a.diameter)).toFixed(2):"0.00"," m"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Base area:"}),ie.jsxs("span",{className:"text-white font-medium",children:[a.diameter?(Math.PI*Math.pow(parseFloat(a.diameter)/2,2)).toFixed(2):"0.00"," m²"]})]})]})]}),ie.jsxs("div",{className:"bg-green-500/10 rounded-lg p-3 border border-green-500/20 flex items-start space-x-2",children:[ie.jsx(xh,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),ie.jsx("div",{className:"text-xs text-green-300",children:"Perfect for columns, water tanks, and circular structures."})]})]})]})]})})]})]})})},Tw=({onBack:e})=>{const[t,n]=st.useState({length:"",width:"",boardWidth:"",boardLength:"",wastage:"10"}),[r,s]=st.useState({studSpacing:"400",wallHeight:"",wallLength:"",plateLength:"",studsRequired:""}),[a,i]=st.useState({roofLength:"",roofWidth:"",rafterSpacing:"450",overhang:"300"}),o=(()=>{if(!(t.length&&t.width&&t.boardWidth&&t.boardLength))return null;const e=parseFloat(t.length)*parseFloat(t.width),n=parseFloat(t.boardWidth)/1e3*parseFloat(t.boardLength),r=1+parseFloat(t.wastage)/100,s=Math.ceil(e/n*r),a=s*n;return{roomArea:e.toFixed(2),boardsNeeded:s,totalArea:a.toFixed(2)}})(),l=(()=>{if(!r.wallHeight||!r.wallLength||!r.studSpacing)return null;const e=parseFloat(r.wallLength),t=parseFloat(r.studSpacing)/1e3,n=Math.floor(e/t)+1,s=2*Math.ceil(e/3.6),a=Math.ceil(2*n);return{studsNeeded:n,platesNeeded:s,nogginsNeeded:a,totalLinearMeters:(n*parseFloat(r.wallHeight)+3.6*s+.6*a).toFixed(2)}})(),c=(()=>{if(!a.roofLength||!a.roofWidth||!a.rafterSpacing)return null;const e=parseFloat(a.roofLength),t=parseFloat(a.roofWidth),n=parseFloat(a.rafterSpacing)/1e3,r=t+2*(parseFloat(a.overhang)/1e3),s=Math.ceil(e/n)+1,i=e,o=(s*r+i).toFixed(2);return{raftersNeeded:s,rafterLength:r.toFixed(2),ridgeLength:i.toFixed(2),totalTimber:o}})();return ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center space-x-4",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back"]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500/20 to-amber-500/20 flex items-center justify-center border border-orange-500/20",children:ie.jsx(Mh,{className:"w-5 h-5 text-orange-400"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"Timber Calculator"}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Calculate timber requirements for construction"})]})]})]}),ie.jsxs(qb,{defaultValue:"flooring",className:"w-full",children:[ie.jsxs(Wb,{className:"grid w-full grid-cols-3 bg-gray-800",children:[ie.jsx(Hb,{value:"flooring",className:"data-[state=active]:bg-gray-700",children:"Flooring"}),ie.jsx(Hb,{value:"framing",className:"data-[state=active]:bg-gray-700",children:"Framing"}),ie.jsx(Hb,{value:"roofing",className:"data-[state=active]:bg-gray-700",children:"Roofing"})]}),ie.jsx(Yb,{value:"flooring",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Mh,{className:"w-5 h-5 mr-2 text-orange-400"}),"Flooring Calculator"]}),ie.jsx(Cy,{children:"Calculate timber flooring requirements"})]}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"floor-length",className:"text-white",children:"Room Length (m)"}),ie.jsx(cy,{id:"floor-length",type:"number",placeholder:"Length",value:t.length,onChange:e=>n(Q(X({},t),{length:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"floor-width",className:"text-white",children:"Room Width (m)"}),ie.jsx(cy,{id:"floor-width",type:"number",placeholder:"Width",value:t.width,onChange:e=>n(Q(X({},t),{width:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"board-width",className:"text-white",children:"Board Width (mm)"}),ie.jsx(cy,{id:"board-width",type:"number",placeholder:"e.g. 130",value:t.boardWidth,onChange:e=>n(Q(X({},t),{boardWidth:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"board-length",className:"text-white",children:"Board Length (m)"}),ie.jsx(cy,{id:"board-length",type:"number",placeholder:"e.g. 3.6",value:t.boardLength,onChange:e=>n(Q(X({},t),{boardLength:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"wastage",className:"text-white",children:"Wastage (%)"}),ie.jsx(cy,{id:"wastage",type:"number",value:t.wastage,onChange:e=>n(Q(X({},t),{wastage:e.target.value})),className:"bg-gray-800 border-gray-700 text-white"})]})]})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Flooring Results"})}),ie.jsxs(Py,{className:"space-y-4",children:[o?ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"bg-orange-500/10 rounded-lg p-4 border border-orange-500/20",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-2xl font-bold text-orange-400",children:o.boardsNeeded}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Boards Needed"})]})}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Room Area:"}),ie.jsxs("span",{className:"text-white font-medium",children:[o.roomArea," m²"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Total Timber:"}),ie.jsxs("span",{className:"text-white font-medium",children:[o.totalArea," m²"]})]})]})]}):ie.jsx("div",{className:"text-center text-gray-400 py-8",children:"Enter measurements to see results"}),ie.jsxs("div",{className:"bg-blue-500/10 rounded-lg p-3 border border-blue-500/20 flex items-start space-x-2",children:[ie.jsx(xh,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),ie.jsx("div",{className:"text-xs text-blue-300",children:"Standard wastage is 10-15% for flooring projects."})]})]})]})]})}),ie.jsx(Yb,{value:"framing",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Mh,{className:"w-5 h-5 mr-2 text-green-400"}),"Wall Framing Calculator"]}),ie.jsx(Cy,{children:"Calculate wall framing timber requirements"})]}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"wall-height",className:"text-white",children:"Wall Height (m)"}),ie.jsx(cy,{id:"wall-height",type:"number",placeholder:"e.g. 2.4",value:r.wallHeight,onChange:e=>s(Q(X({},r),{wallHeight:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"wall-length",className:"text-white",children:"Wall Length (m)"}),ie.jsx(cy,{id:"wall-length",type:"number",placeholder:"e.g. 6.0",value:r.wallLength,onChange:e=>s(Q(X({},r),{wallLength:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"stud-spacing",className:"text-white",children:"Stud Spacing (mm)"}),ie.jsxs(mb,{value:r.studSpacing,onValueChange:e=>s(Q(X({},r),{studSpacing:e})),children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"400",children:"400mm (Standard)"}),ie.jsx(vb,{value:"450",children:"450mm"}),ie.jsx(vb,{value:"600",children:"600mm"})]})]})]})]})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Framing Results"})}),ie.jsxs(Py,{className:"space-y-4",children:[l?ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"bg-green-500/10 rounded-lg p-4 border border-green-500/20",children:ie.jsxs("div",{className:"text-center",children:[ie.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[l.totalLinearMeters,"m"]}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Total Linear Meters"})]})}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Studs:"}),ie.jsxs("span",{className:"text-white font-medium",children:[l.studsNeeded," pieces"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Plates:"}),ie.jsxs("span",{className:"text-white font-medium",children:[l.platesNeeded," pieces"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Noggins:"}),ie.jsxs("span",{className:"text-white font-medium",children:[l.nogginsNeeded," pieces"]})]})]})]}):ie.jsx("div",{className:"text-center text-gray-400 py-8",children:"Enter measurements to see results"}),ie.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-3 border border-yellow-500/20 flex items-start space-x-2",children:[ie.jsx(xh,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),ie.jsx("div",{className:"text-xs text-yellow-300",children:"Includes top & bottom plates plus noggins for bracing."})]})]})]})]})}),ie.jsx(Yb,{value:"roofing",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Mh,{className:"w-5 h-5 mr-2 text-purple-400"}),"Roof Framing Calculator"]}),ie.jsx(Cy,{children:"Calculate roof timber requirements"})]}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"roof-length",className:"text-white",children:"Roof Length (m)"}),ie.jsx(cy,{id:"roof-length",type:"number",placeholder:"e.g. 10.0",value:a.roofLength,onChange:e=>i(Q(X({},a),{roofLength:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"roof-width",className:"text-white",children:"Roof Width (m)"}),ie.jsx(cy,{id:"roof-width",type:"number",placeholder:"e.g. 8.0",value:a.roofWidth,onChange:e=>i(Q(X({},a),{roofWidth:e.target.value})),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"rafter-spacing",className:"text-white",children:"Rafter Spacing (mm)"}),ie.jsxs(mb,{value:a.rafterSpacing,onValueChange:e=>i(Q(X({},a),{rafterSpacing:e})),children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"400",children:"400mm"}),ie.jsx(vb,{value:"450",children:"450mm (Standard)"}),ie.jsx(vb,{value:"600",children:"600mm"})]})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"overhang",className:"text-white",children:"Overhang (mm)"}),ie.jsx(cy,{id:"overhang",type:"number",value:a.overhang,onChange:e=>i(Q(X({},a),{overhang:e.target.value})),className:"bg-gray-800 border-gray-700 text-white"})]})]})]})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Roofing Results"})}),ie.jsxs(Py,{className:"space-y-4",children:[c?ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/20",children:ie.jsxs("div",{className:"text-center",children:[ie.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[c.totalTimber,"m"]}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Total Linear Meters"})]})}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Rafters:"}),ie.jsxs("span",{className:"text-white font-medium",children:[c.raftersNeeded," @ ",c.rafterLength,"m"]})]}),ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("span",{className:"text-gray-400",children:"Ridge beam:"}),ie.jsxs("span",{className:"text-white font-medium",children:[c.ridgeLength,"m"]})]})]})]}):ie.jsx("div",{className:"text-center text-gray-400 py-8",children:"Enter measurements to see results"}),ie.jsxs("div",{className:"bg-green-500/10 rounded-lg p-3 border border-green-500/20 flex items-start space-x-2",children:[ie.jsx(xh,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),ie.jsx("div",{className:"text-xs text-green-300",children:"Basic gable roof calculation. Add 10% wastage for cutting."})]})]})]})]})})]})]})})},Dw=({onBack:e})=>{const[t,n]=st.useState(""),[r,s]=st.useState("length"),a={millimeters:parseFloat(t)||0,centimeters:(parseFloat(t)||0)/10,meters:(parseFloat(t)||0)/1e3,inches:(parseFloat(t)||0)/25.4,feet:(parseFloat(t)||0)/304.8},i={square_meters:parseFloat(t)||0,square_feet:10.764*(parseFloat(t)||0),square_yards:1.196*(parseFloat(t)||0)},o={kilograms:parseFloat(t)||0,tonnes:(parseFloat(t)||0)/1e3,pounds:2.205*(parseFloat(t)||0),tons_imperial:(parseFloat(t)||0)/1016},l={timber:[{size:"70 x 35mm",use:"Battens, small framing"},{size:"90 x 35mm",use:"Wall frames, noggins"},{size:"90 x 45mm",use:"Wall plates, lintels"},{size:"140 x 45mm",use:"Floor joists, rafters"},{size:"190 x 45mm",use:"Beams, large joists"},{size:"240 x 45mm",use:"Large beams, posts"}],steel:[{size:"75 x 75 x 6mm",use:"Light angle brackets"},{size:"100 x 100 x 8mm",use:"Standard angles"},{size:"150 x 90 x 12mm",use:"Heavy duty angles"},{size:"200UB",use:"Universal beams"},{size:"310UB",use:"Heavy universal beams"}]};return ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center space-x-4",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back"]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500/20 to-cyan-500/20 flex items-center justify-center border border-blue-500/20",children:ie.jsx(Uu,{className:"w-5 h-5 text-blue-400"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"Ready Reckoner"}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Quick reference for construction calculations"})]})]})]}),ie.jsxs(qb,{defaultValue:"conversions",className:"w-full",children:[ie.jsxs(Wb,{className:"grid w-full grid-cols-4 bg-gray-800",children:[ie.jsx(Hb,{value:"conversions",className:"data-[state=active]:bg-gray-700",children:"Conversions"}),ie.jsx(Hb,{value:"materials",className:"data-[state=active]:bg-gray-700",children:"Materials"}),ie.jsx(Hb,{value:"sizes",className:"data-[state=active]:bg-gray-700",children:"Sizes"}),ie.jsx(Hb,{value:"formulas",className:"data-[state=active]:bg-gray-700",children:"Formulas"})]}),ie.jsx(Yb,{value:"conversions",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-blue-400"}),"Unit Converter"]}),ie.jsx(Cy,{children:"Convert between different units"})]}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"convert-value",className:"text-white",children:"Enter value to convert"}),ie.jsx(cy,{id:"convert-value",type:"number",placeholder:"Enter value",value:t,onChange:e=>n(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[ie.jsx(by,{variant:"length"===r?"default":"outline",onClick:()=>s("length"),className:"text-xs",children:"Length"}),ie.jsx(by,{variant:"area"===r?"default":"outline",onClick:()=>s("area"),className:"text-xs",children:"Area"}),ie.jsx(by,{variant:"weight"===r?"default":"outline",onClick:()=>s("weight"),className:"text-xs",children:"Weight"})]})]})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:"Conversion Results"})}),ie.jsxs(Py,{className:"space-y-3",children:["length"===r&&ie.jsx("div",{className:"space-y-2",children:Object.entries(a).map(([e,t])=>ie.jsxs("div",{className:"flex justify-between",children:[ie.jsxs("span",{className:"text-gray-400 capitalize",children:[e.replace("_"," "),":"]}),ie.jsx("span",{className:"text-white font-medium",children:t.toFixed(2)})]},e))}),"area"===r&&ie.jsx("div",{className:"space-y-2",children:Object.entries(i).map(([e,t])=>ie.jsxs("div",{className:"flex justify-between",children:[ie.jsxs("span",{className:"text-gray-400 capitalize",children:[e.replace("_"," "),":"]}),ie.jsx("span",{className:"text-white font-medium",children:t.toFixed(2)})]},e))}),"weight"===r&&ie.jsx("div",{className:"space-y-2",children:Object.entries(o).map(([e,t])=>ie.jsxs("div",{className:"flex justify-between",children:[ie.jsxs("span",{className:"text-gray-400 capitalize",children:[e.replace("_"," "),":"]}),ie.jsx("span",{className:"text-white font-medium",children:t.toFixed(2)})]},e))})]})]})]})}),ie.jsx(Yb,{value:"materials",children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Gh,{className:"w-5 h-5 mr-2 text-green-400"}),"Material Densities"]}),ie.jsx(Cy,{children:"Common building material weights and densities"})]}),ie.jsx(Py,{children:ie.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[{material:"Concrete",density:"2400 kg/m³",weight:"2.4 tonnes/m³"},{material:"Steel",density:"7850 kg/m³",weight:"7.85 tonnes/m³"},{material:"Timber (Pine)",density:"500 kg/m³",weight:"0.5 tonnes/m³"},{material:"Brick",density:"1920 kg/m³",weight:"1.92 tonnes/m³"},{material:"Sand (dry)",density:"1600 kg/m³",weight:"1.6 tonnes/m³"},{material:"Gravel",density:"1680 kg/m³",weight:"1.68 tonnes/m³"},{material:"Topsoil",density:"1200 kg/m³",weight:"1.2 tonnes/m³"},{material:"Water",density:"1000 kg/m³",weight:"1.0 tonne/m³"}].map((e,t)=>ie.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 border border-gray-600",children:[ie.jsx("h4",{className:"text-white font-medium mb-2",children:e.material}),ie.jsxs("div",{className:"space-y-1",children:[ie.jsxs("div",{className:"text-sm text-gray-400",children:["Density: ",ie.jsx("span",{className:"text-white",children:e.density})]}),ie.jsxs("div",{className:"text-sm text-gray-400",children:["Weight: ",ie.jsx("span",{className:"text-white",children:e.weight})]})]})]},t))})})]})}),ie.jsx(Yb,{value:"sizes",children:ie.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Mh,{className:"w-5 h-5 mr-2 text-orange-400"}),"Timber Sizes"]}),ie.jsx(Cy,{children:"Standard timber dimensions and uses"})]}),ie.jsx(Py,{children:ie.jsx("div",{className:"space-y-3",children:l.timber.map((e,t)=>ie.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-700 last:border-b-0",children:[ie.jsx("div",{children:ie.jsx("span",{className:"text-white font-medium",children:e.size})}),ie.jsx("div",{className:"text-sm text-gray-400",children:e.use})]},t))})})]}),ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Gh,{className:"w-5 h-5 mr-2 text-gray-400"}),"Steel Sizes"]}),ie.jsx(Cy,{children:"Common steel section sizes"})]}),ie.jsx(Py,{children:ie.jsx("div",{className:"space-y-3",children:l.steel.map((e,t)=>ie.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-700 last:border-b-0",children:[ie.jsx("div",{children:ie.jsx("span",{className:"text-white font-medium",children:e.size})}),ie.jsx("div",{className:"text-sm text-gray-400",children:e.use})]},t))})})]})]})}),ie.jsx(Yb,{value:"formulas",children:ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-purple-400"}),"Quick Calculation Formulas"]}),ie.jsx(Cy,{children:"Handy formulas for common construction calculations"})]}),ie.jsx(Py,{children:ie.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[{title:"Concrete Volume to Bags",formula:"Volume (m³) × 7 = Cement bags needed",example:"1m³ concrete = 7 bags cement"},{title:"Brick Wall Quantity",formula:"Wall area (m²) × 50 = Standard bricks needed",example:"10m² wall = 500 bricks"},{title:"Paint Coverage",formula:"Surface area (m²) ÷ 10 = Litres needed (1 coat)",example:"100m² = 10 litres paint"},{title:"Excavation to Trucks",formula:"Volume (m³) ÷ 7 = Truck loads (7m³ trucks)",example:"35m³ = 5 truck loads"}].map((e,t)=>ie.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 border border-gray-600",children:[ie.jsx("h4",{className:"text-white font-medium mb-2",children:e.title}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("div",{className:"text-sm text-purple-300 font-mono bg-purple-500/10 rounded p-2",children:e.formula}),ie.jsxs("div",{className:"text-sm text-gray-400",children:["Example: ",e.example]})]})]},t))})})]})})]})]})})},Mw=({onBack:e})=>{const[t,n]=st.useState("");return ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center space-x-4",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back"]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500/20 to-yellow-500/20 flex items-center justify-center border border-orange-500/20",children:ie.jsx(zu,{className:"w-5 h-5 text-orange-400"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"UK Timber Guide"}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Complete reference for timber construction in the UK"})]})]})]}),ie.jsxs("div",{className:"relative",children:[ie.jsx(Rh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),ie.jsx(cy,{placeholder:"Search timber species, grades, or regulations...",value:t,onChange:e=>n(e.target.value),className:"pl-10 bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs(qb,{defaultValue:"species",className:"w-full",children:[ie.jsxs(Wb,{className:"grid w-full grid-cols-4 bg-gray-800",children:[ie.jsx(Hb,{value:"species",className:"data-[state=active]:bg-gray-700",children:"Species"}),ie.jsx(Hb,{value:"grades",className:"data-[state=active]:bg-gray-700",children:"Grades"}),ie.jsx(Hb,{value:"regulations",className:"data-[state=active]:bg-gray-700",children:"Regulations"}),ie.jsx(Hb,{value:"sizes",className:"data-[state=active]:bg-gray-700",children:"Sizes"})]}),ie.jsx(Yb,{value:"species",children:ie.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[{name:"European Redwood",species:"Pinus sylvestris",grade:"C16, C24",uses:"General construction, roofing, floor joists",characteristics:"Good strength-to-weight ratio, readily available",cost:"£££"},{name:"Douglas Fir",species:"Pseudotsuga menziesii",grade:"C16, C24",uses:"Structural beams, posts, heavy construction",characteristics:"High strength, excellent load bearing",cost:"££££"},{name:"European Whitewood",species:"Picea abies",grade:"C16, C24",uses:"Internal framing, studwork, general joinery",characteristics:"Light colour, stable, easy to work",cost:"£££"},{name:"Southern Yellow Pine",species:"Pinus spp.",grade:"C16, C24",uses:"Structural framing, decking, fencing",characteristics:"High density, strong, pressure treated options",cost:"£££"}].map((e,t)=>ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsx(Sy,{className:"text-white",children:e.name}),ie.jsx(Cy,{className:"italic",children:e.species})]}),ie.jsxs(Py,{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Grades: "}),ie.jsx("span",{className:"text-white",children:e.grade})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Uses: "}),ie.jsx("span",{className:"text-white",children:e.uses})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Characteristics: "}),ie.jsx("span",{className:"text-white",children:e.characteristics})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Cost: "}),ie.jsx("span",{className:"text-emerald-400",children:e.cost})]})]})]},t))})}),ie.jsx(Yb,{value:"grades",children:ie.jsx("div",{className:"grid gap-4",children:[{grade:"C16",strength:"16 N/mm²",modulus:"8,800 N/mm²",uses:"General construction, domestic buildings",description:"Standard structural grade for most residential applications"},{grade:"C24",strength:"24 N/mm²",modulus:"11,000 N/mm²",uses:"Heavy duty construction, commercial buildings",description:"Higher strength grade for demanding structural applications"},{grade:"C35",strength:"35 N/mm²",modulus:"13,000 N/mm²",uses:"Engineered structures, large spans",description:"Premium grade for critical structural elements"}].map((e,t)=>ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center justify-between",children:[ie.jsxs("span",{children:["Grade ",e.grade]}),ie.jsx("span",{className:"text-sm text-emerald-400",children:e.strength})]}),ie.jsx(Cy,{children:e.description})]}),ie.jsxs(Py,{className:"space-y-3",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Bending Strength: "}),ie.jsx("span",{className:"text-white",children:e.strength})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Modulus of Elasticity: "}),ie.jsx("span",{className:"text-white",children:e.modulus})]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Typical Uses: "}),ie.jsx("span",{className:"text-white",children:e.uses})]})]})]},t))})}),ie.jsx(Yb,{value:"regulations",children:ie.jsx("div",{className:"grid gap-4",children:[{title:"Building Regulations Part A",section:"Structure",requirement:"Timber must meet minimum strength classes and be properly graded",compliance:"Use CE marked timber with appropriate strength class"},{title:"BS 5268",section:"Structural Use of Timber",requirement:"Design calculations and load requirements",compliance:"Follow code requirements for spans and loading"},{title:"Fire Safety",section:"Part B",requirement:"Fire resistance and treatment requirements",compliance:"Use appropriate fire retardant treatments where required"}].map((e,t)=>ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsx(Sy,{className:"text-white",children:e.title}),ie.jsx(Cy,{children:e.section})]}),ie.jsxs(Py,{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Requirement: "}),ie.jsx("span",{className:"text-white",children:e.requirement})]}),ie.jsxs("div",{className:"bg-emerald-500/10 rounded-lg p-3 border border-emerald-500/20",children:[ie.jsx("span",{className:"text-sm text-gray-400",children:"Compliance: "}),ie.jsx("span",{className:"text-emerald-300",children:e.compliance})]})]})]},t))})}),ie.jsx(Yb,{value:"sizes",children:ie.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[{category:"Sawn Timber",sizes:["38x89mm","38x140mm","38x184mm","38x235mm","47x100mm","47x150mm","47x200mm"]},{category:"Planed Timber",sizes:["32x75mm","32x125mm","32x175mm","32x225mm","44x94mm","44x144mm","44x194mm"]},{category:"Engineered",sizes:["I-Joists 200mm","I-Joists 302mm","I-Joists 356mm","Glulam beams","LVL beams"]}].map((e,t)=>ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsx(ky,{children:ie.jsx(Sy,{className:"text-white",children:e.category})}),ie.jsx(Py,{children:ie.jsx("div",{className:"space-y-2",children:e.sizes.map((e,t)=>ie.jsx("div",{className:"text-sm text-gray-300 bg-gray-700/30 rounded px-3 py-2",children:e},t))})})]},t))})})]})]})})},Aw=({onBack:e})=>{const[t,n]=st.useState(""),[r,s]=st.useState(""),[a,i]=st.useState(""),[o,l]=st.useState(""),[c,d]=st.useState(null),u={"concrete-interlocking":{name:"Concrete Interlocking",coverage:9.9},"clay-plain":{name:"Clay Plain Tiles",coverage:60},"clay-pantile":{name:"Clay Pantiles",coverage:13.2},"slate-welsh":{name:"Welsh Slate",coverage:21},"fibre-cement":{name:"Fibre Cement",coverage:12.5}};return ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center space-x-4",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back"]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center border border-red-500/20",children:ie.jsx(fh,{className:"w-5 h-5 text-red-400"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"UK Roof Tiles Calculator"}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Calculate roof tile quantities and materials"})]})]})]}),ie.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-blue-400"}),"Roof Measurements"]}),ie.jsx(Cy,{children:"Enter your roof dimensions and specifications"})]}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"roof-length",className:"text-white",children:"Roof Length (m)"}),ie.jsx(cy,{id:"roof-length",type:"number",placeholder:"12.0",value:t,onChange:e=>n(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"roof-width",className:"text-white",children:"Roof Width (m)"}),ie.jsx(cy,{id:"roof-width",type:"number",placeholder:"8.0",value:r,onChange:e=>s(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"roof-pitch",className:"text-white",children:"Roof Pitch (degrees)"}),ie.jsx(cy,{id:"roof-pitch",type:"number",placeholder:"30",value:a,onChange:e=>i(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"tile-type",className:"text-white",children:"Tile Type"}),ie.jsxs(mb,{value:o,onValueChange:l,children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"Select tile type"})}),ie.jsx(yb,{className:"bg-gray-800 border-gray-700",children:Object.entries(u).map(([e,t])=>ie.jsx(vb,{value:e,className:"text-white hover:bg-gray-700",children:t.name},e))})]})]}),ie.jsx(by,{onClick:()=>{if(!(t&&r&&a&&o))return;const e=parseFloat(t),n=parseFloat(r),s=parseFloat(a),i=u[o],l=e*n/Math.cos(s*Math.PI/180),c=Math.ceil(l*i.coverage*1.1),h="clay-plain"===o?.19:.345,m=Math.ceil(n/h)*e*2,p=1.1*l,f=Math.ceil(p/50),g=e,x=Math.ceil(g/.45);d({roofArea:l.toFixed(1),tilesNeeded:c,battenLength:m.toFixed(1),underlayRolls:f,ridgeTiles:x,selectedTile:i.name})},disabled:!(t&&r&&a&&o),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Calculate Materials"})]})]}),c&&ie.jsxs(Du.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsx(Sy,{className:"text-white",children:"Material Requirements"}),ie.jsxs(Cy,{children:["For ",c.selectedTile]})]}),ie.jsx(Py,{className:"space-y-4",children:ie.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Roof Area:"}),ie.jsxs("p",{className:"text-white font-medium",children:[c.roofArea," m²"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Tiles Needed:"}),ie.jsxs("p",{className:"text-white font-medium",children:[c.tilesNeeded," units"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Batten Length:"}),ie.jsxs("p",{className:"text-white font-medium",children:[c.battenLength," m"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Underlay Rolls:"}),ie.jsxs("p",{className:"text-white font-medium",children:[c.underlayRolls," rolls"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Ridge Tiles:"}),ie.jsxs("p",{className:"text-white font-medium",children:[c.ridgeTiles," units"]})]})]})})]}),ie.jsx("div",{className:"bg-blue-500/10 rounded-lg p-4 border border-blue-500/20",children:ie.jsxs("p",{className:"text-blue-300 text-sm",children:[ie.jsx("strong",{children:"Note:"})," Calculations include 10% waste allowance. Always confirm measurements and consult with roofing professionals."]})})]})]})]})})},Rw=({onBack:e})=>{const[t,n]=st.useState(""),[r,s]=st.useState(""),[a,i]=st.useState(""),[o,l]=st.useState(""),[c,d]=st.useState(""),[u,h]=st.useState(""),[m,p]=st.useState(""),[f,g]=st.useState(null),x={standard:{name:"Standard Brick (215x102.5x65mm)",perM2:59},engineering:{name:"Engineering Brick",perM2:59},"facing-red":{name:"Red Facing Brick",perM2:59},"facing-buff":{name:"Buff Facing Brick",perM2:59},reclaimed:{name:"Reclaimed Stock Brick",perM2:59}},y={"cement-lime":{name:"Cement:Lime:Sand (1:1:6)",strengthN:3.6},"cement-sand":{name:"Cement:Sand (1:4)",strengthN:11},"ready-mix":{name:"Ready Mix Mortar",strengthN:5.2}};return ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center space-x-4",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back"]}),ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center border border-red-500/20",children:ie.jsx(Uu,{className:"w-5 h-5 text-red-400"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"UK Brick Calculator"}),ie.jsx("p",{className:"text-gray-400 text-sm",children:"Calculate brick quantities and masonry materials"})]})]})]}),ie.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsxs(Sy,{className:"text-white flex items-center",children:[ie.jsx(Wu,{className:"w-5 h-5 mr-2 text-blue-400"}),"Wall Specifications"]}),ie.jsx(Cy,{children:"Enter your wall dimensions and specifications"})]}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"wall-length",className:"text-white",children:"Wall Length (m)"}),ie.jsx(cy,{id:"wall-length",type:"number",placeholder:"10.0",value:t,onChange:e=>n(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"wall-height",className:"text-white",children:"Wall Height (m)"}),ie.jsx(cy,{id:"wall-height",type:"number",placeholder:"2.4",value:r,onChange:e=>s(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"wall-thickness",className:"text-white",children:"Wall Thickness"}),ie.jsxs(mb,{value:a,onValueChange:i,children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"Select thickness"})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"102.5",className:"text-white hover:bg-gray-700",children:"Half Brick (102.5mm)"}),ie.jsx(vb,{value:"215",className:"text-white hover:bg-gray-700",children:"Full Brick (215mm)"})]})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"brick-type",className:"text-white",children:"Brick Type"}),ie.jsxs(mb,{value:o,onValueChange:l,children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"Select brick type"})}),ie.jsx(yb,{className:"bg-gray-800 border-gray-700",children:Object.entries(x).map(([e,t])=>ie.jsx(vb,{value:e,className:"text-white hover:bg-gray-700",children:t.name},e))})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"mortar-type",className:"text-white",children:"Mortar Type"}),ie.jsxs(mb,{value:c,onValueChange:d,children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"Select mortar type"})}),ie.jsx(yb,{className:"bg-gray-800 border-gray-700",children:Object.entries(y).map(([e,t])=>ie.jsxs(vb,{value:e,className:"text-white hover:bg-gray-700",children:[t.name," - ",t.strengthN,"N/mm²"]},e))})]})]}),ie.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"window-area",className:"text-white",children:"Window Area (m²)"}),ie.jsx(cy,{id:"window-area",type:"number",placeholder:"0",value:u,onChange:e=>h(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"door-area",className:"text-white",children:"Door Area (m²)"}),ie.jsx(cy,{id:"door-area",type:"number",placeholder:"0",value:m,onChange:e=>p(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-400"})]})]}),ie.jsx(by,{onClick:()=>{if(!(t&&r&&a&&o&&c))return;const e=parseFloat(t),n=parseFloat(r),s=parseFloat(a),i=parseFloat(u)||0,l=parseFloat(m)||0,d=x[o],h=y[c],p=e*n-i-l,f=p*(s/1e3);let v=d.perM2;215===s&&(v=118);const b=Math.ceil(p*v*1.05),j=p*(215===s?.04:.02),w=Math.ceil(40*j),N=e,k=s>102.5?Math.ceil(2.5*p):0,S=1.8*j,C=8*j;g({wallArea:p.toFixed(1),wallVolume:f.toFixed(2),bricksNeeded:b,mortarBags:w,sandTonnes:S.toFixed(2),cementBags:Math.ceil(C),dpcLength:N.toFixed(1),wallTies:k,selectedBrick:d.name,selectedMortar:h.name,mortarStrength:h.strengthN})},disabled:!(t&&r&&a&&o&&c),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Calculate Materials"})]})]}),f&&ie.jsxs(Du.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[ie.jsxs(Ny,{className:"bg-gray-800/50 border-gray-700",children:[ie.jsxs(ky,{children:[ie.jsx(Sy,{className:"text-white",children:"Material Requirements"}),ie.jsx(Cy,{children:f.selectedBrick})]}),ie.jsx(Py,{className:"space-y-4",children:ie.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Wall Area:"}),ie.jsxs("p",{className:"text-white font-medium",children:[f.wallArea," m²"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Bricks Needed:"}),ie.jsxs("p",{className:"text-white font-medium",children:[f.bricksNeeded," units"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Mortar Bags:"}),ie.jsxs("p",{className:"text-white font-medium",children:[f.mortarBags," bags"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Sand Required:"}),ie.jsxs("p",{className:"text-white font-medium",children:[f.sandTonnes," tonnes"]})]}),ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Cement Bags:"}),ie.jsxs("p",{className:"text-white font-medium",children:[f.cementBags," bags"]})]}),f.wallTies>0&&ie.jsxs("div",{children:[ie.jsx("span",{className:"text-gray-400",children:"Wall Ties:"}),ie.jsxs("p",{className:"text-white font-medium",children:[f.wallTies," units"]})]})]})})]}),ie.jsx("div",{className:"bg-blue-500/10 rounded-lg p-4 border border-blue-500/20",children:ie.jsxs("p",{className:"text-blue-300 text-sm",children:[ie.jsx("strong",{children:"Note:"})," Calculations include 5% waste allowance for bricks. Mortar strength: ",f.mortarStrength,"N/mm². Always confirm with suppliers and building control."]})})]})]})]})})},Iw=({user:e,subscriptionTier:t="none",onViewPlans:n})=>{const[r,s]=st.useState(null),a=[{id:"volumetric-calculator",title:"Volumetric Calculator",description:"Calculate volumes and material quantities for concrete, aggregates, and other building materials.",icon:"📐",category:"Calculators",minTier:"basic"},{id:"timber-calculator",title:"Timber Calculator",description:"Calculate timber requirements for flooring, framing, and roofing projects with cost estimates.",icon:"🪵",category:"Calculators",minTier:"pro"},{id:"ready-reckoner",title:"Ready Reckoner",description:"Quick reference tool for unit conversions, material densities, and standard calculations.",icon:"📋",category:"Reference",minTier:"pro"},{id:"timber-guide",title:"Timber Guide",description:"Comprehensive guide to UK timber grades, species, and building regulations compliance.",icon:"📚",category:"Reference",minTier:"pro"},{id:"roof-tiles-calculator",title:"Roof Tiles Calculator",description:"Calculate roof tile quantities, battens, and materials for UK roofing projects.",icon:"🏠",category:"Calculators",minTier:"pro"},{id:"brick-calculator",title:"Brick Calculator",description:"Calculate brick quantities, mortar, and materials for UK masonry projects.",icon:"🧱",category:"Calculators",minTier:"pro"}],i="basic"===t?a.filter(e=>"basic"===e.minTier):"pro"===t||"enterprise"===t?a:[],o=a.filter(e=>!i.includes(e)),l=["All",...Array.from(new Set(i.map(e=>e.category)))],[c,d]=st.useState("All"),u="All"===c?i:i.filter(e=>e.category===c);return"timber-calculator"===r?ie.jsx(Tw,{onBack:()=>s(null)}):"volumetric-calculator"===r?ie.jsx(Ew,{onBack:()=>s(null)}):"ready-reckoner"===r?ie.jsx(Dw,{onBack:()=>s(null)}):"timber-guide"===r?ie.jsx(Mw,{onBack:()=>s(null)}):"roof-tiles-calculator"===r?ie.jsx(Aw,{onBack:()=>s(null)}):"brick-calculator"===r?ie.jsx(Rw,{onBack:()=>s(null)}):ie.jsx("div",{className:"h-full bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-y-auto",children:ie.jsxs("div",{className:"p-6 space-y-6 min-h-full",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[ie.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-emerald-400 via-green-300 to-emerald-500 bg-clip-text text-transparent",children:"Construction Tools"}),ie.jsx("p",{className:"text-gray-400",children:"Professional tools to help with your building projects"})]}),i.length>0&&ie.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:l.map(e=>ie.jsx(by,{variant:c===e?"default":"outline",size:"sm",onClick:()=>d(e),className:c===e?"bg-emerald-600 hover:bg-emerald-700":"border-gray-600 text-gray-300 hover:bg-gray-700",children:e},e))}),u.length>0&&ie.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map((e,t)=>ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:ie.jsxs(Ny,{className:"card-professional hover:border-emerald-500/40 transition-all duration-300 group cursor-pointer",children:[ie.jsx(ky,{className:"pb-3",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/20 to-green-500/20 flex items-center justify-center border border-emerald-500/20",children:ie.jsx("span",{className:"text-2xl",children:e.icon})}),ie.jsx("div",{children:ie.jsx(Sy,{className:"text-lg text-white group-hover:text-emerald-300 transition-colors",children:e.title})})]}),ie.jsx(Lu,{className:"w-5 h-5 text-gray-500 group-hover:text-emerald-400 group-hover:translate-x-1 transition-all duration-200"})]})}),ie.jsxs(Py,{children:[ie.jsx(Cy,{className:"text-gray-400 mb-4",children:e.description}),ie.jsx(by,{onClick:()=>{return t=e.id,void s(t);var t},className:"w-full gradient-emerald hover:from-emerald-600 hover:to-green-600 text-black font-medium",children:"Open Tool"})]})]})},e.id))}),"basic"===t&&o.length>0&&ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-lg p-6 text-center",children:[ie.jsx(nh,{className:"w-8 h-8 text-blue-400 mx-auto mb-3"}),ie.jsx("h3",{className:"text-white font-semibold mb-2",children:"Unlock More Tools"}),ie.jsxs("p",{className:"text-gray-400 mb-4",children:["Get access to ",o.length," more professional tools including timber calculators, ready reckoner, and building guides with Pro or ProMax"]}),n&&ie.jsxs(by,{onClick:n,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[ie.jsx(nh,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]}),ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card-professional rounded-2xl p-6 mt-8",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx("h3",{className:"text-xl font-semibold text-emerald-300 mb-2",children:"Professional Construction Tools"}),ie.jsx("p",{className:"text-gray-400 mb-4",children:"basic"===t?"Your EezyBuild plan includes the volumetric calculator. Upgrade for more tools and features.":"All the essential calculators and references you need for accurate construction planning and material estimation."}),ie.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-emerald-400",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),ie.jsx("span",{children:"Always Updated"})]})]})})]})})},Fw=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx("textarea",X({className:zn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},s))});Fw.displayName="Textarea";const Lw=e=>{const[t,n]=st.useState([]),[r,s]=st.useState(!0),{toast:a}=im(),i=()=>ae(void 0,null,function*(){if(!e)return n([]),void s(!1);try{const{data:t,error:r}=yield Jh.from("team_members").select("\n          id,\n          team_id,\n          user_id,\n          role,\n          invited_by,\n          joined_at\n        ").eq("team_id",e);if(r)throw r;const s=(null==t?void 0:t.map(e=>e.user_id))||[];let a=[];if(s.length>0){const{data:e,error:t}=yield Jh.from("profiles").select("user_id, full_name").in("user_id",s);a=t?[]:e||[]}const i=(t||[]).map(e=>{const t=a.find(t=>t.user_id===e.user_id);return{id:e.id,team_id:e.team_id,user_id:e.user_id,role:e.role,invited_by:e.invited_by,joined_at:e.joined_at,profiles:{full_name:(null==t?void 0:t.full_name)||"Unknown User",user_id:e.user_id}}});n(i)}catch(t){a({title:"Error",description:"Failed to load team members",variant:"destructive"})}finally{s(!1)}});return st.useEffect(()=>{i()},[e]),{members:t,loading:r,inviteMember:(t,n="member")=>ae(void 0,null,function*(){var r;if(e)try{const{data:{user:s}}=yield Jh.auth.getUser(),{data:{session:o}}=yield Jh.auth.getSession();if(!s||!o)throw new Error("Not authenticated");const{data:l,error:c}=yield Jh.from("teams").select("name").eq("id",e).single();if(c||!l)throw new Error("Team not found");const{data:d,error:u}=yield Jh.from("profiles").select("full_name").eq("user_id",s.id).single(),h=(null==d?void 0:d.full_name)||(null==(r=s.email)?void 0:r.split("@")[0])||"Someone",{data:m,error:p}=yield Jh.functions.invoke("send-team-invitation",{body:{teamId:e,email:t,role:n,teamName:l.name,inviterName:h},headers:{Authorization:"Bearer ".concat(o.access_token)}});if(p)throw new Error(p.message||"Failed to send invitation");a({title:"Success",description:"Invitation sent to ".concat(t)}),yield i()}catch(s){a({title:"Error",description:s.message||"Failed to invite member",variant:"destructive"})}}),createTestInvitation:(t,n="member")=>ae(void 0,null,function*(){if(!e)return null;try{const{data:{user:r}}=yield Jh.auth.getUser(),{data:{session:s}}=yield Jh.auth.getSession();if(!r||!s)throw new Error("Not authenticated");const{data:i,error:o}=yield Jh.functions.invoke("create-test-invitation",{body:{teamId:e,email:t,role:n},headers:{Authorization:"Bearer ".concat(s.access_token)}});if(o)throw new Error(o.message||"Failed to create test invitation");return a({title:"Test Invitation Created",description:"Direct link generated for ".concat(t)}),i.inviteLink}catch(r){return a({title:"Error",description:r.message||"Failed to create test invitation",variant:"destructive"}),null}}),updateMemberRole:(e,t)=>ae(void 0,null,function*(){try{const{error:n}=yield Jh.from("team_members").update({role:t}).eq("id",e);if(n)throw n;yield i(),a({title:"Success",description:"Member role updated"})}catch(n){a({title:"Error",description:"Failed to update member role",variant:"destructive"})}}),removeMember:e=>ae(void 0,null,function*(){try{const{error:t}=yield Jh.from("team_members").delete().eq("id",e);if(t)throw t;yield i(),a({title:"Success",description:"Member removed from team"})}catch(t){a({title:"Error",description:"Failed to remove member",variant:"destructive"})}}),refetch:i}},Ow=({project:e,isOpen:t,onClose:n,onStartNewChat:r,user:s,initialTab:a="chats",conversationsHook:i})=>{var o,l;const[c,d]=st.useState(a),[u,h]=st.useState(!1),[m,p]=st.useState(!1),[f,g]=st.useState(null),[x,y]=st.useState(""),[v,b]=st.useState(""),[j,w]=st.useState(""),[N,k]=st.useState(""),S=st.useRef(null),C=((e,t)=>{const[n,r]=st.useState([]),[s,a]=st.useState(!1),[i,o]=st.useState(!1),l=st.useRef(null),{toast:c}=im(),d=()=>ae(void 0,null,function*(){if(e&&t){a(!0);try{const{data:t,error:n}=yield Jh.from("project_documents").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(n)throw n;r(t||[])}catch(n){c({variant:"destructive",title:"Error loading documents",description:"Please try again later."})}finally{a(!1)}}else r([])});return st.useEffect(()=>{d()},[e,t]),st.useEffect(()=>{if(!e||!t)return;l.current&&(Jh.removeChannel(l.current),l.current=null);const n="project-documents-".concat(e,"-").concat(Date.now()),r=Jh.channel(n);return r.on("postgres_changes",{event:"*",schema:"public",table:"project_documents",filter:"project_id=eq.".concat(e)},e=>{d()}),r.subscribe(),l.current=r,()=>{l.current&&(Jh.removeChannel(l.current),l.current=null)}},[e,t]),{documents:n,loading:s,isUploading:i,uploadDocument:n=>ae(void 0,null,function*(){if(!e||!t)return c({variant:"destructive",title:"Upload failed",description:"Project and user information required for document upload."}),!1;if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","application/json","application/xml"].includes(n.type))return c({variant:"destructive",title:"Unsupported file type",description:"Please upload images, PDFs, Word documents, or text files."}),!1;if(n.size>52428800)return c({variant:"destructive",title:"File too large",description:"File size must be less than 50MB."}),!1;o(!0);try{const r="".concat(t,"/").concat(e,"/").concat(Date.now(),"-").concat(n.name),{data:s,error:a}=yield Jh.storage.from("project-documents").upload(r,n);if(a)throw a;const{error:i}=yield Jh.from("project_documents").insert([{project_id:e,user_id:t,file_name:n.name,file_path:r,file_type:n.type,file_size:n.size}]);if(i)throw i;return c({title:"Document uploaded successfully",description:"".concat(n.name," has been uploaded to your project.")}),yield d(),!0}catch(r){return c({variant:"destructive",title:"Upload failed",description:r.message||"Failed to upload document. Please try again."}),!1}finally{o(!1)}}),deleteDocument:e=>ae(void 0,null,function*(){try{const{error:t}=yield Jh.from("project_documents").delete().eq("id",e);if(t)throw t;c({title:"Document deleted",description:"Document has been removed from your project."}),yield d()}catch(t){c({variant:"destructive",title:"Delete failed",description:t.message||"Failed to delete document. Please try again."})}}),refreshDocuments:d}})(null==e?void 0:e.id,null==s?void 0:s.id),P=((e,t)=>{const[n,r]=st.useState([]),[s,a]=st.useState(!1),[i,o]=st.useState(!1),l=st.useRef(null),{toast:c}=im(),d=()=>ae(void 0,null,function*(){if(e&&t){a(!0);try{const{data:t,error:n}=yield Jh.from("project_schedule_of_works").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(n)throw n;r(t||[])}catch(n){c({variant:"destructive",title:"Error loading schedule",description:"Please try again later."})}finally{a(!1)}}else r([])});return st.useEffect(()=>{d()},[e,t]),st.useEffect(()=>{if(!e||!t)return;l.current&&(Jh.removeChannel(l.current),l.current=null);const n="project-schedule-".concat(e,"-").concat(Date.now()),r=Jh.channel(n);return r.on("postgres_changes",{event:"*",schema:"public",table:"project_schedule_of_works",filter:"project_id=eq.".concat(e)},e=>{d()}),r.subscribe(),l.current=r,()=>{l.current&&(Jh.removeChannel(l.current),l.current=null)}},[e,t]),{scheduleItems:n,loading:s,saving:i,createTask:n=>ae(void 0,null,function*(){var r;if(!e||!t)return c({variant:"destructive",title:"Create failed",description:"Project and user information required."}),!1;if(!n.title.trim())return c({variant:"destructive",title:"Title required",description:"Please enter a task title."}),!1;o(!0);try{const s={title:n.title.trim(),project_id:e,user_id:t};(null==(r=n.description)?void 0:r.trim())&&(s.description=n.description.trim()),n.due_date&&(s.due_date=n.due_date),n.assigned_to&&(s.assigned_to=n.assigned_to);const{data:a,error:i}=yield Jh.from("project_schedule_of_works").insert([s]).select().single();if(i)throw i;if(n.assigned_to&&a){const{data:r}=yield Jh.from("projects").select("team_id").eq("id",e).single();if(null==r?void 0:r.team_id){const{error:e}=yield Jh.from("task_assignments").insert([{task_id:a.id,assigned_to:n.assigned_to,assigned_by:t,team_id:r.team_id}])}}return c({title:"Task created",description:"Task has been added to your schedule."}),yield d(),!0}catch(s){return c({title:"Error creating task",description:s.message||"Failed to create task. Please try again.",variant:"destructive"}),!1}finally{o(!1)}}),toggleTaskCompletion:(e,t)=>ae(void 0,null,function*(){try{const{error:n}=yield Jh.from("project_schedule_of_works").update({completed:!t,completed_at:t?null:(new Date).toISOString()}).eq("id",e);if(n)throw n;r(n=>n.map(n=>n.id===e?Q(X({},n),{completed:!t,completed_at:t?null:(new Date).toISOString()}):n)),c({title:t?"Task reopened":"Task completed",description:t?"Task marked as incomplete.":"Task marked as completed."})}catch(n){c({title:"Error updating task",description:n.message||"Failed to update task. Please try again.",variant:"destructive"}),d()}}),deleteTask:e=>ae(void 0,null,function*(){try{const{error:t}=yield Jh.from("project_schedule_of_works").delete().eq("id",e);if(t)throw t;c({title:"Task deleted",description:"Task has been removed from your schedule."}),yield d()}catch(t){c({variant:"destructive",title:"Delete failed",description:t.message||"Failed to delete task. Please try again."})}}),updateTask:(e,t)=>ae(void 0,null,function*(){try{const{error:n}=yield Jh.from("project_schedule_of_works").update(t).eq("id",e);if(n)throw n;c({title:"Task updated",description:"Task has been updated successfully."}),yield d()}catch(n){c({variant:"destructive",title:"Update failed",description:n.message||"Failed to update task. Please try again."})}}),refreshSchedule:d}})(null==e?void 0:e.id,null==s?void 0:s.id),_=Lw(null==e?void 0:e.team_id),E=e=>{var t,n;if(!e)return"Unassigned";if(e===(null==s?void 0:s.id))return"Myself";const r=null==(t=_.members)?void 0:t.find(t=>t.user_id===e);return(null==(n=null==r?void 0:r.profiles)?void 0:n.full_name)||"User ".concat(e.slice(0,8))},{conversations:T,getProjectConversationCount:D,getProjectDocumentCount:M,getProjectScheduleOfWorksCount:A}=i,R=T.filter(t=>t.project_id===(null==e?void 0:e.id));st.useEffect(()=>{d(a)},[a]);const I=()=>{r(null==e?void 0:e.id),n()},F=()=>{S.current&&S.current.click()},L=e=>{const t=new Date(e),n=((new Date).getTime()-t.getTime())/36e5;return n<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n<48?"Yesterday":t.toLocaleDateString()},O=e=>new Date(e).toLocaleDateString();return t&&e?ie.jsxs(Do,{children:[ie.jsx(Du.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:ie.jsxs(Du.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-gray-950/95 backdrop-blur-md border border-gray-800/50 rounded-2xl max-w-4xl w-full h-[80vh] shadow-2xl overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[ie.jsx("div",{className:"p-6 border-b border-gray-800/50 flex-shrink-0",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-12 h-12 bg-gray-800 rounded-xl flex items-center justify-center",children:ie.jsx(hh,{className:"w-6 h-6 text-gray-400"})}),ie.jsxs("div",{className:"min-w-0 flex-1",children:[ie.jsx("h2",{className:"text-2xl font-bold text-white truncate",children:e.name}),ie.jsx("p",{className:"text-gray-400 text-sm truncate",children:e.description||"No description"})]})]}),ie.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800/50 rounded-lg transition-colors",children:ie.jsx(Qh,{className:"w-5 h-5 text-gray-400"})})]})}),ie.jsx("div",{className:"flex-1 flex flex-col",children:ie.jsxs(qb,{value:c,onValueChange:d,className:"flex-1 flex flex-col",children:[ie.jsx("div",{className:"px-6 pt-4 pb-2 border-b border-gray-800/30",children:ie.jsxs(Wb,{className:"grid w-full grid-cols-3 bg-gray-900/50",children:[ie.jsxs(Hb,{value:"chats",className:"flex items-center justify-center space-x-2",children:[ie.jsx(kh,{className:"w-4 h-4"}),ie.jsx("span",{className:"text-sm font-medium",children:D(e.id)})]}),ie.jsxs(Hb,{value:"documents",className:"flex items-center justify-center space-x-2",children:[ie.jsx(dh,{className:"w-4 h-4"}),ie.jsx("span",{className:"text-sm font-medium",children:M(e.id)})]}),ie.jsxs(Hb,{value:"schedule",className:"flex items-center justify-center space-x-2",children:[ie.jsx(Oh,{className:"w-4 h-4"}),ie.jsx("span",{className:"text-sm font-medium",children:A(e.id)})]})]})}),ie.jsxs("div",{className:"flex-1 p-4 overflow-y-auto max-h-[calc(80vh-200px)]",children:["chats"===c&&ie.jsxs("div",{className:"h-full flex flex-col",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white",children:"Project Conversations"}),ie.jsxs(by,{onClick:I,size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Start New Chat"]})]}),0===R.length?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx(kh,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),ie.jsx("h4",{className:"text-lg font-medium text-gray-300 mb-2",children:"No conversations yet"}),ie.jsx("p",{className:"text-gray-500 mb-6",children:"Start your first conversation about this project"}),ie.jsxs(by,{onClick:I,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Start New Chat"]})]})}):ie.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:R.map(t=>{return ie.jsx(Du.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:"bg-gray-900/50 border border-gray-800/50 rounded-lg p-4 cursor-pointer hover:bg-gray-800/50 transition-all duration-200",onClick:()=>{return s=t.id,r(null==e?void 0:e.id,s),void n();var s},children:ie.jsxs("div",{className:"flex items-start justify-between",children:[ie.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[ie.jsx("h4",{className:"font-medium text-white mb-1 truncate",children:(s=t.title,a=50,s.length<=a?s:s.substring(0,a)+"...")}),ie.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[ie.jsx(th,{className:"w-3 h-3 mr-1"}),ie.jsx("span",{children:L(t.updated_at)})]})]}),ie.jsx(kh,{className:"w-5 h-5 text-emerald-400"})]})},t.id);var s,a})})]}),"documents"===c&&ie.jsxs("div",{className:"h-full flex flex-col",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white",children:"Project Documents"}),ie.jsxs(by,{onClick:F,disabled:C.isUploading,size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white disabled:opacity-50",children:[ie.jsx(Wh,{className:"w-4 h-4 mr-2 ".concat(C.isUploading?"animate-pulse":"")}),C.isUploading?"Uploading...":"Upload Document"]})]}),0===C.documents.length?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx(dh,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),ie.jsx("h4",{className:"text-lg font-medium text-gray-300 mb-2",children:"No documents uploaded"}),ie.jsx("p",{className:"text-gray-500 mb-6",children:"Upload documents to share them with your project team"}),ie.jsxs(by,{onClick:F,disabled:C.isUploading,className:"bg-emerald-600 hover:bg-emerald-700 text-white disabled:opacity-50",children:[ie.jsx(Wh,{className:"w-4 h-4 mr-2 ".concat(C.isUploading?"animate-pulse":"")}),C.isUploading?"Uploading...":"Upload First Document"]})]})}):ie.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:C.documents.map(e=>ie.jsx("div",{className:"bg-gray-900/50 border border-gray-800/50 rounded-lg p-4",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{className:"min-w-0 flex-1",children:[ie.jsx("h4",{className:"font-medium text-white truncate",children:e.file_name}),ie.jsxs("p",{className:"text-sm text-gray-400",children:[(e.file_size/1024).toFixed(1)," KB • ",L(e.created_at)]})]}),ie.jsx(dh,{className:"w-5 h-5 text-blue-400 ml-3"})]})},e.id))})]}),"schedule"===c&&ie.jsxs("div",{className:"flex flex-col min-h-0",children:[ie.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white",children:"Schedule of Works"}),ie.jsxs(by,{onClick:()=>h(!0),size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),ie.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[u&&ie.jsxs("div",{className:"bg-gray-900/50 border border-gray-800/50 rounded-lg p-4 mb-4",children:[ie.jsx("h4",{className:"text-white font-medium mb-3",children:"Add New Task"}),ie.jsxs("div",{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Task Title"}),ie.jsx(cy,{value:x,onChange:e=>y(e.target.value),placeholder:"Enter task title...",className:"bg-gray-800 border-gray-700 text-white"})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Description (Optional)"}),ie.jsx(Fw,{value:v,onChange:e=>b(e.target.value),placeholder:"Enter task description...",className:"bg-gray-800 border-gray-700 text-white",rows:2})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Due Date (Optional)"}),ie.jsx(cy,{type:"date",value:j,onChange:e=>w(e.target.value),className:"bg-gray-800 border-gray-700 text-white"})]}),e.team_id&&ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Assign To (Optional)"}),ie.jsxs(mb,{value:N,onValueChange:k,children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"Select team member..."})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"unassigned",children:"Unassigned"}),ie.jsx(vb,{value:null==s?void 0:s.id,children:"Myself"}),(null==(o=_.members)?void 0:o.filter(e=>e.user_id!==(null==s?void 0:s.id)).map(e=>{var t;return ie.jsx(vb,{value:e.user_id,children:(null==(t=e.profiles)?void 0:t.full_name)||"User ".concat(e.user_id.slice(0,8))},e.user_id)}))||[]]})]})]}),ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsxs(by,{onClick:()=>ae(void 0,null,function*(){if(x.trim())try{(yield P.createTask({title:x,description:v||void 0,due_date:j||void 0,assigned_to:N&&"unassigned"!==N?N:void 0}))&&(y(""),b(""),w(""),k(""),h(!1),i.fetchProjectCounts&&i.fetchProjectCounts())}catch(e){}}),disabled:!x.trim()||P.saving,size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[ie.jsx(Ah,{className:"w-4 h-4 mr-2"}),P.saving?"Creating...":"Create Task"]}),ie.jsx(by,{onClick:()=>{h(!1),y(""),b(""),w(""),k("")},variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Cancel"})]})]})]}),m&&f&&ie.jsxs("div",{className:"bg-gray-900/50 border border-gray-800/50 rounded-lg p-4 mb-4",children:[ie.jsx("h4",{className:"text-white font-medium mb-3",children:"Edit Task"}),ie.jsxs("div",{className:"space-y-3",children:[ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Task Title"}),ie.jsx(cy,{value:x,onChange:e=>y(e.target.value),placeholder:"Enter task title...",className:"bg-gray-800 border-gray-700 text-white"})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Description (Optional)"}),ie.jsx(Fw,{value:v,onChange:e=>b(e.target.value),placeholder:"Enter task description...",className:"bg-gray-800 border-gray-700 text-white",rows:2})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Due Date (Optional)"}),ie.jsx(cy,{type:"date",value:j,onChange:e=>w(e.target.value),className:"bg-gray-800 border-gray-700 text-white"})]}),e.team_id&&ie.jsxs("div",{children:[ie.jsx("label",{className:"text-sm font-medium text-white mb-1 block",children:"Assign To (Optional)"}),ie.jsxs(mb,{value:N,onValueChange:k,children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"Select team member..."})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"unassigned",children:"Unassigned"}),ie.jsx(vb,{value:null==s?void 0:s.id,children:"Myself"}),(null==(l=_.members)?void 0:l.filter(e=>e.user_id!==(null==s?void 0:s.id)).map(e=>{var t;return ie.jsx(vb,{value:e.user_id,children:(null==(t=e.profiles)?void 0:t.full_name)||"User ".concat(e.user_id.slice(0,8))},e.user_id)}))||[]]})]})]}),ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsxs(by,{onClick:()=>ae(void 0,null,function*(){if(f&&x.trim())try{yield P.updateTask(f.id,{title:x,description:v||void 0,due_date:j||void 0,assigned_to:N&&"unassigned"!==N?N:void 0}),y(""),b(""),w(""),k(""),p(!1),g(null)}catch(e){}}),disabled:!x.trim()||P.saving,size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[ie.jsx(Ah,{className:"w-4 h-4 mr-2"}),P.saving?"Updating...":"Update Task"]}),ie.jsx(by,{onClick:()=>{p(!1),g(null),y(""),b(""),w(""),k("")},variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Cancel"})]})]})]}),0===P.scheduleItems.length?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx(Oh,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),ie.jsx("h4",{className:"text-lg font-medium text-gray-300 mb-2",children:"No schedule items"}),ie.jsx("p",{className:"text-gray-500 mb-6",children:"Create tasks to organize your project timeline"}),ie.jsxs(by,{onClick:()=>h(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Create First Task"]})]})}):ie.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 max-h-96 custom-scrollbar",children:P.scheduleItems.map(e=>{return ie.jsx("div",{className:"bg-gray-900/50 border border-gray-800/50 rounded-lg p-4 cursor-pointer hover:bg-gray-800/30 transition-colors",onClick:()=>{return g(t=e),y(t.title),b(t.description||""),w(t.due_date||""),k(t.assigned_to||"unassigned"),void p(!0);var t},children:ie.jsx("div",{className:"flex items-start justify-between",children:ie.jsxs("div",{className:"min-w-0 flex-1",children:[ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsx("button",{onClick:t=>{t.stopPropagation(),P.toggleTaskCompletion(e.id,e.completed)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-500 hover:border-green-500"," transition-colors cursor-pointer"),children:e.completed&&ie.jsx(Oh,{className:"w-3 h-3 text-white"})}),ie.jsx("h4",{className:"font-medium truncate ".concat(e.completed?"text-gray-400 line-through":"text-white"),children:e.title})]}),e.description&&ie.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2 ml-7",children:e.description}),ie.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-xs text-gray-500 ml-7",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(Hu,{className:"w-3 h-3 mr-1"}),ie.jsxs("span",{children:["Created: ",(t=e.created_at,new Date(t).toLocaleDateString())]})]}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(Hu,{className:"w-3 h-3 mr-1"}),ie.jsxs("span",{children:["Due: ",e.due_date?O(e.due_date):"No due date"]})]}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(Yh,{className:"w-3 h-3 mr-1"}),ie.jsx("span",{children:E(e.assigned_to)})]})]})]})})},e.id);var t})})]})]})]})]})}),ie.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-800/50 bg-gray-950/95",children:ie.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsxs("span",{children:["Status: ",ie.jsx("span",{className:"text-white",children:e.status})]}),ie.jsxs("span",{children:["Label: ",ie.jsx("span",{className:"text-white",children:e.label})]})]}),ie.jsxs("span",{children:["Updated: ",ie.jsx("span",{className:"text-white",children:L(e.updated_at)})]})]})})]})}),ie.jsx("input",{ref:S,type:"file",onChange:e=>{const t=e.target.files;if(t&&t.length>0){const e=t[0];C.uploadDocument(e)}},style:{display:"none"},accept:"image/*,.pdf,.doc,.docx,.txt,.csv,.json,.xml"})]}):null},zw=({project:e,index:t,conversationCount:n,documentCount:r,scheduleOfWorksCount:s,onStartNewChat:a,onEdit:i,onDelete:o,onTogglePin:l,onProjectStatsClick:c,onStatusChange:d})=>{const[u,h]=st.useState(!1);return ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-6 hover:border-emerald-500/30 transition-all duration-300 group relative ".concat(e.pinned?"border-emerald-500/50 ring-1 ring-emerald-500/20":"border-gray-800/50"),children:[e.pinned&&ie.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-emerald-500 rounded-full flex items-center justify-center",children:ie.jsx(_h,{className:"w-2 h-2 text-white"})}),ie.jsxs("div",{className:"flex items-start justify-between mb-4",children:[ie.jsxs("div",{className:"flex-1",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:e.name}),e.description&&ie.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:e.description})]}),ie.jsx("div",{className:"relative",children:ie.jsx("button",{onClick:()=>l(e.id,e.pinned||!1),className:"p-2 hover:bg-gray-800/50 rounded-lg transition-colors ".concat(e.pinned?"text-emerald-400 hover:text-emerald-300":"text-gray-400 hover:text-white"),title:e.pinned?"Unpin project":"Pin project to top",children:ie.jsx(_h,{className:"w-4 h-4 ".concat(e.pinned?"fill-current":"")})})})]}),ie.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[ie.jsxs("div",{className:"relative",children:[ie.jsxs("button",{onClick:()=>h(!u),className:"px-3 py-1 rounded-full text-xs font-medium border transition-all duration-200 hover:opacity-80 flex items-center space-x-1 whitespace-nowrap ".concat((e=>{switch(e){case"planning":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"in-progress":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"completed":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}})(e.status)),children:[ie.jsx("span",{children:(e=>{switch(e){case"planning":return"Set-up";case"in-progress":return"In Progress";case"completed":return"Completed";case"on-hold":return"On Hold";default:return e.replace("-"," ")}})(e.status)}),ie.jsx(Ku,{className:"w-3 h-3"})]}),u&&ie.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-lg shadow-xl z-10 min-w-32",children:[{value:"planning",label:"Set-up"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"on-hold",label:"On Hold"}].map(t=>ie.jsx("button",{onClick:()=>{return n=t.value,d(e.id,n),void h(!1);var n},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-700/50 transition-colors first:rounded-t-lg last:rounded-b-lg ".concat(e.status===t.value?"text-emerald-300":"text-gray-300"),children:t.label},t.value))})]}),ie.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium border whitespace-nowrap ".concat((e=>{switch(e){case"Residential":return"bg-emerald-500/20 text-emerald-300 border-emerald-500/30";case"Commercial":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"Industrial":return"bg-orange-500/20 text-orange-300 border-orange-500/30";case"Infrastructure":return"bg-cyan-500/20 text-cyan-300 border-cyan-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}})(e.label)),children:e.label}),e.team_name&&ie.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium border bg-indigo-500/20 text-indigo-300 border-indigo-500/30 whitespace-nowrap",children:e.team_name})]}),u&&ie.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>h(!1)}),(e.customer_name||e.customer_address||e.customer_phone)&&ie.jsxs("div",{className:"mb-4 p-3 bg-gray-800/30 rounded-lg border border-gray-700/30",children:[ie.jsx("div",{className:"mb-2",children:ie.jsx("span",{className:"text-base font-medium text-blue-400",children:"Customer Details"})}),ie.jsxs("div",{className:"space-y-2",children:[e.customer_name&&ie.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[ie.jsx(Yh,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),ie.jsx("span",{className:"font-medium",children:e.customer_name})]}),e.customer_address&&ie.jsxs("button",{onClick:()=>(e=>{const t=encodeURIComponent(e);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPad|iPhone|iPod/.test(navigator.userAgent)?window.open("maps://?q=".concat(t),"_system"):window.open("geo:0,0?q=".concat(t),"_system"):window.open("https://maps.google.com/?q=".concat(t),"_blank")})(e.customer_address),className:"flex items-start gap-2 text-sm text-gray-300 hover:text-emerald-300 transition-colors text-left group",children:[ie.jsx(wh,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0 group-hover:text-emerald-300"}),ie.jsx("span",{className:"underline-offset-2 group-hover:underline",children:e.customer_address})]}),e.customer_phone&&ie.jsxs("button",{onClick:()=>{return t=e.customer_phone,void window.open("tel:".concat(t),"_system");var t},className:"flex items-center gap-2 text-sm text-gray-300 hover:text-emerald-300 transition-colors group",children:[ie.jsx(Ph,{className:"w-4 h-4 text-emerald-400 group-hover:text-emerald-300"}),ie.jsx("span",{className:"underline-offset-2 group-hover:underline",children:e.customer_phone})]})]})]}),ie.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 py-3 border-t border-b border-gray-800/30",children:[ie.jsxs("button",{onClick:()=>c(e,"chats"),className:"text-center hover:bg-gray-800/30 rounded-lg p-2 transition-colors group/stat",children:[ie.jsx("div",{className:"flex items-center justify-center mb-1",children:ie.jsx(kh,{className:"w-4 h-4 text-emerald-400 group-hover/stat:text-emerald-300"})}),ie.jsx("div",{className:"text-lg font-semibold text-white group-hover/stat:text-emerald-300",children:n}),ie.jsx("div",{className:"text-xs text-gray-400",children:"Chats"})]}),ie.jsxs("button",{onClick:()=>c(e,"documents"),className:"text-center hover:bg-gray-800/30 rounded-lg p-2 transition-colors group/stat",children:[ie.jsx("div",{className:"flex items-center justify-center mb-1",children:ie.jsx(dh,{className:"w-4 h-4 text-blue-400 group-hover/stat:text-blue-300"})}),ie.jsx("div",{className:"text-lg font-semibold text-white group-hover/stat:text-blue-300",children:r}),ie.jsx("div",{className:"text-xs text-gray-400",children:"Docs"})]}),ie.jsxs("button",{onClick:()=>{c(e,"schedule")},className:"text-center hover:bg-gray-800/30 rounded-lg p-2 transition-colors group/stat",children:[ie.jsx("div",{className:"flex items-center justify-center mb-1",children:ie.jsx(th,{className:"w-4 h-4 text-purple-400 group-hover/stat:text-purple-300"})}),ie.jsx("div",{className:"text-lg font-semibold text-white group-hover/stat:text-purple-300",children:s}),ie.jsx("div",{className:"text-xs text-gray-400",children:"Schedule"})]})]}),ie.jsxs("div",{className:"flex space-x-2",children:[ie.jsx("button",{onClick:()=>a(e.id),className:"flex-1 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-2 rounded-lg transition-all duration-200 text-sm font-medium",children:"Start Chat"}),ie.jsx("button",{onClick:()=>i(e),className:"px-4 py-2 bg-gray-800/50 hover:bg-gray-700/50 text-gray-300 border border-gray-700/50 rounded-lg transition-all duration-200",children:ie.jsx(zh,{className:"w-4 h-4"})}),ie.jsx("button",{onClick:()=>o(e.id,e.name),className:"px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 rounded-lg transition-all duration-200",children:ie.jsx(Uh,{className:"w-4 h-4"})})]}),ie.jsx("div",{className:"mt-4 pt-3 border-t border-gray-800/30 text-xs text-gray-500",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),ie.jsxs("span",{children:["Updated: ",new Date(e.updated_at).toLocaleDateString()]})]})})]})};var Bw="ScrollArea",[Vw,Uw]=le(Bw),[qw,Ww]=Vw(Bw),Hw=st.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:i=600}=n,o=J(n,["__scopeScrollArea","type","dir","scrollHideDelay"]),[l,c]=st.useState(null),[d,u]=st.useState(null),[h,m]=st.useState(null),[p,f]=st.useState(null),[g,x]=st.useState(null),[y,v]=st.useState(0),[b,j]=st.useState(0),[w,N]=st.useState(!1),[k,S]=st.useState(!1),C=de(t,e=>c(e)),P=_e(a);return ie.jsx(qw,{scope:r,type:s,dir:P,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:f,scrollbarXEnabled:w,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:k,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:j,children:ie.jsx(oe.div,Q(X({dir:P},o),{ref:C,style:X({position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px"},e.style)}))})});Hw.displayName=Bw;var Yw="ScrollAreaViewport",Kw=st.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,children:s,asChild:a,nonce:i}=n,o=J(n,["__scopeScrollArea","children","asChild","nonce"]),l=Ww(Yw,r),c=st.useRef(null),d=de(t,c,l.onViewportChange);return ie.jsxs(ie.Fragment,{children:[ie.jsx("style",{dangerouslySetInnerHTML:{__html:"\n[data-radix-scroll-area-viewport] {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n}\n[data-radix-scroll-area-viewport]::-webkit-scrollbar {\n  display: none;\n}\n:where([data-radix-scroll-area-viewport]) {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n:where([data-radix-scroll-area-content]) {\n  flex-grow: 1;\n}\n"},nonce:i}),ie.jsx(oe.div,Q(X({"data-radix-scroll-area-viewport":""},o),{asChild:a,ref:d,style:X({overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden"},e.style),children:bN({asChild:a,children:s},e=>ie.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:e}))}))]})});Kw.displayName=Yw;var Gw="ScrollAreaScrollbar",Xw=st.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,s=J(n,["forceMount"]),a=Ww(Gw,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l="horizontal"===e.orientation;return st.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),"hover"===a.type?ie.jsx(Qw,Q(X({},s),{ref:t,forceMount:r})):"scroll"===a.type?ie.jsx(Jw,Q(X({},s),{ref:t,forceMount:r})):"auto"===a.type?ie.jsx(Zw,Q(X({},s),{ref:t,forceMount:r})):"always"===a.type?ie.jsx($w,Q(X({},s),{ref:t})):null});Xw.displayName=Gw;var Qw=st.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,s=J(n,["forceMount"]),a=Ww(Gw,e.__scopeScrollArea),[i,o]=st.useState(!1);return st.useEffect(()=>{const e=a.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),ie.jsx(me,{present:r||i,children:ie.jsx(Zw,Q(X({"data-state":i?"visible":"hidden"},s),{ref:t}))})}),Jw=st.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,s=J(n,["forceMount"]),a=Ww(Gw,e.__scopeScrollArea),i="horizontal"===e.orientation,o=yN(()=>c("SCROLL_END"),100),[l,c]=(d="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},st.useReducer((e,t)=>{const n=u[e][t];return null!=n?n:e},d));var d,u;return st.useEffect(()=>{if("idle"===l){const e=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[l,a.scrollHideDelay,c]),st.useEffect(()=>{const e=a.viewport,t=i?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(c("SCROLL"),o()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[a.viewport,i,c,o]),ie.jsx(me,{present:r||"hidden"!==l,children:ie.jsx($w,Q(X({"data-state":"hidden"===l?"hidden":"visible"},s),{ref:t,onPointerEnter:he(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:he(e.onPointerLeave,()=>c("POINTER_LEAVE"))}))})}),Zw=st.forwardRef((e,t)=>{const n=Ww(Gw,e.__scopeScrollArea),r=e,{forceMount:s}=r,a=J(r,["forceMount"]),[i,o]=st.useState(!1),l="horizontal"===e.orientation,c=yN(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?e:t)}},10);return vN(n.viewport,c),vN(n.content,c),ie.jsx(me,{present:s||i,children:ie.jsx($w,Q(X({"data-state":i?"visible":"hidden"},a),{ref:t}))})}),$w=st.forwardRef((e,t)=>{const n=e,{orientation:r="vertical"}=n,s=J(n,["orientation"]),a=Ww(Gw,e.__scopeScrollArea),i=st.useRef(null),o=st.useRef(0),[l,c]=st.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=hN(l.viewport,l.content),u=Q(X({},s),{sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e});function h(e,t){return function(e,t,n,r="ltr"){const s=mN(n),a=s/2,i=t||a,o=s-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,u="ltr"===r?[0,d]:[-1*d,0];return fN([l,c],u)(e)}(e,o.current,l,t)}return"horizontal"===r?ie.jsx(eN,Q(X({},u),{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=pN(a.viewport.scrollLeft,l,a.dir);i.current.style.transform="translate3d(".concat(e,"px, 0, 0)")}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=h(e,a.dir))}})):"vertical"===r?ie.jsx(tN,Q(X({},u),{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=pN(a.viewport.scrollTop,l);i.current.style.transform="translate3d(0, ".concat(e,"px, 0)")}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=h(e))}})):null}),eN=st.forwardRef((e,t)=>{const n=e,{sizes:r,onSizesChange:s}=n,a=J(n,["sizes","onSizesChange"]),i=Ww(Gw,e.__scopeScrollArea),[o,l]=st.useState(),c=st.useRef(null),d=de(t,c,i.onScrollbarXChange);return st.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),ie.jsx(sN,Q(X({"data-orientation":"horizontal"},a),{ref:d,sizes:r,style:X({bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":mN(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),gN(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:uN(o.paddingLeft),paddingEnd:uN(o.paddingRight)}})}}))}),tN=st.forwardRef((e,t)=>{const n=e,{sizes:r,onSizesChange:s}=n,a=J(n,["sizes","onSizesChange"]),i=Ww(Gw,e.__scopeScrollArea),[o,l]=st.useState(),c=st.useRef(null),d=de(t,c,i.onScrollbarYChange);return st.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),ie.jsx(sN,Q(X({"data-orientation":"vertical"},a),{ref:d,sizes:r,style:X({top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":mN(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),gN(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:uN(o.paddingTop),paddingEnd:uN(o.paddingBottom)}})}}))}),[nN,rN]=Vw(Gw),sN=st.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h}=n,m=J(n,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),p=Ww(Gw,r),[f,g]=st.useState(null),x=de(t,e=>g(e)),y=st.useRef(null),v=st.useRef(""),b=p.viewport,j=s.content-s.viewport,w=Ce(u),N=Ce(c),k=yN(h,10);function S(e){if(y.current){const t=e.clientX-y.current.left,n=e.clientY-y.current.top;d({x:t,y:n})}}return st.useEffect(()=>{const e=e=>{const t=e.target;(null==f?void 0:f.contains(t))&&w(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[b,f,j,w]),st.useEffect(N,[s,N]),vN(f,k),vN(p.content,k),ie.jsx(nN,{scope:r,scrollbar:f,hasThumb:a,onThumbChange:Ce(i),onThumbPointerUp:Ce(o),onThumbPositionChange:N,onThumbPointerDown:Ce(l),children:ie.jsx(oe.div,Q(X({},m),{ref:x,style:X({position:"absolute"},m.style),onPointerDown:he(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),y.current=f.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),S(e)}}),onPointerMove:he(e.onPointerMove,S),onPointerUp:he(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})}))})}),aN="ScrollAreaThumb",iN=st.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,s=J(n,["forceMount"]),a=rN(aN,e.__scopeScrollArea);return ie.jsx(me,{present:r||a.hasThumb,children:ie.jsx(oN,X({ref:t},s))})}),oN=st.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,style:s}=n,a=J(n,["__scopeScrollArea","style"]),i=Ww(aN,r),o=rN(aN,r),{onThumbPositionChange:l}=o,c=de(t,e=>o.onThumbChange(e)),d=st.useRef(),u=yN(()=>{d.current&&(d.current(),d.current=void 0)},100);return st.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(u(),!d.current){const t=xN(e,l);d.current=t,l()}};return l(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,u,l]),ie.jsx(oe.div,Q(X({"data-state":o.hasThumb?"visible":"hidden"},a),{ref:c,style:X({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},s),onPointerDownCapture:he(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;o.onThumbPointerDown({x:n,y:r})}),onPointerUp:he(e.onPointerUp,o.onThumbPointerUp)}))});iN.displayName=aN;var lN="ScrollAreaCorner",cN=st.forwardRef((e,t)=>{const n=Ww(lN,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?ie.jsx(dN,Q(X({},e),{ref:t})):null});cN.displayName=lN;var dN=st.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r}=n,s=J(n,["__scopeScrollArea"]),a=Ww(lN,r),[i,o]=st.useState(0),[l,c]=st.useState(0),d=Boolean(i&&l);return vN(a.scrollbarX,()=>{var e;const t=(null==(e=a.scrollbarX)?void 0:e.offsetHeight)||0;a.onCornerHeightChange(t),c(t)}),vN(a.scrollbarY,()=>{var e;const t=(null==(e=a.scrollbarY)?void 0:e.offsetWidth)||0;a.onCornerWidthChange(t),o(t)}),d?ie.jsx(oe.div,Q(X({},s),{ref:t,style:X({width:i,height:l,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0},e.style)})):null});function uN(e){return e?parseInt(e,10):0}function hN(e,t){const n=e/t;return isNaN(n)?0:n}function mN(e){const t=hN(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function pN(e,t,n="ltr"){const r=mN(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,o=a-r,l=Jy(e,"ltr"===n?[0,i]:[-1*i,0]);return fN([0,i],[0,o])(l)}function fN(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function gN(e,t){return e>0&&e<t}var xN=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,o=n.top!==a.top;(i||o)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function yN(e,t){const n=Ce(e),r=st.useRef(0);return st.useEffect(()=>()=>window.clearTimeout(r.current),[]),st.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function vN(e,t){const n=Ce(t);be(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}function bN(e,t){const{asChild:n,children:r}=e;if(!n)return"function"==typeof t?t(r):t;const s=st.Children.only(r);return st.cloneElement(s,{children:"function"==typeof t?t(s.props.children):t})}var jN=Hw,wN=Kw,NN=cN;const kN=st.forwardRef((e,t)=>{var n=e,{className:r,children:s}=n,a=J(n,["className","children"]);return ie.jsxs(jN,Q(X({ref:t,className:zn("relative overflow-hidden",r)},a),{children:[ie.jsx(wN,{className:"h-full w-full rounded-[inherit]",children:s}),ie.jsx(SN,{}),ie.jsx(NN,{})]}))});kN.displayName=jN.displayName;const SN=st.forwardRef((e,t)=>{var n=e,{className:r,orientation:s="vertical"}=n,a=J(n,["className","orientation"]);return ie.jsx(Xw,Q(X({ref:t,orientation:s,className:zn("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r)},a),{children:ie.jsx(iN,{className:"relative flex-1 rounded-full bg-border"})}))});SN.displayName=Xw.displayName;const CN=({isOpen:e,onClose:t,newProject:n,setNewProject:r,onCreateProject:s})=>ie.jsx(Do,{children:e&&ie.jsx(Du.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t,children:ie.jsxs(Du.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:e=>e.stopPropagation(),className:"bg-gray-900/95 backdrop-blur-xl border border-gray-800/50 rounded-xl w-full max-w-md h-[90vh] flex flex-col",children:[ie.jsx("div",{className:"p-6 pb-4 flex-shrink-0",children:ie.jsx("h2",{className:"text-xl font-bold text-white",children:"Create New Project"})}),ie.jsx(kN,{className:"flex-1 px-6 h-0",children:ie.jsxs("div",{className:"space-y-4 pb-4",children:[ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Name *"}),ie.jsx("input",{id:"name",type:"text",value:n.name,onChange:e=>r(Q(X({},n),{name:e.target.value})),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",placeholder:"Enter project name"})]}),ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),ie.jsx("textarea",{id:"description",value:n.description,onChange:e=>r(Q(X({},n),{description:e.target.value})),rows:3,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 resize-none",placeholder:"Describe your project"})]}),ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Type"}),ie.jsxs("select",{id:"label",value:n.label,onChange:e=>r(Q(X({},n),{label:e.target.value})),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",children:[ie.jsx("option",{value:"Residential",children:"Residential"}),ie.jsx("option",{value:"Commercial",children:"Commercial"}),ie.jsx("option",{value:"Industrial",children:"Industrial"}),ie.jsx("option",{value:"Infrastructure",children:"Infrastructure"})]})]}),ie.jsxs("div",{className:"border-t border-gray-700/50 pt-4",children:[ie.jsx("h3",{className:"text-base font-medium text-blue-400 mb-3",children:"Customer Details"}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"customer-name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Customer Name"}),ie.jsx("input",{id:"customer-name",type:"text",value:n.customer_name,onChange:e=>r(Q(X({},n),{customer_name:e.target.value})),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",placeholder:"Enter customer name"})]}),ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"customer-address",className:"block text-sm font-medium text-gray-300 mb-2",children:"Customer Address"}),ie.jsx("textarea",{id:"customer-address",value:n.customer_address,onChange:e=>r(Q(X({},n),{customer_address:e.target.value})),rows:2,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 resize-none",placeholder:"Enter customer address"})]}),ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"customer-phone",className:"block text-sm font-medium text-gray-300 mb-2",children:"Customer Phone"}),ie.jsx("input",{id:"customer-phone",type:"tel",value:n.customer_phone,onChange:e=>r(Q(X({},n),{customer_phone:e.target.value})),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",placeholder:"Enter customer phone number"})]})]})]})]})}),ie.jsx("div",{className:"p-6 pt-4 border-t border-gray-700/50 flex-shrink-0",children:ie.jsxs("div",{className:"flex space-x-3",children:[ie.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-700/50 text-gray-300 rounded-lg hover:bg-gray-800/50 transition-colors",children:"Cancel"}),ie.jsx("button",{onClick:s,disabled:!n.name.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 disabled:from-gray-600 disabled:to-gray-700 text-white rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Project"})]})})]})})}),PN=({editingProject:e,onClose:t,setEditingProject:n,onUpdateProject:r})=>ie.jsx(Do,{children:e&&ie.jsx(Du.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t,children:ie.jsxs(Du.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:e=>e.stopPropagation(),className:"bg-gray-900/95 backdrop-blur-xl border border-gray-800/50 rounded-xl w-full max-w-md h-[90vh] flex flex-col",children:[ie.jsx("div",{className:"p-6 pb-4 flex-shrink-0",children:ie.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Project"})}),ie.jsx(kN,{className:"flex-1 px-6 h-0",children:ie.jsxs("div",{className:"space-y-4 pb-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"edit-name",className:"text-sm font-medium text-gray-300 mb-2 block",children:"Project Name *"}),ie.jsx(cy,{id:"edit-name",type:"text",value:e.name,onChange:t=>n(Q(X({},e),{name:t.target.value})),className:"w-full bg-gray-800/50 border-gray-700/50 text-white placeholder-gray-400 focus:border-emerald-500/60 focus:ring-emerald-500/20",placeholder:"Enter project name"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"edit-description",className:"text-sm font-medium text-gray-300 mb-2 block",children:"Description"}),ie.jsx("textarea",{id:"edit-description",value:e.description,onChange:t=>n(Q(X({},e),{description:t.target.value})),rows:3,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 resize-none",placeholder:"Describe your project"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{className:"text-sm font-medium text-gray-300 mb-2 block",children:"Project Type"}),ie.jsxs(mb,{value:e.label,onValueChange:t=>n(Q(X({},e),{label:t})),children:[ie.jsx(fb,{className:"w-full h-10 bg-gray-800/50 border-gray-700/50 text-white hover:bg-gray-800/70 focus:border-emerald-500/60 focus:ring-2 focus:ring-emerald-500/20",children:ie.jsx(pb,{placeholder:"Select project type"})}),ie.jsxs(yb,{className:"bg-gray-800/95 backdrop-blur-xl border border-gray-700/50 text-white z-[60]",children:[ie.jsx(vb,{value:"Residential",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Residential"}),ie.jsx(vb,{value:"Commercial",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Commercial"}),ie.jsx(vb,{value:"Industrial",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Industrial"}),ie.jsx(vb,{value:"Infrastructure",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Infrastructure"})]})]})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{className:"text-sm font-medium text-gray-300 mb-2 block",children:"Status"}),ie.jsxs(mb,{value:e.status,onValueChange:t=>n(Q(X({},e),{status:t})),children:[ie.jsx(fb,{className:"w-full h-10 bg-gray-800/50 border-gray-700/50 text-white hover:bg-gray-800/70 focus:border-emerald-500/60 focus:ring-2 focus:ring-emerald-500/20",children:ie.jsx(pb,{placeholder:"Select status"})}),ie.jsxs(yb,{className:"bg-gray-800/95 backdrop-blur-xl border border-gray-700/50 text-white z-[60]",children:[ie.jsx(vb,{value:"setup",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Set-up"}),ie.jsx(vb,{value:"planning",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Planning"}),ie.jsx(vb,{value:"in-progress",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"In Progress"}),ie.jsx(vb,{value:"completed",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"Completed"}),ie.jsx(vb,{value:"on-hold",className:"hover:bg-emerald-500/10 focus:bg-emerald-500/10 hover:text-emerald-400 focus:text-emerald-400 cursor-pointer",children:"On Hold"})]})]})]}),ie.jsxs("div",{className:"border-t border-gray-700/50 pt-4",children:[ie.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Customer Details"}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"edit-customer-name",className:"text-sm font-medium text-gray-300 mb-2 block",children:"Customer Name"}),ie.jsx(cy,{id:"edit-customer-name",type:"text",value:e.customer_name||"",onChange:t=>n(Q(X({},e),{customer_name:t.target.value})),className:"w-full bg-gray-800/50 border-gray-700/50 text-white placeholder-gray-400 focus:border-emerald-500/60 focus:ring-emerald-500/20",placeholder:"Enter customer name"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"edit-customer-address",className:"text-sm font-medium text-gray-300 mb-2 block",children:"Customer Address"}),ie.jsx("textarea",{id:"edit-customer-address",value:e.customer_address||"",onChange:t=>n(Q(X({},e),{customer_address:t.target.value})),rows:2,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:border-emerald-500/60 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 resize-none",placeholder:"Enter customer address"})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"edit-customer-phone",className:"text-sm font-medium text-gray-300 mb-2 block",children:"Customer Phone"}),ie.jsx(cy,{id:"edit-customer-phone",type:"tel",value:e.customer_phone||"",onChange:t=>n(Q(X({},e),{customer_phone:t.target.value})),className:"w-full bg-gray-800/50 border-gray-700/50 text-white placeholder-gray-400 focus:border-emerald-500/60 focus:ring-emerald-500/20",placeholder:"Enter customer phone number"})]})]})]})]})}),ie.jsx("div",{className:"p-6 pt-4 border-t border-gray-700/50 flex-shrink-0",children:ie.jsxs("div",{className:"flex space-x-3",children:[ie.jsx(by,{onClick:t,variant:"outline",className:"flex-1 border-gray-700/50 text-gray-300 hover:bg-gray-800/50 hover:text-white",children:"Cancel"}),ie.jsx(by,{onClick:r,disabled:!e.name.trim(),className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 disabled:from-gray-600 disabled:to-gray-700 text-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Project"})]})})]})})}),_N=({onCreateProject:e})=>ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-64 text-center",children:[ie.jsx(hh,{className:"w-16 h-16 text-gray-600 mb-4"}),ie.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No projects yet"}),ie.jsx("p",{className:"text-gray-400 mb-6",children:"Create your first project to get started with building regulations guidance."}),ie.jsx("button",{onClick:e,className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white px-6 py-3 rounded-lg transition-all duration-300",children:"Create Project"})]}),EN=[{value:"all",label:"All Types"},{value:"Residential",label:"Residential"},{value:"Commercial",label:"Commercial"},{value:"Industrial",label:"Industrial"},{value:"Infrastructure",label:"Infrastructure"}],TN=[{value:"all",label:"All Statuses"},{value:"setup",label:"Set-up"},{value:"planning",label:"Planning"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"on-hold",label:"On Hold"}],DN=[{value:"all",label:"All Projects"},{value:"personal",label:"Personal Projects"},{value:"team",label:"Team Projects"}],MN=({filters:e,onFiltersChange:t,showContextFilter:n=!1,projectCount:r})=>{const s=(n,r)=>{const s=Q(X({},e),{[n]:r});t(s)};return ie.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-xl p-4 mb-6",children:[ie.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[ie.jsx("div",{className:"relative flex-1 min-w-[200px]",children:ie.jsx(cy,{placeholder:"Search projects...",value:e.search||"",onChange:e=>s("search",e.target.value),className:"bg-gray-800/50 border-gray-700/50 text-white placeholder-gray-400"})}),n&&ie.jsxs(mb,{value:e.context,onValueChange:e=>s("context",e),children:[ie.jsx(fb,{className:"w-[180px] bg-gray-800/50 border-gray-700/50 text-white",children:ie.jsx(pb,{})}),ie.jsx(yb,{className:"bg-gray-800/95 border border-gray-700/50 text-white",children:DN.map(e=>ie.jsx(vb,{value:e.value,children:e.label},e.value))})]}),ie.jsxs(mb,{value:e.projectType,onValueChange:e=>s("projectType",e),children:[ie.jsx(fb,{className:"w-[150px] bg-gray-800/50 border-gray-700/50 text-white",children:ie.jsx(pb,{})}),ie.jsx(yb,{className:"bg-gray-800/95 border border-gray-700/50 text-white",children:EN.map(e=>ie.jsx(vb,{value:e.value,children:e.label},e.value))})]}),ie.jsxs(mb,{value:e.status,onValueChange:e=>s("status",e),children:[ie.jsx(fb,{className:"w-[140px] bg-gray-800/50 border-gray-700/50 text-white",children:ie.jsx(pb,{})}),ie.jsx(yb,{className:"bg-gray-800/95 border border-gray-700/50 text-white",children:TN.map(e=>ie.jsx(vb,{value:e.value,children:e.label},e.value))})]}),ie.jsx(by,{variant:"outline",onClick:()=>{t({context:"all",projectType:"all",status:"all",search:""})},className:"text-white border-gray-700",children:"Clear"})]}),void 0!==r&&ie.jsx("div",{className:"mt-3 pt-3 border-t border-gray-800/30",children:ie.jsxs("p",{className:"text-sm text-gray-400",children:[r," project",1!==r?"s":""," found"]})})]})},AN=({user:e,onStartNewChat:t})=>{const[n,r]=st.useState([]),[s,a]=st.useState(!0),[i,o]=st.useState(!1),[l,c]=st.useState({name:"",description:"",label:"Residential",customer_name:"",customer_address:"",customer_phone:""}),[d,u]=st.useState(null),[h,m]=st.useState(null),[p,f]=st.useState(!1),[g,x]=st.useState("chats"),[y,v]=st.useState({context:"all",projectType:"all",status:"all",search:""}),{toast:b}=im(),j=dy(null==e?void 0:e.id),{conversations:w,getProjectConversationCount:N,getProjectDocumentCount:k,getProjectScheduleOfWorksCount:S,loading:C,incrementDocumentCount:P,incrementScheduleCount:_}=j,E=()=>ae(void 0,null,function*(){if(null==e?void 0:e.id){a(!0);try{const{data:e,error:t}=yield Jh.from("projects").select("\n          *,\n          teams!left(\n            id,\n            name\n          )\n        ").order("updated_at",{ascending:!1});if(t)throw t;const n=(e||[]).map(e=>{var t;return Q(X({},e),{team_name:(null==(t=e.teams)?void 0:t.name)||null})}).sort((e,t)=>e.pinned&&!t.pinned?-1:!e.pinned&&t.pinned?1:new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime());r(n)}catch(t){b({variant:"destructive",title:"Error loading projects",description:"Please try again later."})}finally{a(!1)}}else a(!1)});st.useEffect(()=>{E()},[null==e?void 0:e.id]),st.useEffect(()=>{if(!(null==e?void 0:e.id))return;const t=Jh.channel("projects-changes").on("postgres_changes",{event:"*",schema:"public",table:"projects"},e=>{E()}).subscribe();return()=>{Jh.removeChannel(t)}},[null==e?void 0:e.id]);const T=(e,t)=>ae(void 0,null,function*(){try{const{error:n}=yield Jh.from("projects").update({pinned:!t}).eq("id",e);if(n)throw n;b({title:t?"Project unpinned":"Project pinned",description:t?"Project unpinned from top":"Project moved to top of list"}),E()}catch(n){b({variant:"destructive",title:"Error updating project",description:n.message||"Please try again."})}}),D=(e,t)=>ae(void 0,null,function*(){try{const{error:n}=yield Jh.from("projects").update({status:t}).eq("id",e);if(n)throw n;const r="planning"===t?"Set-up":t.replace("-"," ");b({title:"Status updated",description:"Project status changed to ".concat(r,".")}),E()}catch(n){b({variant:"destructive",title:"Error updating status",description:n.message||"Please try again."})}}),M=(e,t)=>ae(void 0,null,function*(){if(confirm('Are you sure you want to delete "'.concat(t,'"? This will also delete all associated conversations and documents.')))try{const{error:n}=yield Jh.from("projects").delete().eq("id",e);if(n)throw n;b({title:"Project deleted",description:"".concat(t," has been deleted.")}),E()}catch(n){b({variant:"destructive",title:"Error deleting project",description:n.message||"Please try again."})}}),A=(e,t)=>{m(e),x(t),f(!0)};if(s||C)return ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})});const R=n.filter(e=>{var t;if("personal"===y.context&&e.team_id)return!1;if("team"===y.context&&!e.team_id)return!1;if("all"!==y.projectType&&e.label!==y.projectType)return!1;if("all"!==y.status&&e.status!==y.status)return!1;if(y.search){const n=y.search.toLowerCase(),r=e.name.toLowerCase().includes(n),s=(null==(t=e.description)?void 0:t.toLowerCase().includes(n))||!1;if(!r&&!s)return!1}return!0});return ie.jsxs("div",{className:"flex-1 flex flex-col bg-gradient-to-br from-gray-950 via-black to-gray-950 overflow-hidden",children:[ie.jsx("div",{className:"p-6 border-b border-gray-800/30",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"Projects"}),ie.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your building regulation projects"})]}),ie.jsxs(Du.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!0),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-all duration-300 shadow-lg",children:[ie.jsx(Eh,{className:"w-5 h-5"}),ie.jsx("span",{children:"New Project"})]})]})}),ie.jsx("div",{className:"px-6",children:ie.jsx(MN,{filters:y,onFiltersChange:v,showContextFilter:!0,projectCount:R.length})}),ie.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:0===n.length?ie.jsx(_N,{onCreateProject:()=>o(!0)}):0===R.length?ie.jsxs("div",{className:"text-center py-12 bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-xl",children:[ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No projects match your filters"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your filter criteria or clearing all filters"})]}):ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map((e,n)=>ie.jsx(zw,{project:e,index:n,conversationCount:N(e.id),documentCount:k(e.id),scheduleOfWorksCount:S(e.id),onStartNewChat:t,onEdit:u,onDelete:M,onTogglePin:T,onProjectStatsClick:A,onStatusChange:D},e.id))})}),ie.jsx(Ow,{project:h,isOpen:p,onClose:()=>{f(!1),m(null)},onStartNewChat:(e,n)=>{n?t(e,n):t(e)},user:e,initialTab:g,conversationsHook:j}),ie.jsx(CN,{isOpen:i,onClose:()=>o(!1),newProject:l,setNewProject:c,onCreateProject:()=>ae(void 0,null,function*(){if((null==e?void 0:e.id)&&l.name.trim())try{const{data:t,error:n}=yield Jh.from("projects").insert([{user_id:e.id,name:l.name.trim(),description:l.description.trim()||null,label:l.label,status:"planning",customer_name:l.customer_name.trim()||null,customer_address:l.customer_address.trim()||null,customer_phone:l.customer_phone.trim()||null}]).select().single();if(n)throw n;b({title:"Project created successfully",description:"".concat(l.name," has been added to your projects.")}),c({name:"",description:"",label:"Residential",customer_name:"",customer_address:"",customer_phone:""}),o(!1),E()}catch(t){b({variant:"destructive",title:"Error creating project",description:t.message||"Please try again."})}})}),ie.jsx(PN,{editingProject:d,onClose:()=>u(null),setEditingProject:u,onUpdateProject:()=>ae(void 0,null,function*(){var e,t,n;if(d&&d.name.trim())try{const{error:r}=yield Jh.from("projects").update({name:d.name.trim(),description:d.description.trim()||null,label:d.label,status:d.status,customer_name:(null==(e=d.customer_name)?void 0:e.trim())||null,customer_address:(null==(t=d.customer_address)?void 0:t.trim())||null,customer_phone:(null==(n=d.customer_phone)?void 0:n.trim())||null}).eq("id",d.id);if(r)throw r;b({title:"Project updated successfully",description:"".concat(d.name," has been updated.")}),u(null),E()}catch(r){b({variant:"destructive",title:"Error updating project",description:r.message||"Please try again."})}})})]})};var RN="Radio",[IN,FN]=le(RN),[LN,ON]=IN(RN),zN=st.forwardRef((e,t)=>{const n=e,{__scopeRadio:r,name:s,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d}=n,u=J(n,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[h,m]=st.useState(null),p=de(t,e=>m(e)),f=st.useRef(!1),g=!h||(d||!!h.closest("form"));return ie.jsxs(LN,{scope:r,checked:a,disabled:o,children:[ie.jsx(oe.button,Q(X({type:"button",role:"radio","aria-checked":a,"data-state":qN(a),"data-disabled":o?"":void 0,disabled:o,value:l},u),{ref:p,onClick:he(e.onClick,e=>{a||null==c||c(),g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})})),g&&ie.jsx(UN,{control:h,bubbles:!f.current,name:s,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});zN.displayName=RN;var BN="RadioIndicator",VN=st.forwardRef((e,t)=>{const n=e,{__scopeRadio:r,forceMount:s}=n,a=J(n,["__scopeRadio","forceMount"]),i=ON(BN,r);return ie.jsx(me,{present:s||i.checked,children:ie.jsx(oe.span,Q(X({"data-state":qN(i.checked),"data-disabled":i.disabled?"":void 0},a),{ref:t}))})});VN.displayName=BN;var UN=e=>{const t=e,{control:n,checked:r,bubbles:s=!0}=t,a=J(t,["control","checked","bubbles"]),i=st.useRef(null),o=Zy(r),l=Re(n);return st.useEffect(()=>{const e=i.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==r&&n){const t=new Event("click",{bubbles:s});n.call(e,r),e.dispatchEvent(t)}},[o,r,s]),ie.jsx("input",Q(X({type:"radio","aria-hidden":!0,defaultChecked:r},a),{tabIndex:-1,ref:i,style:Q(X(X({},e.style),l),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function qN(e){return e?"checked":"unchecked"}var WN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HN="RadioGroup",[YN,KN]=le(HN,[De,FN]),GN=De(),XN=FN(),[QN,JN]=YN(HN),ZN=st.forwardRef((e,t)=>{const n=e,{__scopeRadioGroup:r,name:s,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h}=n,m=J(n,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),p=GN(r),f=_e(d),[g,x]=Ee({prop:i,defaultProp:a,onChange:h});return ie.jsx(QN,{scope:r,name:s,required:o,disabled:l,value:g,onValueChange:x,children:ie.jsx(Me,Q(X({asChild:!0},p),{orientation:c,dir:f,loop:u,children:ie.jsx(oe.div,Q(X({role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:f},m),{ref:t}))}))})});ZN.displayName=HN;var $N="RadioGroupItem",ek=st.forwardRef((e,t)=>{const n=e,{__scopeRadioGroup:r,disabled:s}=n,a=J(n,["__scopeRadioGroup","disabled"]),i=JN($N,r),o=i.disabled||s,l=GN(r),c=XN(r),d=st.useRef(null),u=de(t,d),h=i.value===a.value,m=st.useRef(!1);return st.useEffect(()=>{const e=e=>{WN.includes(e.key)&&(m.current=!0)},t=()=>m.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),ie.jsx(Ae,Q(X({asChild:!0},l),{focusable:!o,active:h,children:ie.jsx(zN,Q(X(X({disabled:o,required:i.required,checked:h},c),a),{name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:he(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:he(a.onFocus,()=>{var e;m.current&&(null==(e=d.current)||e.click())})}))}))});ek.displayName=$N;var tk=st.forwardRef((e,t)=>{const n=e,{__scopeRadioGroup:r}=n,s=J(n,["__scopeRadioGroup"]),a=XN(r);return ie.jsx(VN,Q(X(X({},a),s),{ref:t}))});tk.displayName="RadioGroupIndicator";var nk=ZN,rk=ek,sk=tk;const ak=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(nk,Q(X({className:zn("grid gap-2",r)},s),{ref:t}))});ak.displayName=nk.displayName;const ik=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(rk,Q(X({ref:t,className:zn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r)},s),{children:ie.jsx(sk,{className:"flex items-center justify-center",children:ie.jsx(eh,{className:"h-2.5 w-2.5 fill-current text-current"})})}))});ik.displayName=rk.displayName;const ok=({value:e,onChange:t,placeholder:n="Start typing your address...",className:r="",autoFocus:s=!1})=>{const[a,i]=st.useState([]),[o,l]=st.useState(!1),[c,d]=st.useState(!1),[u,h]=st.useState(-1),[m,p]=st.useState(null),[f,g]=st.useState(!1),x=st.useRef(null),y=st.useRef(null);st.useEffect(()=>{const t=setTimeout(()=>{var t;e.trim()&&!f&&(t=e,ae(void 0,null,function*(){if(t.length<3)return i([]),d(!1),void p(null);l(!0),p(null);try{const n=["https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=8&countrycodes=gb&q=".concat(encodeURIComponent(t)),"https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=8&q=".concat(encodeURIComponent(t+" UK"))];let r=[];for(const t of n)try{const e=yield fetch(t);if(e.ok){const t=(yield e.json()).map(e=>({display_name:e.display_name,place_id:e.place_id,lat:e.lat,lon:e.lon}));r=[...r,...t]}}catch(e){}const s=r.filter((e,t,n)=>t===n.findIndex(t=>t.place_id===e.place_id)).slice(0,8);i(s),d(s.length>0),h(-1),0===s.length&&t.length>=3&&p("No addresses found. Please try a different search or enter your address manually below.")}catch(n){p("Unable to search addresses. Please enter your address manually below."),i([]),d(!1)}finally{l(!1)}}))},300);return()=>clearTimeout(t)},[e,f]);const v=e=>{t(e.display_name),d(!1),h(-1),p(null)};return ie.jsxs("div",{className:"space-y-3",children:[ie.jsxs("div",{className:"relative",children:[ie.jsx(cy,{ref:x,type:"text",value:e,onChange:e=>{t(e.target.value)},onKeyDown:e=>{if(c)switch(e.key){case"ArrowDown":e.preventDefault(),h(e=>e<a.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),h(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),u>=0&&v(a[u]);break;case"Escape":d(!1),h(-1)}},onBlur:e=>{setTimeout(()=>{d(!1),h(-1)},200)},onFocus:()=>!f&&a.length>0&&d(!0),className:r,placeholder:f?"Enter your full address manually...":n,autoComplete:"off",autoFocus:s}),ie.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:o?ie.jsx(Du.div,{className:"w-4 h-4 border-2 border-emerald-400/30 border-t-emerald-400 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}):f?ie.jsx(Ch,{className:"w-4 h-4 text-emerald-400/60"}):ie.jsx(Rh,{className:"w-4 h-4 text-emerald-400/60"})})]}),ie.jsx(by,{type:"button",variant:"ghost",onClick:()=>{g(!f),d(!1),p(null),f||t("")},className:"w-full text-emerald-300 hover:text-emerald-200 hover:bg-emerald-500/10 text-sm h-8",children:f?ie.jsxs(ie.Fragment,{children:[ie.jsx(Rh,{className:"w-4 h-4 mr-2"}),"Switch to address lookup"]}):ie.jsxs(ie.Fragment,{children:[ie.jsx(Ch,{className:"w-4 h-4 mr-2"}),"Can't find your address? Enter manually"]})}),m&&!f&&ie.jsxs(Du.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"flex items-start space-x-2 text-amber-400 text-sm bg-amber-400/10 p-3 rounded-lg border border-amber-400/20",children:[ie.jsx(Ju,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),ie.jsx("span",{children:m})]}),ie.jsx(Do,{children:c&&!f&&ie.jsx(Du.div,{ref:y,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-50 w-full bg-gray-800 border border-emerald-500/30 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:a.map((e,t)=>ie.jsx(Du.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.03*t},className:"p-3 cursor-pointer text-sm transition-all duration-150 ".concat(t===u?"bg-emerald-600 text-white":"text-gray-300 hover:bg-gray-700/50"," ").concat(0===t?"rounded-t-lg":""," ").concat(t===a.length-1?"rounded-b-lg":"border-b border-gray-700/50"),onClick:()=>v(e),children:ie.jsxs("div",{className:"flex items-start space-x-3",children:[ie.jsx(wh,{className:"w-4 h-4 text-emerald-400 flex-shrink-0 mt-0.5"}),ie.jsx("span",{className:"leading-relaxed",children:e.display_name})]})},e.place_id))})})]})};function lk(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function ck(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function dk(e,t){const n=lk(e);return isNaN(t)?ck(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function uk(e,t){const n=lk(e);if(isNaN(t))return ck(e,NaN);if(!t)return n;const r=n.getDate(),s=ck(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);return r>=s.getDate()?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const hk=6048e5;let mk={};function pk(){return mk}function fk(e,t){var n,r,s,a,i,o,l,c;const d=pk(),u=null!=(c=null!=(l=null!=(a=null!=(s=null==t?void 0:t.weekStartsOn)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)?a:d.weekStartsOn)?l:null==(o=null==(i=d.locale)?void 0:i.options)?void 0:o.weekStartsOn)?c:0,h=lk(e),m=h.getDay(),p=(m<u?7:0)+m-u;return h.setDate(h.getDate()-p),h.setHours(0,0,0,0),h}function gk(e){return fk(e,{weekStartsOn:1})}function xk(e){const t=lk(e),n=t.getFullYear(),r=ck(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=gk(r),a=ck(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const i=gk(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function yk(e){const t=lk(e);return t.setHours(0,0,0,0),t}function vk(e){const t=lk(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function bk(e,t){const n=yk(e),r=yk(t),s=+n-vk(n),a=+r-vk(r);return Math.round((s-a)/864e5)}function jk(e,t){return dk(e,7*t)}function wk(e,t){return uk(e,12*t)}function Nk(e,t){return+yk(e)===+yk(t)}function kk(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Sk(e,t){const n=lk(e),r=lk(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function Ck(e){const t=lk(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Pk(e){const t=lk(e);return t.setDate(1),t.setHours(0,0,0,0),t}function _k(e){const t=lk(e),n=ck(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ek(e,t){var n,r,s,a,i,o,l,c;const d=pk(),u=null!=(c=null!=(l=null!=(a=null!=(s=null==t?void 0:t.weekStartsOn)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)?a:d.weekStartsOn)?l:null==(o=null==(i=d.locale)?void 0:i.options)?void 0:o.weekStartsOn)?c:0,h=lk(e),m=h.getDay(),p=6+(m<u?-7:0)-(m-u);return h.setDate(h.getDate()+p),h.setHours(23,59,59,999),h}function Tk(e){return Ek(e,{weekStartsOn:1})}const Dk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Mk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Ak={date:Mk({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Mk({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Mk({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Rk={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Ik(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Fk(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var Lk;const Ok={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=Dk[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Ak,formatRelative:(e,t,n,r)=>Rk[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Ik({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Ik({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ik({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Ik({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Ik({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Lk={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(Lk.matchPattern);if(!n)return null;const r=n[0],s=e.match(Lk.parsePattern);if(!s)return null;let a=Lk.valueCallback?Lk.valueCallback(s[0]):s[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(r.length)}}),era:Fk({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Fk({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Fk({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Fk({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Fk({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function zk(e){const t=lk(e),n=+gk(t)-+function(e){const t=xk(e),n=ck(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),gk(n)}(t);return Math.round(n/hk)+1}function Bk(e,t){var n,r,s,a,i,o,l,c;const d=lk(e),u=d.getFullYear(),h=pk(),m=null!=(c=null!=(l=null!=(a=null!=(s=null==t?void 0:t.firstWeekContainsDate)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)?a:h.firstWeekContainsDate)?l:null==(o=null==(i=h.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)?c:1,p=ck(e,0);p.setFullYear(u+1,0,m),p.setHours(0,0,0,0);const f=fk(p,t),g=ck(e,0);g.setFullYear(u,0,m),g.setHours(0,0,0,0);const x=fk(g,t);return d.getTime()>=f.getTime()?u+1:d.getTime()>=x.getTime()?u:u-1}function Vk(e,t){const n=lk(e),r=+fk(n,t)-+function(e,t){var n,r,s,a,i,o,l,c;const d=pk(),u=null!=(c=null!=(l=null!=(a=null!=(s=null==t?void 0:t.firstWeekContainsDate)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)?a:d.firstWeekContainsDate)?l:null==(o=null==(i=d.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)?c:1,h=Bk(e,t),m=ck(e,0);return m.setFullYear(h,0,u),m.setHours(0,0,0,0),fk(m,t)}(n,t);return Math.round(r/hk)+1}function Uk(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const qk={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Uk("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Uk(n+1,2)},d:(e,t)=>Uk(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Uk(e.getHours()%12||12,t.length),H:(e,t)=>Uk(e.getHours(),t.length),m:(e,t)=>Uk(e.getMinutes(),t.length),s:(e,t)=>Uk(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Uk(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Wk="midnight",Hk="noon",Yk="morning",Kk="afternoon",Gk="evening",Xk="night",Qk={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return qk.y(e,t)},Y:function(e,t,n,r){const s=Bk(e,r),a=s>0?s:1-s;if("YY"===t){return Uk(a%100,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):Uk(a,t.length)},R:function(e,t){return Uk(xk(e),t.length)},u:function(e,t){return Uk(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Uk(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Uk(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return qk.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Uk(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=Vk(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):Uk(s,t.length)},I:function(e,t,n){const r=zk(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Uk(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):qk.d(e,t)},D:function(e,t,n){const r=function(e){const t=lk(e);return bk(t,_k(t))+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Uk(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Uk(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Uk(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return Uk(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?Hk:0===r?Wk:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?Gk:r>=12?Kk:r>=4?Yk:Xk,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return qk.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):qk.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Uk(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Uk(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):qk.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):qk.s(e,t)},S:function(e,t){return qk.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Zk(r);case"XXXX":case"XX":return $k(r);default:return $k(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Zk(r);case"xxxx":case"xx":return $k(r);default:return $k(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Jk(r,":");default:return"GMT"+$k(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Jk(r,":");default:return"GMT"+$k(r,":")}},t:function(e,t,n){return Uk(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return Uk(e.getTime(),t.length)}};function Jk(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return 0===a?n+String(s):n+String(s)+t+Uk(a,2)}function Zk(e,t){if(e%60==0){return(e>0?"-":"+")+Uk(Math.abs(e)/60,2)}return $k(e,t)}function $k(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+Uk(Math.trunc(r/60),2)+t+Uk(r%60,2)}const eS=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},tS=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},nS={p:tS,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return eS(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",eS(r,t)).replace("{{time}}",tS(s,t))}},rS=/^D+$/,sS=/^Y+$/,aS=["D","DD","YY","YYYY"];const iS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lS=/^'([^]*?)'?$/,cS=/''/g,dS=/[a-zA-Z]/;function uS(e,t,n){var r,s,a,i,o,l,c,d,u,h,m,p,f,g,x,y,v,b;const j=pk(),w=null!=(s=null!=(r=null==n?void 0:n.locale)?r:j.locale)?s:Ok,N=null!=(h=null!=(u=null!=(l=null!=(o=null==n?void 0:n.firstWeekContainsDate)?o:null==(i=null==(a=null==n?void 0:n.locale)?void 0:a.options)?void 0:i.firstWeekContainsDate)?l:j.firstWeekContainsDate)?u:null==(d=null==(c=j.locale)?void 0:c.options)?void 0:d.firstWeekContainsDate)?h:1,k=null!=(b=null!=(v=null!=(g=null!=(f=null==n?void 0:n.weekStartsOn)?f:null==(p=null==(m=null==n?void 0:n.locale)?void 0:m.options)?void 0:p.weekStartsOn)?g:j.weekStartsOn)?v:null==(y=null==(x=j.locale)?void 0:x.options)?void 0:y.weekStartsOn)?b:0,S=lk(e);if(!function(e){if(!kk(e)&&"number"!=typeof e)return!1;const t=lk(e);return!isNaN(Number(t))}(S))throw new RangeError("Invalid time value");let C=t.match(oS).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,nS[t])(e,w.formatLong)}return e}).join("").match(iS).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:hS(e)};if(Qk[t])return{isToken:!0,value:e};if(t.match(dS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});w.localize.preprocessor&&(C=w.localize.preprocessor(S,C));const P={firstWeekContainsDate:N,weekStartsOn:k,locale:w};return C.map(r=>{if(!r.isToken)return r.value;const s=r.value;(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return sS.test(e)}(s)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return rS.test(e)}(s))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(aS.includes(e))throw new RangeError(r)}(s,t,String(e));return(0,Qk[s[0]])(S,s,w.localize,P)}).join("")}function hS(e){const t=e.match(lS);return t?t[1].replace(cS,"'"):e}function mS(e,t){return function(e,t,n){const r=fk(e,n),s=fk(t,n),a=+r-vk(r),i=+s-vk(s);return Math.round((a-i)/hk)}(function(e){const t=lk(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}(e),Pk(e),t)+1}function pS(e,t){const n=lk(e),r=lk(t);return n.getTime()>r.getTime()}function fS(e,t){return+lk(e)<+lk(t)}function gS(e,t){const n=lk(e),r=lk(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function xS(e,t){return dk(e,-t)}function yS(e,t){const n=lk(e),r=n.getFullYear(),s=n.getDate(),a=ck(e,0);a.setFullYear(r,t,15),a.setHours(0,0,0,0);const i=function(e){const t=lk(e),n=t.getFullYear(),r=t.getMonth(),s=ck(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}(a);return n.setMonth(t,Math.min(s,i)),n}function vS(e,t){const n=lk(e);return isNaN(+n)?ck(e,NaN):(n.setFullYear(t),n)}var bS=function(){return bS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},bS.apply(this,arguments)};function jS(e,t,n){for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function wS(e){return"multiple"===e.mode}function NS(e){return"range"===e.mode}function kS(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var SS={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var CS=Object.freeze({__proto__:null,formatCaption:function(e,t){return uS(e,"LLLL y",t)},formatDay:function(e,t){return uS(e,"d",t)},formatMonthCaption:function(e,t){return uS(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return uS(e,"cccccc",t)},formatYearCaption:function(e,t){return uS(e,"yyyy",t)}}),PS=Object.freeze({__proto__:null,labelDay:function(e,t,n){return uS(e,"do MMMM (EEEE)",n)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return uS(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var _S=st.createContext(void 0);function ES(e){var t,n,r=e.initialProps,s={captionLayout:"buttons",classNames:SS,formatters:CS,labels:PS,locale:Ok,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},a=function(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,a=e.fromDate,i=e.toDate;return r?a=Pk(r):t&&(a=new Date(t,0,1)),s?i=Ck(s):n&&(i=new Date(n,11,31)),{fromDate:a?yk(a):void 0,toDate:i?yk(i):void 0}}(r),i=a.fromDate,o=a.toDate,l=null!==(t=r.captionLayout)&&void 0!==t?t:s.captionLayout;"buttons"===l||i&&o||(l="buttons"),(kS(r)||wS(r)||NS(r))&&(n=r.onSelect);var c=bS(bS(bS({},s),r),{captionLayout:l,classNames:bS(bS({},s.classNames),r.classNames),components:bS({},r.components),formatters:bS(bS({},s.formatters),r.formatters),fromDate:i,labels:bS(bS({},s.labels),r.labels),mode:r.mode||s.mode,modifiers:bS(bS({},s.modifiers),r.modifiers),modifiersClassNames:bS(bS({},s.modifiersClassNames),r.modifiersClassNames),onSelect:n,styles:bS(bS({},s.styles),r.styles),toDate:o});return ie.jsx(_S.Provider,{value:c,children:e.children})}function TS(){var e=st.useContext(_S);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function DS(e){var t=TS(),n=t.locale,r=t.classNames,s=t.styles,a=t.formatters.formatCaption;return ie.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:n})})}function MS(e){return ie.jsx("svg",bS({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:ie.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function AS(e){var t,n,r=e.onChange,s=e.value,a=e.children,i=e.caption,o=e.className,l=e.style,c=TS(),d=null!==(n=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==n?n:MS;return ie.jsxs("div",{className:o,style:l,children:[ie.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),ie.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:s,onChange:r,children:a}),ie.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,ie.jsx(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function RS(e){var t,n=TS(),r=n.fromDate,s=n.toDate,a=n.styles,i=n.locale,o=n.formatters.formatMonthCaption,l=n.classNames,c=n.components,d=n.labels.labelMonthDropdown;if(!r)return ie.jsx(ie.Fragment,{});if(!s)return ie.jsx(ie.Fragment,{});var u=[];if(function(e,t){const n=lk(e),r=lk(t);return n.getFullYear()===r.getFullYear()}(r,s))for(var h=Pk(r),m=r.getMonth();m<=s.getMonth();m++)u.push(yS(h,m));else for(h=Pk(new Date),m=0;m<=11;m++)u.push(yS(h,m));var p=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:AS;return ie.jsx(p,{name:"months","aria-label":d(),className:l.dropdown_month,style:a.dropdown_month,onChange:function(t){var n=Number(t.target.value),r=yS(Pk(e.displayMonth),n);e.onChange(r)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:i}),children:u.map(function(e){return ie.jsx("option",{value:e.getMonth(),children:o(e,{locale:i})},e.getMonth())})})}function IS(e){var t,n=e.displayMonth,r=TS(),s=r.fromDate,a=r.toDate,i=r.locale,o=r.styles,l=r.classNames,c=r.components,d=r.formatters.formatYearCaption,u=r.labels.labelYearDropdown,h=[];if(!s)return ie.jsx(ie.Fragment,{});if(!a)return ie.jsx(ie.Fragment,{});for(var m=s.getFullYear(),p=a.getFullYear(),f=m;f<=p;f++)h.push(vS(_k(new Date),f));var g=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:AS;return ie.jsx(g,{name:"years","aria-label":u(),className:l.dropdown_year,style:o.dropdown_year,onChange:function(t){var r=vS(Pk(n),Number(t.target.value));e.onChange(r)},value:n.getFullYear(),caption:d(n,{locale:i}),children:h.map(function(e){return ie.jsx("option",{value:e.getFullYear(),children:d(e,{locale:i})},e.getFullYear())})})}function FS(){var e=TS(),t=function(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,a=e.toDate,i=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return a&&Sk(a,s)<0&&(s=uk(a,-1*(l-1))),i&&Sk(s,i)<0&&(s=i),Pk(s)}(e),n=function(e,t){var n=st.useState(e),r=n[0];return[void 0===t?r:t,n[1]]}(t,e.month),r=n[0],s=n[1];return[r,function(t){var n;if(!e.disableNavigation){var r=Pk(t);s(r),null===(n=e.onMonthChange)||void 0===n||n.call(e,r)}}]}var LS=st.createContext(void 0);function OS(e){var t=TS(),n=FS(),r=n[0],s=n[1],a=function(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=Pk(e),a=Sk(Pk(uk(s,r)),s),i=[],o=0;o<a;o++){var l=uk(s,o);i.push(l)}return n&&(i=i.reverse()),i}(r,t),i=function(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,a=void 0===s?1:s,i=r?a:1,o=Pk(e);if(!n)return uk(o,i);if(!(Sk(n,e)<a))return uk(o,i)}}(r,t),o=function(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,a=r?void 0===s?1:s:1,i=Pk(e);if(!n)return uk(i,-a);if(!(Sk(i,n)<=0))return uk(i,-a)}}(r,t),l=function(e){return a.some(function(t){return gS(e,t)})},c={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:function(e,n){l(e)||(n&&fS(e,n)?s(uk(e,1+-1*t.numberOfMonths)):s(e))},previousMonth:o,nextMonth:i,isDateDisplayed:l};return ie.jsx(LS.Provider,{value:c,children:e.children})}function zS(){var e=st.useContext(LS);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function BS(e){var t,n=TS(),r=n.classNames,s=n.styles,a=n.components,i=zS().goToMonth,o=function(t){i(uk(t,e.displayIndex?-e.displayIndex:0))},l=null!==(t=null==a?void 0:a.CaptionLabel)&&void 0!==t?t:DS,c=ie.jsx(l,{id:e.id,displayMonth:e.displayMonth});return ie.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[ie.jsx("div",{className:r.vhidden,children:c}),ie.jsx(RS,{onChange:o,displayMonth:e.displayMonth}),ie.jsx(IS,{onChange:o,displayMonth:e.displayMonth})]})}function VS(e){return ie.jsx("svg",bS({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:ie.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function US(e){return ie.jsx("svg",bS({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:ie.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var qS=st.forwardRef(function(e,t){var n=TS(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var i=a.join(" "),o=bS(bS({},s.button_reset),s.button);return e.style&&Object.assign(o,e.style),ie.jsx("button",bS({},e,{ref:t,type:"button",className:i,style:o}))});function WS(e){var t,n,r=TS(),s=r.dir,a=r.locale,i=r.classNames,o=r.styles,l=r.labels,c=l.labelPrevious,d=l.labelNext,u=r.components;if(!e.nextMonth&&!e.previousMonth)return ie.jsx(ie.Fragment,{});var h=c(e.previousMonth,{locale:a}),m=[i.nav_button,i.nav_button_previous].join(" "),p=d(e.nextMonth,{locale:a}),f=[i.nav_button,i.nav_button_next].join(" "),g=null!==(t=null==u?void 0:u.IconRight)&&void 0!==t?t:US,x=null!==(n=null==u?void 0:u.IconLeft)&&void 0!==n?n:VS;return ie.jsxs("div",{className:i.nav,style:o.nav,children:[!e.hidePrevious&&ie.jsx(qS,{name:"previous-month","aria-label":h,className:m,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===s?ie.jsx(g,{className:i.nav_icon,style:o.nav_icon}):ie.jsx(x,{className:i.nav_icon,style:o.nav_icon})}),!e.hideNext&&ie.jsx(qS,{name:"next-month","aria-label":p,className:f,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===s?ie.jsx(x,{className:i.nav_icon,style:o.nav_icon}):ie.jsx(g,{className:i.nav_icon,style:o.nav_icon})})]})}function HS(e){var t=TS().numberOfMonths,n=zS(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,i=n.displayMonths,o=i.findIndex(function(t){return gS(e.displayMonth,t)}),l=0===o,c=o===i.length-1,d=t>1&&(l||!c),u=t>1&&(c||!l);return ie.jsx(WS,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:s,previousMonth:r,onPreviousClick:function(){r&&a(r)},onNextClick:function(){s&&a(s)}})}function YS(e){var t,n,r=TS(),s=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=null!==(t=null==l?void 0:l.CaptionLabel)&&void 0!==t?t:DS;return n=a?ie.jsx(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?ie.jsx(BS,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?ie.jsxs(ie.Fragment,{children:[ie.jsx(BS,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),ie.jsx(HS,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):ie.jsxs(ie.Fragment,{children:[ie.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),ie.jsx(HS,{displayMonth:e.displayMonth,id:e.id})]}),ie.jsx("div",{className:s.caption,style:i.caption,children:n})}function KS(e){var t=TS(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?ie.jsx("tfoot",{className:s,style:r.tfoot,children:ie.jsx("tr",{children:ie.jsx("td",{colSpan:8,children:n})})}):ie.jsx(ie.Fragment,{})}function GS(){var e=TS(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,i=e.ISOWeek,o=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,c=function(e,t,n){for(var r=n?gk(new Date):fk(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var i=dk(r,a);s.push(i)}return s}(s,a,i);return ie.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&ie.jsx("td",{style:n.head_cell,className:t.head_cell}),c.map(function(e,r){return ie.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":l(e,{locale:s}),children:o(e,{locale:s})},r)})]})}function XS(){var e,t=TS(),n=t.classNames,r=t.styles,s=t.components,a=null!==(e=null==s?void 0:s.HeadRow)&&void 0!==e?e:GS;return ie.jsx("thead",{style:r.head,className:n.head,children:ie.jsx(a,{})})}function QS(e){var t=TS(),n=t.locale,r=t.formatters.formatDay;return ie.jsx(ie.Fragment,{children:r(e.date,{locale:n})})}var JS=st.createContext(void 0);function ZS(e){if(!wS(e.initialProps)){return ie.jsx(JS.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return ie.jsx($S,{initialProps:e.initialProps,children:e.children})}function $S(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,a=t.max,i={disabled:[]};r&&i.disabled.push(function(e){var t=a&&r.length>a-1,n=r.some(function(t){return Nk(t,e)});return Boolean(t&&!n)});var o={selected:r,onDayClick:function(e,n,i){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,n,i),!Boolean(n.selected&&s&&(null==r?void 0:r.length)===s))&&!Boolean(!n.selected&&a&&(null==r?void 0:r.length)===a)){var c=r?jS([],r):[];if(n.selected){var d=c.findIndex(function(t){return Nk(e,t)});c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,n,i)}},modifiers:i};return ie.jsx(JS.Provider,{value:o,children:n})}function eC(){var e=st.useContext(JS);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var tC,nC,rC=st.createContext(void 0);function sC(e){if(!NS(e.initialProps)){return ie.jsx(rC.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return ie.jsx(aC,{initialProps:e.initialProps,children:e.children})}function aC(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},a=s.from,i=s.to,o=t.min,l=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(c.range_start=[a],i?(c.range_end=[i],Nk(a,i)||(c.range_middle=[{after:a,before:i}])):c.range_end=[a]):i&&(c.range_start=[i],c.range_end=[i]),o&&(a&&!i&&c.disabled.push({after:xS(a,o-1),before:dk(a,o-1)}),a&&i&&c.disabled.push({after:a,before:dk(a,o-1)}),!a&&i&&c.disabled.push({after:xS(i,o-1),before:dk(i,o-1)})),l){if(a&&!i&&(c.disabled.push({before:dk(a,1-l)}),c.disabled.push({after:dk(a,l-1)})),a&&i){var d=l-(bk(i,a)+1);c.disabled.push({before:xS(a,d)}),c.disabled.push({after:dk(i,d)})}!a&&i&&(c.disabled.push({before:dk(i,1-l)}),c.disabled.push({after:dk(i,l-1)}))}return ie.jsx(rC.Provider,{value:{selected:r,onDayClick:function(e,n,s){var a,i;null===(a=t.onDayClick)||void 0===a||a.call(t,e,n,s);var o=function(e,t){var n=t||{},r=n.from,s=n.to;if(r&&s){if(Nk(s,e)&&Nk(r,e))return;if(Nk(s,e))return{from:s,to:void 0};if(Nk(r,e))return;return pS(r,e)?{from:e,to:s}:{from:r,to:e}}return s?pS(e,s)?{from:s,to:e}:{from:e,to:s}:r?fS(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}(e,r);null===(i=t.onSelect)||void 0===i||i.call(t,o,e,n,s)},modifiers:c},children:n})}function iC(){var e=st.useContext(rC);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function oC(e){return Array.isArray(e)?jS([],e):void 0!==e?[e]:[]}(nC=tC||(tC={})).Outside="outside",nC.Disabled="disabled",nC.Selected="selected",nC.Hidden="hidden",nC.Today="today",nC.RangeStart="range_start",nC.RangeEnd="range_end",nC.RangeMiddle="range_middle";var lC=tC.Selected,cC=tC.Disabled,dC=tC.Hidden,uC=tC.Today,hC=tC.RangeEnd,mC=tC.RangeMiddle,pC=tC.RangeStart,fC=tC.Outside;var gC=st.createContext(void 0);function xC(e){var t=TS(),n=function(e,t,n){var r,s=((r={})[lC]=oC(e.selected),r[cC]=oC(e.disabled),r[dC]=oC(e.hidden),r[uC]=[e.today],r[hC]=[],r[mC]=[],r[pC]=[],r[fC]=[],r);return e.fromDate&&s[cC].push({before:e.fromDate}),e.toDate&&s[cC].push({after:e.toDate}),wS(e)?s[cC]=s[cC].concat(t.modifiers[cC]):NS(e)&&(s[cC]=s[cC].concat(n.modifiers[cC]),s[pC]=n.modifiers[pC],s[mC]=n.modifiers[mC],s[hC]=n.modifiers[hC]),s}(t,eC(),iC()),r=function(e){var t={};return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t[n]=oC(r)}),t}(t.modifiers),s=bS(bS({},n),r);return ie.jsx(gC.Provider,{value:s,children:e.children})}function yC(){var e=st.useContext(gC);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function vC(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(kk(t))return Nk(e,t);var n,r,s,a,i;if(function(e){return Array.isArray(e)&&e.every(kk)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return n=e,a=(r=t).from,i=r.to,a&&i?(bk(i,a)<0&&(a=(s=[i,a])[0],i=s[1]),bk(n,a)>=0&&bk(i,n)>=0):i?Nk(i,n):!!a&&Nk(a,n);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var o=bk(t.before,e)>0,l=bk(t.after,e)<0;return pS(t.before,t.after)?l&&o:o||l}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?bk(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?bk(t.before,e)>0:"function"==typeof t&&t(e)})}function bC(e,t,n){var r=Object.keys(t).reduce(function(n,r){var s=t[r];return vC(e,s)&&n.push(r),n},[]),s={};return r.forEach(function(e){return s[e]=!0}),n&&!gS(e,n)&&(s.outside=!0),s}function jC(e,t){var n=t.moveBy,r=t.direction,s=t.context,a=t.modifiers,i=t.retry,o=void 0===i?{count:0,lastFocused:e}:i,l=s.weekStartsOn,c=s.fromDate,d=s.toDate,u=s.locale,h={day:dk,week:jk,month:uk,year:wk,startOfWeek:function(e){return s.ISOWeek?gk(e):fk(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return s.ISOWeek?Tk(e):Ek(e,{locale:u,weekStartsOn:l})}}[n](e,"after"===r?1:-1);"before"===r&&c?h=function(e){let t;return e.forEach(function(e){const n=lk(e);(void 0===t||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}([c,h]):"after"===r&&d&&(h=function(e){let t;return e.forEach(e=>{const n=lk(e);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}([d,h]));var m=!0;if(a){var p=bC(h,a);m=!p.disabled&&!p.hidden}return m?h:o.count>365?o.lastFocused:jC(h,{moveBy:n,direction:r,context:s,modifiers:a,retry:bS(bS({},o),{count:o.count+1})})}var wC=st.createContext(void 0);function NC(e){var t=zS(),n=yC(),r=st.useState(),s=r[0],a=r[1],i=st.useState(),o=i[0],l=i[1],c=function(e,t){for(var n,r,s=Pk(e[0]),a=Ck(e[e.length-1]),i=s;i<=a;){var o=bC(i,t);if(o.disabled||o.hidden)i=dk(i,1);else{if(o.selected)return i;o.today&&!r&&(r=i),n||(n=i),i=dk(i,1)}}return r||n}(t.displayMonths,n),d=(null!=s?s:o&&t.isDateDisplayed(o))?o:c,u=function(e){a(e)},h=TS(),m=function(e,r){if(s){var a=jC(s,{moveBy:e,direction:r,context:h,modifiers:n});Nk(s,a)||(t.goToDate(a,s),u(a))}},p={focusedDay:s,focusTarget:d,blur:function(){l(s),a(void 0)},focus:u,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return ie.jsx(wC.Provider,{value:p,children:e.children})}function kC(){var e=st.useContext(wC);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var SC=st.createContext(void 0);function CC(e){if(!kS(e.initialProps)){return ie.jsx(SC.Provider,{value:{selected:void 0},children:e.children})}return ie.jsx(PC,{initialProps:e.initialProps,children:e.children})}function PC(e){var t=e.initialProps,n=e.children,r={selected:t.selected,onDayClick:function(e,n,r){var s,a,i;null===(s=t.onDayClick)||void 0===s||s.call(t,e,n,r),!n.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,n,r):null===(a=t.onSelect)||void 0===a||a.call(t,void 0,e,n,r)}};return ie.jsx(SC.Provider,{value:r,children:n})}function _C(){var e=st.useContext(SC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function EC(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(t){var r=e.modifiersClassNames[t];if(r)n.push(r);else if(function(e){return Object.values(tC).includes(e)}(t)){var s=e.classNames["day_".concat(t)];s&&n.push(s)}}),n}function TC(e,t,n){var r,s,a,i=TS(),o=kC(),l=function(e,t){return bC(e,yC(),t)}(e,t),c=function(e,t){var n=TS(),r=_C(),s=eC(),a=iC(),i=kC(),o=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,h=i.focus,m=i.focusMonthBefore,p=i.focusMonthAfter,f=i.focusYearBefore,g=i.focusYearAfter,x=i.focusStartOfWeek,y=i.focusEndOfWeek;return{onClick:function(i){var o,l,c,d;kS(n)?null===(o=r.onDayClick)||void 0===o||o.call(r,e,t,i):wS(n)?null===(l=s.onDayClick)||void 0===l||l.call(s,e,t,i):NS(n)?null===(c=a.onDayClick)||void 0===c||c.call(a,e,t,i):null===(d=n.onDayClick)||void 0===d||d.call(n,e,t,i)},onFocus:function(r){var s;h(e),null===(s=n.onDayFocus)||void 0===s||s.call(n,e,t,r)},onBlur:function(r){var s;u(),null===(s=n.onDayBlur)||void 0===s||s.call(n,e,t,r)},onKeyDown:function(r){var s;switch(r.key){case"ArrowLeft":r.preventDefault(),r.stopPropagation(),"rtl"===n.dir?o():l();break;case"ArrowRight":r.preventDefault(),r.stopPropagation(),"rtl"===n.dir?l():o();break;case"ArrowDown":r.preventDefault(),r.stopPropagation(),c();break;case"ArrowUp":r.preventDefault(),r.stopPropagation(),d();break;case"PageUp":r.preventDefault(),r.stopPropagation(),r.shiftKey?f():m();break;case"PageDown":r.preventDefault(),r.stopPropagation(),r.shiftKey?g():p();break;case"Home":r.preventDefault(),r.stopPropagation(),x();break;case"End":r.preventDefault(),r.stopPropagation(),y()}null===(s=n.onDayKeyDown)||void 0===s||s.call(n,e,t,r)},onKeyUp:function(r){var s;null===(s=n.onDayKeyUp)||void 0===s||s.call(n,e,t,r)},onMouseEnter:function(r){var s;null===(s=n.onDayMouseEnter)||void 0===s||s.call(n,e,t,r)},onMouseLeave:function(r){var s;null===(s=n.onDayMouseLeave)||void 0===s||s.call(n,e,t,r)},onPointerEnter:function(r){var s;null===(s=n.onDayPointerEnter)||void 0===s||s.call(n,e,t,r)},onPointerLeave:function(r){var s;null===(s=n.onDayPointerLeave)||void 0===s||s.call(n,e,t,r)},onTouchCancel:function(r){var s;null===(s=n.onDayTouchCancel)||void 0===s||s.call(n,e,t,r)},onTouchEnd:function(r){var s;null===(s=n.onDayTouchEnd)||void 0===s||s.call(n,e,t,r)},onTouchMove:function(r){var s;null===(s=n.onDayTouchMove)||void 0===s||s.call(n,e,t,r)},onTouchStart:function(r){var s;null===(s=n.onDayTouchStart)||void 0===s||s.call(n,e,t,r)}}}(e,l),d=function(){var e=TS(),t=_C(),n=eC(),r=iC();return kS(e)?t.selected:wS(e)?n.selected:NS(e)?r.selected:void 0}(),u=Boolean(i.onDayClick||"default"!==i.mode);st.useEffect(function(){var t;l.outside||o.focusedDay&&u&&Nk(o.focusedDay,e)&&(null===(t=n.current)||void 0===t||t.focus())},[o.focusedDay,e,n,u,l.outside]);var h=EC(i,l).join(" "),m=function(e,t){var n=bS({},e.styles.day);return Object.keys(t).forEach(function(t){var r;n=bS(bS({},n),null===(r=e.modifiersStyles)||void 0===r?void 0:r[t])}),n}(i,l),p=Boolean(l.outside&&!i.showOutsideDays||l.hidden),f=null!==(a=null===(s=i.components)||void 0===s?void 0:s.DayContent)&&void 0!==a?a:QS,g={style:m,className:h,children:ie.jsx(f,{date:e,displayMonth:t,activeModifiers:l}),role:"gridcell"},x=o.focusTarget&&Nk(o.focusTarget,e)&&!l.outside,y=o.focusedDay&&Nk(o.focusedDay,e),v=bS(bS(bS({},g),((r={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,r.tabIndex=y||x?0:-1,r)),c);return{isButton:u,isHidden:p,activeModifiers:l,selectedDays:d,buttonProps:v,divProps:g}}function DC(e){var t=st.useRef(null),n=TC(e.date,e.displayMonth,t);return n.isHidden?ie.jsx("div",{role:"gridcell"}):n.isButton?ie.jsx(qS,bS({name:"day",ref:t},n.buttonProps)):ie.jsx("div",bS({},n.divProps))}function MC(e){var t=e.number,n=e.dates,r=TS(),s=r.onWeekNumberClick,a=r.styles,i=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,c=(0,r.formatters.formatWeekNumber)(Number(t),{locale:o});if(!s)return ie.jsx("span",{className:i.weeknumber,style:a.weeknumber,children:c});var d=l(Number(t),{locale:o});return ie.jsx(qS,{name:"week-number","aria-label":d,className:i.weeknumber,style:a.weeknumber,onClick:function(e){s(t,n,e)},children:c})}function AC(e){var t,n,r,s=TS(),a=s.styles,i=s.classNames,o=s.showWeekNumber,l=s.components,c=null!==(t=null==l?void 0:l.Day)&&void 0!==t?t:DC,d=null!==(n=null==l?void 0:l.WeekNumber)&&void 0!==n?n:MC;return o&&(r=ie.jsx("td",{className:i.cell,style:a.cell,children:ie.jsx(d,{number:e.weekNumber,dates:e.dates})})),ie.jsxs("tr",{className:i.row,style:a.row,children:[r,e.dates.map(function(t){return ie.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:ie.jsx(c,{displayMonth:e.displayMonth,date:t})},function(e){return Math.trunc(+lk(e)/1e3)}(t))})]})}function RC(e,t,n){for(var r=(null==n?void 0:n.ISOWeek)?Tk(t):Ek(t,n),s=(null==n?void 0:n.ISOWeek)?gk(e):fk(e,n),a=bk(r,s),i=[],o=0;o<=a;o++)i.push(dk(s,o));return i.reduce(function(e,t){var r=(null==n?void 0:n.ISOWeek)?zk(t):Vk(t,n),s=e.find(function(e){return e.weekNumber===r});return s?(s.dates.push(t),e):(e.push({weekNumber:r,dates:[t]}),e)},[])}function IC(e){var t,n,r,s=TS(),a=s.locale,i=s.classNames,o=s.styles,l=s.hideHead,c=s.fixedWeeks,d=s.components,u=s.weekStartsOn,h=s.firstWeekContainsDate,m=s.ISOWeek,p=function(e,t){var n=RC(Pk(e),Ck(e),t);if(null==t?void 0:t.useFixedWeeks){var r=mS(e,t);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],i=jk(a,6-r),o=RC(jk(a,1),i,t);n.push.apply(n,o)}}return n}(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:m,locale:a,weekStartsOn:u,firstWeekContainsDate:h}),f=null!==(t=null==d?void 0:d.Head)&&void 0!==t?t:XS,g=null!==(n=null==d?void 0:d.Row)&&void 0!==n?n:AC,x=null!==(r=null==d?void 0:d.Footer)&&void 0!==r?r:KS;return ie.jsxs("table",{id:e.id,className:i.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&ie.jsx(f,{}),ie.jsx("tbody",{className:i.tbody,style:o.tbody,children:p.map(function(t){return ie.jsx(g,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),ie.jsx(x,{displayMonth:e.displayMonth})]})}var FC="undefined"!=typeof window&&window.document&&window.document.createElement?st.useLayoutEffect:st.useEffect,LC=!1,OC=0;function zC(){return"react-day-picker-".concat(++OC)}function BC(e){var t,n,r=TS(),s=r.dir,a=r.classNames,i=r.styles,o=r.components,l=zS().displayMonths,c=function(e){var t,n=null!=e?e:LC?zC():null,r=st.useState(n),s=r[0],a=r[1];return FC(function(){null===s&&a(zC())},[]),st.useEffect(function(){!1===LC&&(LC=!0)},[]),null!==(t=null!=e?e:s)&&void 0!==t?t:void 0}(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,u=[a.month],h=i.month,m=0===e.displayIndex,p=e.displayIndex===l.length-1,f=!m&&!p;"rtl"===s&&(p=(t=[m,p])[0],m=t[1]),m&&(u.push(a.caption_start),h=bS(bS({},h),i.caption_start)),p&&(u.push(a.caption_end),h=bS(bS({},h),i.caption_end)),f&&(u.push(a.caption_between),h=bS(bS({},h),i.caption_between));var g=null!==(n=null==o?void 0:o.Caption)&&void 0!==n?n:YS;return ie.jsxs("div",{className:u.join(" "),style:h,children:[ie.jsx(g,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),ie.jsx(IC,{id:d,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function VC(e){var t=TS(),n=t.classNames,r=t.styles;return ie.jsx("div",{className:n.months,style:r.months,children:e.children})}function UC(e){var t,n,r=e.initialProps,s=TS(),a=kC(),i=zS(),o=st.useState(!1),l=o[0],c=o[1];st.useEffect(function(){s.initialFocus&&a.focusTarget&&(l||(a.focus(a.focusTarget),c(!0)))},[s.initialFocus,l,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var u=bS(bS({},s.styles.root),s.style),h=Object.keys(r).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var n;return bS(bS({},e),((n={})[t]=r[t],n))},{}),m=null!==(n=null===(t=r.components)||void 0===t?void 0:t.Months)&&void 0!==n?n:VC;return ie.jsx("div",bS({className:d.join(" "),style:u,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:ie.jsx(m,{children:i.displayMonths.map(function(e,t){return ie.jsx(BC,{displayIndex:t,displayMonth:e},t)})})}))}function qC(e){var t=e.children,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["children"]);return ie.jsx(ES,{initialProps:n,children:ie.jsx(OS,{children:ie.jsx(CC,{initialProps:n,children:ie.jsx(ZS,{initialProps:n,children:ie.jsx(sC,{initialProps:n,children:ie.jsx(xC,{children:ie.jsx(NC,{children:t})})})})})})})}function WC(e){return ie.jsx(qC,bS({},e,{children:ie.jsx(UC,{initialProps:e})}))}function HC(e){var t=e,{className:n,classNames:r,showOutsideDays:s=!0}=t,a=J(t,["className","classNames","showOutsideDays"]);return ie.jsx(WC,X({showOutsideDays:s,className:zn("p-3",n),classNames:X({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:zn(vy({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:zn(vy({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},r),components:{IconLeft:e=>{J(e,[]);return ie.jsx(Gu,{className:"h-4 w-4"})},IconRight:e=>{J(e,[]);return ie.jsx(Xu,{className:"h-4 w-4"})}}},a))}HC.displayName="Calendar";var YC="Popover",[KC,GC]=le(YC,[ce]),XC=ce(),[QC,JC]=KC(YC),ZC=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,o=XC(t),l=st.useRef(null),[c,d]=st.useState(!1),[u=!1,h]=Ee({prop:r,defaultProp:s,onChange:a});return ie.jsx(Te,Q(X({},o),{children:ie.jsx(QC,{scope:t,contentId:Se(),triggerRef:l,open:u,onOpenChange:h,onOpenToggle:st.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:c,onCustomAnchorAdd:st.useCallback(()=>d(!0),[]),onCustomAnchorRemove:st.useCallback(()=>d(!1),[]),modal:i,children:n})}))};ZC.displayName=YC;var $C="PopoverAnchor";st.forwardRef((e,t)=>{const n=e,{__scopePopover:r}=n,s=J(n,["__scopePopover"]),a=JC($C,r),i=XC(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return st.useEffect(()=>(o(),()=>l()),[o,l]),ie.jsx(ue,Q(X(X({},i),s),{ref:t}))}).displayName=$C;var eP="PopoverTrigger",tP=st.forwardRef((e,t)=>{const n=e,{__scopePopover:r}=n,s=J(n,["__scopePopover"]),a=JC(eP,r),i=XC(r),o=de(t,a.triggerRef),l=ie.jsx(oe.button,Q(X({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":hP(a.open)},s),{ref:o,onClick:he(e.onClick,a.onOpenToggle)}));return a.hasCustomAnchor?l:ie.jsx(ue,Q(X({asChild:!0},i),{children:l}))});tP.displayName=eP;var nP="PopoverPortal",[rP,sP]=KC(nP,{forceMount:void 0}),aP=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=JC(nP,t);return ie.jsx(rP,{scope:t,forceMount:n,children:ie.jsx(me,{present:n||a.open,children:ie.jsx(Pe,{asChild:!0,container:s,children:r})})})};aP.displayName=nP;var iP="PopoverContent",oP=st.forwardRef((e,t)=>{const n=sP(iP,e.__scopePopover),r=e,{forceMount:s=n.forceMount}=r,a=J(r,["forceMount"]),i=JC(iP,e.__scopePopover);return ie.jsx(me,{present:s||i.open,children:i.modal?ie.jsx(lP,Q(X({},a),{ref:t})):ie.jsx(cP,Q(X({},a),{ref:t}))})});oP.displayName=iP;var lP=st.forwardRef((e,t)=>{const n=JC(iP,e.__scopePopover),r=st.useRef(null),s=de(t,r),a=st.useRef(!1);return st.useEffect(()=>{const e=r.current;if(e)return je(e)},[]),ie.jsx(Ne,{as:ye,allowPinchZoom:!0,children:ie.jsx(dP,Q(X({},e),{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),a.current||null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:he(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})}))})}),cP=st.forwardRef((e,t)=>{const n=JC(iP,e.__scopePopover),r=st.useRef(!1),s=st.useRef(!1);return ie.jsx(dP,Q(X({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,i;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(r.current||null==(i=n.triggerRef.current)||i.focus(),t.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:t=>{var a,i;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const o=t.target;(null==(i=n.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}}))}),dP=st.forwardRef((e,t)=>{const n=e,{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u}=n,h=J(n,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),m=JC(iP,r),p=XC(r);return we(),ie.jsx(ke,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:ie.jsx(pe,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:ie.jsx(fe,Q(X(X({"data-state":hP(m.open),role:"dialog",id:m.contentId},p),h),{ref:t,style:X(X({},h.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),uP="PopoverClose";st.forwardRef((e,t)=>{const n=e,{__scopePopover:r}=n,s=J(n,["__scopePopover"]),a=JC(uP,r);return ie.jsx(oe.button,Q(X({type:"button"},s),{ref:t,onClick:he(e.onClick,()=>a.onOpenChange(!1))}))}).displayName=uP;function hP(e){return e?"open":"closed"}st.forwardRef((e,t)=>{const n=e,{__scopePopover:r}=n,s=J(n,["__scopePopover"]),a=XC(r);return ie.jsx(xe,Q(X(X({},a),s),{ref:t}))}).displayName="PopoverArrow";var mP=aP,pP=oP;const fP=ZC,gP=tP,xP=st.forwardRef((e,t)=>{var n=e,{className:r,align:s="center",sideOffset:a=4}=n,i=J(n,["className","align","sideOffset"]);return ie.jsx(mP,{children:ie.jsx(pP,X({ref:t,align:s,sideOffset:a,className:zn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},i))})});xP.displayName=pP.displayName;const yP=({value:e,onChange:t,className:n,placeholder:r="Select your date of birth"})=>{const[s,a]=st.useState(e?new Date(e):void 0),[i,o]=st.useState(s||new Date(1990,0)),l=(new Date).getFullYear(),c=Array.from({length:l-1900+1},(e,t)=>l-t);return ie.jsxs(fP,{children:[ie.jsx(gP,{asChild:!0,children:ie.jsxs(by,{variant:"outline",className:zn("w-full justify-between text-left font-normal h-12 bg-gray-800/50 border-emerald-500/30 hover:bg-gray-700/50 hover:border-emerald-400/50 transition-all duration-200",!s&&"text-gray-400",s&&"text-white",n),children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx(Hu,{className:"h-5 w-5 text-emerald-400"}),ie.jsx("span",{className:"text-base",children:s?uS(s,"MMMM dd, yyyy"):r})]}),ie.jsx(Ku,{className:"h-4 w-4 opacity-50"})]})}),ie.jsx(xP,{className:"w-auto p-0 bg-gray-800 border-emerald-500/30 shadow-2xl",align:"start",sideOffset:8,children:ie.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[ie.jsxs("div",{className:"mb-4 text-center",children:[ie.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Select Date"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Choose your date of birth"})]}),ie.jsxs("div",{className:"flex gap-2 mb-4",children:[ie.jsxs(mb,{value:i.getMonth().toString(),onValueChange:e=>{const t=new Date(i.getFullYear(),parseInt(e));o(t)},children:[ie.jsx(fb,{className:"bg-gray-700 border-gray-600 text-white",children:ie.jsx(pb,{})}),ie.jsx(yb,{className:"bg-gray-700 border-gray-600",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>ie.jsx(vb,{value:t.toString(),className:"text-white hover:bg-gray-600",children:e},t))})]}),ie.jsxs(mb,{value:i.getFullYear().toString(),onValueChange:e=>{const t=new Date(parseInt(e),i.getMonth());o(t)},children:[ie.jsx(fb,{className:"bg-gray-700 border-gray-600 text-white",children:ie.jsx(pb,{})}),ie.jsx(yb,{className:"bg-gray-700 border-gray-600 max-h-48",children:c.map(e=>ie.jsx(vb,{value:e.toString(),className:"text-white hover:bg-gray-600",children:e},e))})]})]}),ie.jsx(HC,{mode:"single",selected:s,onSelect:e=>{e&&(a(e),t(uS(e,"yyyy-MM-dd")))},month:i,onMonthChange:o,disabled:e=>e>new Date||e<new Date("1900-01-01"),initialFocus:!0,className:"pointer-events-auto",classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center text-white mb-4",caption_label:"text-lg font-semibold text-white",nav:"space-x-1 flex items-center",nav_button:zn("h-8 w-8 bg-gray-700 hover:bg-emerald-600 p-0 opacity-80 hover:opacity-100 text-white rounded-md transition-all duration-200 border border-gray-600 hover:border-emerald-500"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex mb-2",head_cell:"text-emerald-300 rounded-md w-10 font-medium text-sm uppercase tracking-wider",row:"flex w-full mt-2",cell:"h-10 w-10 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-emerald-500/50 [&:has([aria-selected])]:bg-emerald-500/20 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:zn("h-10 w-10 p-0 font-medium aria-selected:opacity-100 text-white hover:bg-emerald-500/30 rounded-md transition-all duration-200 border border-transparent hover:border-emerald-400/50"),day_range_end:"day-range-end",day_selected:"bg-emerald-500 text-black hover:bg-emerald-600 hover:text-black focus:bg-emerald-500 focus:text-black border-emerald-400 font-bold shadow-lg",day_today:"bg-gray-700 text-emerald-400 border-emerald-400/50 font-semibold",day_outside:"day-outside text-gray-500 opacity-50 aria-selected:bg-emerald-500/50 aria-selected:text-gray-500 aria-selected:opacity-30",day_disabled:"text-gray-600 opacity-30 cursor-not-allowed",day_range_middle:"aria-selected:bg-emerald-500/20 aria-selected:text-white",day_hidden:"invisible"}}),ie.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:ie.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Select a date between 1900 and today"})})]})})]})},vP=["Architect","Building Inspector","Building Regulations Inspector","Building Control Officer","Builder","Construction Manager","Structural Engineer","Civil Engineer","Quantity Surveyor","Planning Consultant","Project Manager","Site Manager","Contractor","Subcontractor","Developer","Property Developer","Homeowner","Student","Other"],bP=({user:e,onComplete:t})=>{const[n,r]=st.useState(1),[s,a]=st.useState(!1),[i,o]=st.useState({address:"",occupation:"",dateOfBirth:""}),{toast:l}=im(),c=(e,t)=>{o(n=>Q(X({},n),{[e]:t}))},d=()=>ae(void 0,null,function*(){a(!0);try{const{error:n}=yield Jh.from("profiles").upsert({user_id:e.id,full_name:e.name,address:i.address,occupation:i.occupation,date_of_birth:i.dateOfBirth},{onConflict:"user_id"});if(n)throw n;const{error:r}=yield Jh.auth.updateUser({data:{onboarding_completed:!0}});if(r)throw r;const s=Q(X({},e),{address:i.address,occupation:i.occupation,dateOfBirth:i.dateOfBirth,onboardingCompleted:!0});t(s),l({title:"Welcome to EezyBuild!",description:"Your profile has been set up successfully.",duration:2e3})}catch(n){l({title:"Error",description:n.message||"Failed to save your information. Please try again.",variant:"destructive"})}finally{a(!1)}});return ie.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white flex flex-col",children:[ie.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-900/20 via-green-900/10 to-black"}),ie.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%2316a34a%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-30"}),ie.jsxs("div",{className:"relative flex-1 flex flex-col justify-center px-6 py-8",children:[ie.jsxs("div",{className:"max-w-md mx-auto w-full mb-8",children:[ie.jsx("div",{className:"flex items-center justify-between mb-4",children:[1,2,3].map(e=>ie.jsxs("div",{className:"flex items-center",children:[ie.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ".concat(e<=n?"bg-emerald-500 text-white":"bg-gray-700 text-gray-400"),children:e<n?ie.jsx(Yu,{className:"w-4 h-4"}):e}),e<3&&ie.jsx("div",{className:"w-8 h-0.5 transition-colors ".concat(e<n?"bg-emerald-500":"bg-gray-700")})]},e))}),ie.jsxs("p",{className:"text-center text-gray-400 text-sm",children:["Step ",n," of 3"]})]}),ie.jsxs(Du.div,{className:"card-professional rounded-3xl p-8 max-w-md mx-auto w-full",children:[(()=>{switch(n){case 1:return ie.jsxs(Du.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[ie.jsxs("div",{className:"text-center mb-8",children:[ie.jsx(wh,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),ie.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Where are you located?"}),ie.jsx("p",{className:"text-gray-400",children:"We'll help you with local building regulations"})]}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsx(Qy,{className:"text-emerald-300 text-base font-medium",children:"Address"}),ie.jsx(ok,{value:i.address,onChange:e=>c("address",e),className:"bg-gray-800/50 border-emerald-500/30 text-white placeholder-gray-500 h-12 focus:border-emerald-400 focus:ring-emerald-400/20",placeholder:"Start typing your address...",autoFocus:!0})]})]},"step1");case 2:return ie.jsxs(Du.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-4",children:[ie.jsxs("div",{className:"text-center mb-8",children:[ie.jsx(Vu,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),ie.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What's your occupation?"}),ie.jsx("p",{className:"text-gray-400",children:"This helps us provide relevant guidance"})]}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsx(Qy,{className:"text-emerald-300 text-base font-medium",children:"Select your occupation"}),ie.jsx("div",{className:"bg-gray-800/50 border border-emerald-500/30 rounded-lg p-4 max-h-80 overflow-y-auto",children:ie.jsx(ak,{value:i.occupation,onValueChange:e=>c("occupation",e),className:"space-y-3",children:vP.map(e=>ie.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700/30 transition-colors",children:[ie.jsx(ik,{value:e,id:e,className:"border-emerald-500/50 text-emerald-400 focus:ring-emerald-400"}),ie.jsx(Qy,{htmlFor:e,className:"text-white text-base font-medium cursor-pointer flex-1",children:e})]},e))})})]})]},"step2");case 3:return ie.jsxs(Du.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[ie.jsxs("div",{className:"text-center mb-8",children:[ie.jsx(Hu,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),ie.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"When were you born?"}),ie.jsx("p",{className:"text-gray-400",children:"This helps us comply with data protection requirements"})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx(Qy,{className:"text-emerald-300 text-base font-medium",children:"Date of Birth"}),ie.jsx(yP,{value:i.dateOfBirth,onChange:e=>c("dateOfBirth",e),className:"bg-gray-800/50 border-emerald-500/30 text-white placeholder-gray-500 h-12 focus:border-emerald-400 focus:ring-emerald-400/20"})]})]},"step3");default:return null}})(),ie.jsxs("div",{className:"flex justify-between mt-8",children:[n>1&&ie.jsx(by,{variant:"outline",onClick:()=>r(n-1),className:"border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/10",children:"Back"}),ie.jsx(by,{onClick:()=>{n<3?r(n+1):d()},disabled:!(()=>{switch(n){case 1:return""!==i.address.trim();case 2:return""!==i.occupation;case 3:return""!==i.dateOfBirth;default:return!1}})()||s,className:"gradient-emerald hover:from-emerald-600 hover:to-green-600 text-black font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:shadow-emerald-500/20 ".concat(1===n?"w-full":"ml-auto"),children:s?ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsx(Du.div,{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),ie.jsx("span",{children:"Setting up..."})]}):ie.jsxs(Du.div,{className:"flex items-center space-x-2",whileHover:{x:2},transition:{type:"spring",stiffness:400},children:[ie.jsx("span",{children:3===n?"Complete Setup":"Next"}),ie.jsx(Lu,{className:"w-4 h-4"})]})})]})]})]})]})},jP=yy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function wP(e){var t=e,{className:n,variant:r}=t,s=J(t,["className","variant"]);return ie.jsx("div",X({className:zn(jP({variant:r}),n)},s))}const NP=Ve,kP=Ue,SP=Be,CP=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Ie,X({ref:t,className:zn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},s))});CP.displayName=Ie.displayName;const PP=st.forwardRef((e,t)=>{var n=e,{className:r,children:s}=n,a=J(n,["className","children"]);return ie.jsxs(SP,{children:[ie.jsx(CP,{}),ie.jsxs(Fe,Q(X({ref:t,className:zn("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg max-h-[95vh] overflow-hidden",r)},a),{children:[s,ie.jsxs(Le,{className:"absolute right-2 top-2 sm:right-4 sm:top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground z-10",children:[ie.jsx(Qh,{className:"h-4 w-4"}),ie.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});PP.displayName=Fe.displayName;const _P=e=>{var t=e,{className:n}=t,r=J(t,["className"]);return ie.jsx("div",X({className:zn("flex flex-col space-y-1.5 text-center sm:text-left",n)},r))};_P.displayName="DialogHeader";const EP=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Oe,X({ref:t,className:zn("text-lg font-semibold leading-none tracking-tight",r)},s))});EP.displayName=Oe.displayName;st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(ze,X({ref:t,className:zn("text-sm text-muted-foreground",r)},s))}).displayName=ze.displayName;const TP=({onCreateTeam:e,trigger:t})=>{const[n,r]=st.useState(!1),[s,a]=st.useState(""),[i,o]=st.useState(""),[l,c]=st.useState(!1);return ie.jsxs(NP,{open:n,onOpenChange:r,children:[ie.jsx(kP,{asChild:!0,children:t||ie.jsxs(by,{className:"bg-emerald-500 hover:bg-emerald-600",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Create Team"]})}),ie.jsxs(PP,{className:"bg-gray-900 border-gray-700",children:[ie.jsx(_P,{children:ie.jsx(EP,{className:"text-white",children:"Create New Team"})}),ie.jsxs("form",{onSubmit:t=>ae(void 0,null,function*(){if(t.preventDefault(),s.trim()){c(!0);try{(yield e(s.trim(),i.trim()||void 0))&&(a(""),o(""),r(!1))}catch(n){}finally{c(!1)}}}),className:"space-y-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"team-name",className:"text-white",children:"Team Name"}),ie.jsx(cy,{id:"team-name",value:s,onChange:e=>a(e.target.value),placeholder:"Enter team name",className:"bg-gray-800 border-gray-600 text-white",required:!0})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"team-description",className:"text-white",children:"Description (Optional)"}),ie.jsx(Fw,{id:"team-description",value:i,onChange:e=>o(e.target.value),placeholder:"Describe your team's purpose",className:"bg-gray-800 border-gray-600 text-white",rows:3})]}),ie.jsxs("div",{className:"flex justify-end space-x-2",children:[ie.jsx(by,{type:"button",variant:"outline",onClick:()=>r(!1),className:"border-gray-600 text-gray-300",children:"Cancel"}),ie.jsx(by,{type:"submit",disabled:l||!s.trim(),className:"bg-emerald-500 hover:bg-emerald-600",children:l?"Creating...":"Create Team"})]})]})]})]})},DP=({onInviteMember:e,onCreateTestInvitation:t,trigger:n})=>{const[r,s]=st.useState(!1),[a,i]=st.useState(""),[o,l]=st.useState("member"),[c,d]=st.useState(!1),[u,h]=st.useState(null);return ie.jsxs(NP,{open:r,onOpenChange:s,children:[ie.jsx(kP,{asChild:!0,children:n||ie.jsxs(by,{className:"bg-emerald-500 hover:bg-emerald-600",children:[ie.jsx(Hh,{className:"w-4 h-4 mr-2"}),"Invite Member"]})}),ie.jsxs(PP,{className:"bg-gray-900 border-gray-700",children:[ie.jsx(_P,{children:ie.jsx(EP,{className:"text-white",children:"Invite Team Member"})}),ie.jsxs("form",{onSubmit:t=>ae(void 0,null,function*(){if(t.preventDefault(),a.trim()){d(!0);try{yield e(a.trim(),o),i(""),l("member"),s(!1)}finally{d(!1)}}}),className:"space-y-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"email",className:"text-white",children:"Email Address"}),ie.jsx(cy,{id:"email",type:"email",value:a,onChange:e=>i(e.target.value),placeholder:"Enter email address",className:"bg-gray-800 border-gray-600 text-white",required:!0})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"role",className:"text-white",children:"Role"}),ie.jsxs(mb,{value:o,onValueChange:e=>l(e),children:[ie.jsx(fb,{className:"bg-gray-800 border-gray-600 text-white",children:ie.jsx(pb,{})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-600",children:[ie.jsx(vb,{value:"viewer",className:"text-white hover:bg-gray-700",children:"Viewer - Can view projects and comments"}),ie.jsx(vb,{value:"member",className:"text-white hover:bg-gray-700",children:"Member - Can edit projects and tasks"}),ie.jsx(vb,{value:"admin",className:"text-white hover:bg-gray-700",children:"Admin - Can manage team and members"})]})]})]}),u&&ie.jsxs("div",{className:"bg-emerald-900/30 border border-emerald-500/30 rounded-lg p-4",children:[ie.jsx(Qy,{className:"text-emerald-300 text-sm font-medium",children:"Direct Invitation Link:"}),ie.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[ie.jsx(cy,{value:u,readOnly:!0,className:"bg-gray-800 border-gray-600 text-emerald-300 text-sm"}),ie.jsx(by,{type:"button",size:"sm",onClick:()=>navigator.clipboard.writeText(u),className:"bg-emerald-600 hover:bg-emerald-700",children:"Copy"})]}),ie.jsxs("p",{className:"text-emerald-400 text-xs mt-1",children:["Share this link with ",a," to join the team"]})]}),ie.jsxs("div",{className:"flex justify-end space-x-2",children:[ie.jsx(by,{type:"button",variant:"outline",onClick:()=>s(!1),className:"border-gray-600 text-gray-300",children:"Cancel"}),t&&ie.jsx(by,{type:"button",disabled:c||!a.trim(),onClick:()=>ae(void 0,null,function*(){if(a.trim()&&t){d(!0);try{const e=yield t(a.trim(),o);e&&h(e)}finally{d(!1)}}}),className:"bg-blue-600 hover:bg-blue-700",children:c?"Creating...":"Generate Test Link"}),ie.jsx(by,{type:"submit",disabled:c||!a.trim(),className:"bg-emerald-500 hover:bg-emerald-600",children:c?"Inviting...":"Send Invitation"})]})]})]})]})},MP=({teamId:e,currentLogoUrl:t,onLogoUpdate:n})=>{const[r,s]=st.useState(!1),[a,i]=st.useState(!1),{toast:o}=im(),l=t=>ae(void 0,null,function*(){try{if(s(!0),!t.type.startsWith("image/"))throw new Error("Please upload an image file");if(t.size>5242880)throw new Error("File size must be less than 5MB");const{data:{user:r},error:a}=yield Jh.auth.getUser();if(!r)throw new Error("Not authenticated");const i=t.name.split(".").pop(),l="".concat(e,"/logo.").concat(i),{error:c,data:d}=yield Jh.storage.from("team-logos").upload(l,t,{upsert:!0});if(c)throw c;const{data:{publicUrl:u}}=Jh.storage.from("team-logos").getPublicUrl(l),h="".concat(u,"?t=").concat(Date.now()),{error:m}=yield Jh.from("teams").update({logo_url:h}).eq("id",e);if(m)throw m;n(h),o({title:"Success",description:"Team logo updated successfully"})}catch(r){o({title:"Error",description:r instanceof Error?r.message:"Failed to upload logo",variant:"destructive"})}finally{s(!1)}}),c=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?i(!0):"dragleave"===e.type&&i(!1)};return ie.jsxs("div",{className:"relative",children:[t?ie.jsxs("div",{className:"relative group",children:[ie.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-800 flex items-center justify-center",children:ie.jsx("img",{src:t,alt:"Team logo",className:"w-full h-full object-cover",onLoad:()=>{},onError:e=>{}})}),ie.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>ae(void 0,null,function*(){try{s(!0);const{error:t}=yield Jh.from("teams").update({logo_url:null}).eq("id",e);if(t)throw t;n(null),o({title:"Success",description:"Team logo removed successfully"})}catch(t){o({title:"Error",description:"Failed to remove logo",variant:"destructive"})}finally{s(!1)}}),disabled:r,className:"text-white hover:text-red-400",children:ie.jsx(Qh,{className:"w-4 h-4"})})})]}):ie.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-dashed transition-colors cursor-pointer flex items-center justify-center ".concat(a?"border-emerald-500 bg-emerald-500/10":"border-gray-600 hover:border-gray-500"," ").concat(r?"opacity-50 cursor-not-allowed":""),onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:e=>{e.preventDefault(),e.stopPropagation(),i(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&l(e.dataTransfer.files[0])},onClick:()=>{var e;r||null==(e=document.getElementById("logo-upload"))||e.click()},children:r?ie.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500"}):ie.jsx(Wh,{className:"w-6 h-6 text-gray-400"})}),ie.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:e=>{(e=>{e.target.files&&e.target.files[0]&&l(e.target.files[0])})(e)},className:"hidden",disabled:r}),r&&ie.jsx("div",{className:"absolute -bottom-6 left-0 text-xs text-gray-400",children:"Uploading..."})]})};var AP="AlertDialog",[RP,IP]=le(AP,[qe]),FP=qe(),LP=e=>{const t=e,{__scopeAlertDialog:n}=t,r=J(t,["__scopeAlertDialog"]),s=FP(n);return ie.jsx(Ve,Q(X(X({},s),r),{modal:!0}))};LP.displayName=AP;var OP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,s=J(n,["__scopeAlertDialog"]),a=FP(r);return ie.jsx(Ue,Q(X(X({},a),s),{ref:t}))});OP.displayName="AlertDialogTrigger";var zP=e=>{const t=e,{__scopeAlertDialog:n}=t,r=J(t,["__scopeAlertDialog"]),s=FP(n);return ie.jsx(Be,X(X({},s),r))};zP.displayName="AlertDialogPortal";var BP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,s=J(n,["__scopeAlertDialog"]),a=FP(r);return ie.jsx(Ie,Q(X(X({},a),s),{ref:t}))});BP.displayName="AlertDialogOverlay";var VP="AlertDialogContent",[UP,qP]=RP(VP),WP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r,children:s}=n,a=J(n,["__scopeAlertDialog","children"]),i=FP(r),o=st.useRef(null),l=de(t,o),c=st.useRef(null);return ie.jsx(We,{contentName:VP,titleName:HP,docsSlug:"alert-dialog",children:ie.jsx(UP,{scope:r,cancelRef:c,children:ie.jsxs(Fe,Q(X(X({role:"alertdialog"},i),a),{ref:l,onOpenAutoFocus:he(a.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=c.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[ie.jsx(ge,{children:s}),ie.jsx(ZP,{contentRef:o})]}))})})});WP.displayName=VP;var HP="AlertDialogTitle",YP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,s=J(n,["__scopeAlertDialog"]),a=FP(r);return ie.jsx(Oe,Q(X(X({},a),s),{ref:t}))});YP.displayName=HP;var KP="AlertDialogDescription",GP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,s=J(n,["__scopeAlertDialog"]),a=FP(r);return ie.jsx(ze,Q(X(X({},a),s),{ref:t}))});GP.displayName=KP;var XP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,s=J(n,["__scopeAlertDialog"]),a=FP(r);return ie.jsx(Le,Q(X(X({},a),s),{ref:t}))});XP.displayName="AlertDialogAction";var QP="AlertDialogCancel",JP=st.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,s=J(n,["__scopeAlertDialog"]),{cancelRef:a}=qP(QP,r),i=FP(r),o=de(t,a);return ie.jsx(Le,Q(X(X({},i),s),{ref:o}))});JP.displayName=QP;var ZP=({contentRef:e})=>{const t="`".concat(VP,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(VP,"` by passing a `").concat(KP,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(VP,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return st.useEffect(()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))},[t,e]),null},$P=BP,e_=WP,t_=XP,n_=JP,r_=YP,s_=GP;const a_=LP,i_=OP,o_=zP,l_=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx($P,Q(X({className:zn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},s),{ref:t}))});l_.displayName=$P.displayName;const c_=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsxs(o_,{children:[ie.jsx(l_,{}),ie.jsx(e_,X({ref:t,className:zn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},s))]})});c_.displayName=e_.displayName;const d_=e=>{var t=e,{className:n}=t,r=J(t,["className"]);return ie.jsx("div",X({className:zn("flex flex-col space-y-2 text-center sm:text-left",n)},r))};d_.displayName="AlertDialogHeader";const u_=e=>{var t=e,{className:n}=t,r=J(t,["className"]);return ie.jsx("div",X({className:zn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n)},r))};u_.displayName="AlertDialogFooter";const h_=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(r_,X({ref:t,className:zn("text-lg font-semibold",r)},s))});h_.displayName=r_.displayName;const m_=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(s_,X({ref:t,className:zn("text-sm text-muted-foreground",r)},s))});m_.displayName=s_.displayName;const p_=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(t_,X({ref:t,className:zn(vy(),r)},s))});p_.displayName=t_.displayName;const f_=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(n_,X({ref:t,className:zn(vy({variant:"outline"}),"mt-2 sm:mt-0",r)},s))});f_.displayName=n_.displayName;const g_=({team:e,onTeamUpdate:t,onTeamDelete:n,onCreateTeam:r,isOwner:s})=>{const[a,i]=st.useState((null==e?void 0:e.name)||""),[o,l]=st.useState((null==e?void 0:e.description)||""),[c,d]=st.useState(!1),[u,h]=st.useState(!1),{toast:m}=im();return ie.jsxs("div",{className:"space-y-8",children:[ie.jsxs(Ny,{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-gray-700",children:[ie.jsx(ky,{className:"border-b border-gray-700",children:ie.jsxs(Sy,{className:"text-white flex items-center gap-2",children:[ie.jsx(Fh,{className:"w-5 h-5"}),"Team Information"]})}),ie.jsxs(Py,{className:"p-6 space-y-6",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{className:"text-white text-base font-medium mb-3 block",children:"Team Logo"}),ie.jsxs("div",{className:"flex items-center gap-4",children:[ie.jsx(MP,{teamId:e.id,currentLogoUrl:e.logo_url,onLogoUpdate:()=>{t()}}),ie.jsxs("div",{className:"text-sm text-gray-400",children:[ie.jsx("p",{children:"Upload a logo for your team"}),ie.jsx("p",{children:"Max size: 5MB • PNG, JPG, JPEG"})]})]})]}),ie.jsxs("div",{className:"grid gap-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"team-name",className:"text-white",children:"Team Name"}),ie.jsx(cy,{id:"team-name",value:a,onChange:e=>i(e.target.value),placeholder:"Enter team name",className:"bg-gray-800 border-gray-600 text-white",disabled:!s})]}),ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"team-description",className:"text-white",children:"Description"}),ie.jsx(Fw,{id:"team-description",value:o,onChange:e=>l(e.target.value),placeholder:"Describe your team's purpose",className:"bg-gray-800 border-gray-600 text-white",rows:3,disabled:!s})]})]}),s&&ie.jsx("div",{className:"flex justify-end",children:ie.jsx(by,{onClick:()=>ae(void 0,null,function*(){if(a.trim()){d(!0);try{const{error:n}=yield Jh.from("teams").update({name:a.trim(),description:o.trim()||null}).eq("id",e.id);if(n)throw n;m({title:"Success",description:"Team settings updated successfully"}),t()}catch(n){m({title:"Error",description:"Failed to update team settings",variant:"destructive"})}finally{d(!1)}}}),disabled:c||!a.trim(),className:"bg-emerald-500 hover:bg-emerald-600",children:c?"Saving...":"Save Changes"})})]})]}),ie.jsxs(Ny,{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-gray-700",children:[ie.jsx(ky,{className:"border-b border-gray-700",children:ie.jsxs(Sy,{className:"text-white flex items-center gap-2",children:[ie.jsx(Kh,{className:"w-5 h-5"}),"Team Statistics"]})}),ie.jsx(Py,{className:"p-6",children:ie.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Created"})]}),ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"0"}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Active Projects"})]}),ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"0"}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Completed Tasks"})]}),ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-2xl font-bold text-orange-400",children:"0"}),ie.jsx("div",{className:"text-sm text-gray-400",children:"Total Activity"})]})]})})]}),ie.jsxs(Ny,{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-gray-700",children:[ie.jsx(ky,{className:"border-b border-gray-700",children:ie.jsxs(Sy,{className:"text-white flex items-center gap-2",children:[ie.jsx(Fh,{className:"w-5 h-5"}),"Team Management"]})}),ie.jsx(Py,{className:"p-6",children:ie.jsx("div",{className:"space-y-4",children:ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-white font-medium mb-2",children:"Create New Team"}),ie.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Create additional teams to organize different projects or departments."}),ie.jsx(TP,{onCreateTeam:r,trigger:ie.jsxs(by,{className:"bg-emerald-500 hover:bg-emerald-600",children:[ie.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Create New Team"]})})]})})})]}),s&&ie.jsxs(Ny,{className:"bg-gradient-to-br from-red-900/20 to-red-800/20 border-red-700/50",children:[ie.jsx(ky,{className:"border-b border-red-700/50",children:ie.jsxs(Sy,{className:"text-red-400 flex items-center gap-2",children:[ie.jsx(qh,{className:"w-5 h-5"}),"Danger Zone"]})}),ie.jsx(Py,{className:"p-6",children:ie.jsx("div",{className:"space-y-4",children:ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-white font-medium mb-2",children:"Delete Team"}),ie.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Once you delete a team, there is no going back. This action will permanently delete the team and all associated data including projects, tasks, and member records."}),ie.jsxs(a_,{children:[ie.jsx(i_,{asChild:!0,children:ie.jsxs(by,{variant:"destructive",className:"bg-red-600 hover:bg-red-700",children:[ie.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Delete Team"]})}),ie.jsxs(c_,{className:"bg-gray-900 border-gray-700",children:[ie.jsxs(d_,{children:[ie.jsx(h_,{className:"text-white",children:"Are you absolutely sure?"}),ie.jsxs(m_,{className:"text-gray-400",children:['This action cannot be undone. This will permanently delete the team "',null==e?void 0:e.name,'" and all associated data including:',ie.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[ie.jsx("li",{children:"All team projects and tasks"}),ie.jsx("li",{children:"All member records and roles"}),ie.jsx("li",{children:"All team activity and comments"}),ie.jsx("li",{children:"All uploaded files and documents"})]})]})]}),ie.jsxs(u_,{children:[ie.jsx(f_,{className:"border-gray-600 text-gray-300",children:"Cancel"}),ie.jsx(p_,{onClick:()=>ae(void 0,null,function*(){h(!0);try{const{error:t}=yield Jh.from("teams").delete().eq("id",e.id);if(t)throw t;m({title:"Success",description:"Team deleted successfully"}),n()}catch(t){m({title:"Error",description:"Failed to delete team",variant:"destructive"})}finally{h(!1)}}),disabled:u,className:"bg-red-600 hover:bg-red-700",children:u?"Deleting...":"Yes, delete team"})]})]})]})]})})})]}),!s&&ie.jsx(Ny,{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-gray-700",children:ie.jsx(Py,{className:"p-6 text-center",children:ie.jsxs("div",{className:"text-gray-400",children:[ie.jsx(Kh,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Limited Access"}),ie.jsx("p",{className:"text-sm",children:"Only team owners can modify team settings."})]})})})]})},x_=({teamId:e,members:t})=>{const[n,r]=st.useState([]),[s,a]=st.useState([]),[i,o]=st.useState(null),[l,c]=st.useState(!0),[d,u]=st.useState(!1),[h,m]=st.useState(!1),[p,f]=st.useState(""),[g,x]=st.useState(""),[y,v]=st.useState(!1),{toast:b}=im(),j=()=>ae(void 0,null,function*(){try{const{data:t,error:n}=yield Jh.from("projects").select("id, name, description, created_at").eq("team_id",e).order("created_at",{ascending:!1});if(n)return void b({title:"Error",description:"Failed to load projects",variant:"destructive"});const s=yield Promise.all((t||[]).map(e=>ae(void 0,null,function*(){try{const{count:t}=yield Jh.from("project_schedule_of_works").select("*",{count:"exact",head:!0}).eq("project_id",e.id);return Q(X({},e),{task_count:t||0})}catch(t){return Q(X({},e),{task_count:0})}})));r(s),s.length>0&&!i&&o(s[0].id)}catch(t){}finally{c(!1)}}),w=e=>ae(void 0,null,function*(){try{const{data:t,error:n}=yield Jh.from("project_schedule_of_works").select("id, title, completed, created_at, project_id").eq("project_id",e).order("created_at",{ascending:!1});if(n)return;a(t||[])}catch(t){}}),N=()=>ae(void 0,null,function*(){if(p.trim()){v(!0);try{const{data:{user:t}}=yield Jh.auth.getUser();if(!t)return void b({title:"Error",description:"You must be logged in",variant:"destructive"});const{data:n,error:r}=yield Jh.from("projects").insert([{name:p.trim(),team_id:e,user_id:t.id}]).select("id, name, description, created_at").single();if(r)return void b({title:"Error",description:"Failed to create project",variant:"destructive"});yield Jh.from("team_projects").insert([{project_id:n.id,team_id:e,shared_by:t.id}]),b({title:"Success",description:"Project created successfully"}),f(""),u(!1),j()}catch(t){}finally{v(!1)}}}),k=()=>ae(void 0,null,function*(){if(g.trim()&&i){v(!0);try{const{data:{user:e}}=yield Jh.auth.getUser();if(!e)return void b({title:"Error",description:"You must be logged in",variant:"destructive"});const{error:t}=yield Jh.from("project_schedule_of_works").insert([{title:g.trim(),project_id:i,user_id:e.id}]);if(t)return void b({title:"Error",description:"Failed to create task",variant:"destructive"});b({title:"Success",description:"Task created successfully"}),x(""),m(!1),w(i),j()}catch(e){}finally{v(!1)}}});if(st.useEffect(()=>{e&&j()},[e]),st.useEffect(()=>{i&&w(i)},[i]),l)return ie.jsx("div",{className:"space-y-4",children:ie.jsxs("div",{className:"animate-pulse",children:[ie.jsx("div",{className:"h-8 bg-gray-700 rounded w-48 mb-4"}),ie.jsx("div",{className:"h-32 bg-gray-800 rounded"})]})});const S=n.find(e=>e.id===i);return ie.jsxs("div",{className:"space-y-6",children:[ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsx("h3",{className:"text-2xl font-bold text-white",children:"Team Work"}),ie.jsxs(by,{onClick:()=>u(!0),className:"bg-emerald-500 hover:bg-emerald-600",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),d&&ie.jsxs(Ny,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(ky,{children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsx(Sy,{className:"text-white",children:"Create New Project"}),ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>u(!1),className:"text-gray-400 hover:text-white",children:ie.jsx(Qh,{className:"w-4 h-4"})})]})}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{children:[ie.jsx(Qy,{htmlFor:"project-name",className:"text-white",children:"Project Name"}),ie.jsx(cy,{id:"project-name",value:p,onChange:e=>f(e.target.value),placeholder:"Enter project name",className:"bg-gray-700 border-gray-600 text-white mt-1",onKeyPress:e=>"Enter"===e.key&&N()})]}),ie.jsxs("div",{className:"flex justify-end space-x-2",children:[ie.jsx(by,{variant:"outline",onClick:()=>u(!1),className:"border-gray-600 text-gray-300",children:"Cancel"}),ie.jsx(by,{onClick:N,disabled:y||!p.trim(),className:"bg-emerald-500 hover:bg-emerald-600",children:y?"Creating...":"Create"})]})]})]}),0===n.length?ie.jsx(Ny,{className:"bg-gray-800 border-gray-700",children:ie.jsxs(Py,{className:"text-center py-8",children:[ie.jsx("h4",{className:"text-xl text-white mb-2",children:"No Projects Yet"}),ie.jsx("p",{className:"text-gray-400 mb-4",children:"Create your first project to get started"}),ie.jsxs(by,{onClick:()=>u(!0),className:"bg-emerald-500 hover:bg-emerald-600",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Create First Project"]})]})}):ie.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[ie.jsxs("div",{className:"space-y-4",children:[ie.jsx("h4",{className:"text-lg font-semibold text-white",children:"Projects"}),n.map(e=>ie.jsx(Ny,{className:"cursor-pointer transition-colors ".concat(i===e.id?"bg-emerald-900/50 border-emerald-500":"bg-gray-800 border-gray-700 hover:border-gray-600"),onClick:()=>o(e.id),children:ie.jsx(Py,{className:"p-4",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{children:[ie.jsx("h5",{className:"font-medium text-white",children:e.name}),e.description&&ie.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e.description}),ie.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[ie.jsx(Hu,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString()]})]}),ie.jsx("div",{className:"text-right",children:ie.jsxs("div",{className:"text-emerald-400 font-medium",children:[e.task_count||0," tasks"]})})]})})},e.id))]}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsx("h4",{className:"text-lg font-semibold text-white",children:S?"Tasks - ".concat(S.name):"Select a project"}),S&&ie.jsxs(by,{onClick:()=>m(!0),size:"sm",className:"bg-blue-500 hover:bg-blue-600",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-1"}),"Add Task"]})]}),h&&S&&ie.jsx(Ny,{className:"bg-gray-800 border-gray-700",children:ie.jsxs(Py,{className:"p-4 space-y-3",children:[ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsx(Qy,{htmlFor:"task-title",className:"text-white text-sm",children:"New Task"}),ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>m(!1),className:"text-gray-400 hover:text-white p-1",children:ie.jsx(Qh,{className:"w-3 h-3"})})]}),ie.jsx(cy,{id:"task-title",value:g,onChange:e=>x(e.target.value),placeholder:"Enter task title",className:"bg-gray-700 border-gray-600 text-white",onKeyPress:e=>"Enter"===e.key&&k()}),ie.jsxs("div",{className:"flex justify-end space-x-2",children:[ie.jsx(by,{variant:"outline",size:"sm",onClick:()=>m(!1),className:"border-gray-600 text-gray-300",children:"Cancel"}),ie.jsx(by,{onClick:k,size:"sm",disabled:y||!g.trim(),className:"bg-blue-500 hover:bg-blue-600",children:y?"Adding...":"Add"})]})]})}),S?0===s.length?ie.jsx(Ny,{className:"bg-gray-800 border-gray-700",children:ie.jsxs(Py,{className:"text-center py-6",children:[ie.jsx("p",{className:"text-gray-400",children:"No tasks yet"}),ie.jsxs(by,{onClick:()=>m(!0),size:"sm",className:"bg-blue-500 hover:bg-blue-600 mt-2",children:[ie.jsx(Eh,{className:"w-4 h-4 mr-1"}),"Add First Task"]})]})}):ie.jsx("div",{className:"space-y-2",children:s.map(e=>ie.jsx(Ny,{className:"bg-gray-800 border-gray-700",children:ie.jsx(Py,{className:"p-3",children:ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,n=e.completed,ae(void 0,null,function*(){try{const{error:e}=yield Jh.from("project_schedule_of_works").update({completed:!n,completed_at:n?null:(new Date).toISOString()}).eq("id",t);if(e)return;i&&w(i)}catch(e){}});var t,n},className:"p-1 ".concat(e.completed?"text-emerald-500":"text-gray-500"),children:ie.jsx($u,{className:"w-4 h-4"})}),ie.jsxs("div",{className:"flex-1",children:[ie.jsx("span",{className:"text-sm ".concat(e.completed?"line-through text-gray-500":"text-white"),children:e.title}),ie.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-500",children:[ie.jsx(th,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString()]})]})]})})},e.id))}):ie.jsx(Ny,{className:"bg-gray-800 border-gray-700",children:ie.jsx(Py,{className:"text-center py-6",children:ie.jsx("p",{className:"text-gray-400",children:"Select a project to view tasks"})})})]})]})]})},y_=(e,t="")=>{const[n,r]=st.useState([]),[s,a]=st.useState(!0),[i,o]=st.useState(null),{toast:l}=im(),c=()=>ae(void 0,null,function*(){if(!e)return r([]),void a(!1);a(!0),o(null);try{const{data:n,error:s}=yield Jh.from("projects").select("*").eq("team_id",e).order("updated_at",{ascending:!1});if(s)throw s;const a=(n||[]).map(e=>Q(X({},e),{team_name:t})).sort((e,t)=>e.pinned&&!t.pinned?-1:!e.pinned&&t.pinned?1:new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime());r(a)}catch(n){o(n.message||"Failed to load team projects"),l({variant:"destructive",title:"Error loading team projects",description:n.message||"Please try again later."})}finally{a(!1)}});return st.useEffect(()=>{c()},[e]),st.useEffect(()=>{if(!e)return;const t=Jh.channel("team-projects-".concat(e,"-").concat(Date.now())).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:"team_id=eq.".concat(e)},()=>{c()}).subscribe();return()=>{Jh.removeChannel(t)}},[e]),{projects:n,loading:s,error:i,createProject:n=>ae(void 0,null,function*(){var r,s,a;if(!e)throw new Error("No team ID provided");const{error:i}=yield Jh.from("projects").insert([{user_id:n.user_id,team_id:e,name:n.name.trim(),description:n.description.trim()||null,label:n.label,status:"setup",customer_name:(null==(r=n.customer_name)?void 0:r.trim())||null,customer_address:(null==(s=n.customer_address)?void 0:s.trim())||null,customer_phone:(null==(a=n.customer_phone)?void 0:a.trim())||null}]);if(i)throw i;l({title:"Team project created successfully",description:"".concat(n.name," has been added to ").concat(t,".")}),c()}),updateProject:(e,t)=>ae(void 0,null,function*(){const{error:n}=yield Jh.from("projects").update(t).eq("id",e);if(n)throw n;l({title:"Project updated successfully",description:"Project has been updated."}),c()}),deleteProject:(e,t)=>ae(void 0,null,function*(){const{error:n}=yield Jh.from("projects").delete().eq("id",e);if(n)throw n;l({title:"Project deleted",description:"".concat(t," has been deleted.")}),c()}),togglePinProject:(e,t)=>ae(void 0,null,function*(){const{error:n}=yield Jh.from("projects").update({pinned:!t}).eq("id",e);if(n)throw n;l({title:t?"Project unpinned":"Project pinned",description:t?"Project unpinned from top":"Project moved to top of list"}),c()}),handleStatusChange:(e,t)=>ae(void 0,null,function*(){const{error:n}=yield Jh.from("projects").update({status:t}).eq("id",e);if(n)throw n;const r="setup"===t?"Set-up":t.replace("-"," ");l({title:"Status updated",description:"Project status changed to ".concat(r,".")}),c()}),refetch:c}},v_=({user:e,teamId:t,teamName:n,onStartNewChat:r})=>{const[s,a]=st.useState(!1),[i,o]=st.useState({name:"",description:"",label:"Residential",customer_name:"",customer_address:"",customer_phone:""}),[l,c]=st.useState(null),[d,u]=st.useState(null),[h,m]=st.useState(!1),[p,f]=st.useState("chats"),[g,x]=st.useState({context:"all",projectType:"all",status:"all",search:""}),{toast:y}=im(),{projects:v,loading:b,error:j,createProject:w,updateProject:N,deleteProject:k,togglePinProject:S,handleStatusChange:C}=y_(t,n),P=Boolean((null==e?void 0:e.id)&&t),_=dy(null==e?void 0:e.id,P),{conversations:E,loading:T,error:D,getProjectConversationCount:M,getProjectDocumentCount:A,getProjectScheduleOfWorksCount:R,incrementDocumentCount:I,incrementScheduleCount:F}=_;if(!(null==e?void 0:e.id)||!t)return ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-white text-lg mb-2",children:"Loading team information..."}),ie.jsxs("div",{className:"text-gray-400 text-sm",children:[!(null==e?void 0:e.id)&&"User authentication required",!t&&"Team ID missing"]})]})});if(j||D)return ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"text-red-400 text-lg mb-2",children:"Error loading team projects"}),ie.jsx("div",{className:"text-gray-400 text-sm",children:j||D}),ie.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-emerald-500 text-white rounded-lg",children:"Retry"})]})});const L=(e,t)=>ae(void 0,null,function*(){if(confirm('Are you sure you want to delete "'.concat(t,'"? This will also delete all associated conversations and documents.')))try{yield k(e,t)}catch(n){y({variant:"destructive",title:"Error deleting project",description:n.message||"Please try again."})}}),O=(e,t)=>{u(e),f(t),m(!0)},z=e=>{const r=Q(X({},e),{team_id:e.team_id||t,team_name:e.team_name||n});c(r)},B=st.useMemo(()=>v&&Array.isArray(v)?v.filter(e=>{var t,n,r;if("all"!==g.projectType&&e.label!==g.projectType)return!1;if("all"!==g.status&&e.status!==g.status)return!1;if(null==(t=g.search)?void 0:t.trim()){const t=g.search.toLowerCase(),s=null==(n=e.name)?void 0:n.toLowerCase().includes(t),a=null==(r=e.description)?void 0:r.toLowerCase().includes(t);if(!s&&!a)return!1}return!0}):[],[v,g]);return b||T?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):ie.jsxs("div",{className:"space-y-6",children:[ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{children:[ie.jsx("h3",{className:"text-2xl font-bold text-white",children:"Team Projects"}),ie.jsxs("p",{className:"text-gray-400 mt-1",children:["Collaborate on building regulation projects with ",n]})]}),ie.jsxs(Du.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!0),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-all duration-300 shadow-lg",children:[ie.jsx(Eh,{className:"w-5 h-5"}),ie.jsx("span",{children:"New Team Project"})]})]}),ie.jsx(MN,{filters:g,onFiltersChange:x,showContextFilter:!1,projectCount:B.length}),ie.jsx("div",{className:"space-y-6",children:0===v.length?ie.jsxs("div",{className:"text-center py-12 bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-xl",children:[ie.jsx("div",{className:"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4",children:ie.jsx(Eh,{className:"w-8 h-8 text-gray-400"})}),ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No team projects yet"}),ie.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Create your first team project to start collaborating"}),ie.jsxs(Du.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!0),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-all duration-300 shadow-lg mx-auto",children:[ie.jsx(Eh,{className:"w-5 h-5"}),ie.jsx("span",{children:"Create First Team Project"})]})]}):0===B.length?ie.jsxs("div",{className:"text-center py-12 bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-xl",children:[ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No team projects match your filters"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your filter criteria or clearing all filters"})]}):ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map((e,t)=>ie.jsx(zw,{project:e,index:t,conversationCount:M(e.id),documentCount:A(e.id),scheduleOfWorksCount:R(e.id),onStartNewChat:r,onEdit:z,onDelete:L,onTogglePin:S,onProjectStatsClick:O,onStatusChange:C},e.id))})}),ie.jsx(Ow,{project:d,isOpen:h,onClose:()=>{m(!1),u(null)},onStartNewChat:(e,t)=>{t?r(e,t):r(e)},user:e,initialTab:p,conversationsHook:_}),ie.jsx(CN,{isOpen:s,onClose:()=>a(!1),newProject:i,setNewProject:o,onCreateProject:()=>ae(void 0,null,function*(){if((null==e?void 0:e.id)&&i.name.trim())try{yield w({user_id:e.id,name:i.name.trim(),description:i.description.trim(),label:i.label,customer_name:i.customer_name.trim()||void 0,customer_address:i.customer_address.trim()||void 0,customer_phone:i.customer_phone.trim()||void 0}),o({name:"",description:"",label:"Residential",customer_name:"",customer_address:"",customer_phone:""}),a(!1)}catch(t){y({variant:"destructive",title:"Error creating project",description:t.message||"Please try again."})}})}),ie.jsx(PN,{editingProject:l,onClose:()=>c(null),setEditingProject:e=>{if(e){const r=Q(X({},e),{team_id:e.team_id||t,team_name:e.team_name||n});c(r)}else c(null)},onUpdateProject:()=>ae(void 0,null,function*(){if(l&&l.name.trim())try{yield N(l.id,{name:l.name.trim(),description:l.description.trim()||null,label:l.label,status:l.status}),c(null)}catch(e){y({variant:"destructive",title:"Error updating project",description:e.message||"Please try again."})}})})]})},b_=({teamId:e,teamName:t})=>{const[n,r]=st.useState([]),[s,a]=st.useState(!0),{toast:i}=im(),o=()=>ae(void 0,null,function*(){if(e){a(!0);try{const{data:t,error:n}=yield Jh.from("project_schedule_of_works").select("\n          id,\n          title,\n          description,\n          due_date,\n          completed,\n          project_id,\n          created_at,\n          assigned_to,\n          projects!inner(\n            id,\n            name,\n            team_id\n          )\n        ").eq("projects.team_id",e).eq("completed",!1).order("due_date",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!1});if(n)throw n;const s=(t||[]).map(e=>e.assigned_to).filter(Boolean),{data:a}=s.length>0?yield Jh.from("profiles").select("user_id, full_name").in("user_id",s):{data:[]},i=(t||[]).map(e=>{var t;const n=null==a?void 0:a.find(t=>t.user_id===e.assigned_to);return Q(X({},e),{project_name:(null==(t=e.projects)?void 0:t.name)||"Unknown Project",assigned_to_name:(null==n?void 0:n.full_name)||null})});r(i)}catch(t){i({variant:"destructive",title:"Error loading tasks",description:"Please try again later."})}finally{a(!1)}}});st.useEffect(()=>{o()},[e]),st.useEffect(()=>{if(!e)return;const t=Jh.channel("team-tasks-realtime").on("postgres_changes",{event:"*",schema:"public",table:"project_schedule_of_works"},()=>{o()}).subscribe();return()=>{Jh.removeChannel(t)}},[e]);return s?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):ie.jsxs("div",{className:"space-y-6",children:[ie.jsxs("div",{children:[ie.jsx("h3",{className:"text-2xl font-bold text-white",children:"Active Tasks"}),ie.jsxs("p",{className:"text-gray-400 mt-1",children:[n.length," active tasks across ",t," projects"]})]}),0===n.length?ie.jsxs("div",{className:"text-center py-12 bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-xl",children:[ie.jsx("div",{className:"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4",children:ie.jsx(Oh,{className:"w-8 h-8 text-gray-400"})}),ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No active tasks"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"All team tasks are completed!"})]}):ie.jsx("div",{className:"space-y-4",children:n.map((e,t)=>{const n=(e=>{if(!e)return null;const t=new Date(e),n=new Date,r=t.getTime()-n.getTime(),s=Math.ceil(r/864e5);return s<0?{text:"".concat(Math.abs(s)," days overdue"),color:"text-red-400",urgent:!0}:0===s?{text:"Due today",color:"text-orange-400",urgent:!0}:1===s?{text:"Due tomorrow",color:"text-yellow-400",urgent:!1}:s<=7?{text:"Due in ".concat(s," days"),color:"text-blue-400",urgent:!1}:{text:"Due ".concat(t.toLocaleDateString()),color:"text-gray-400",urgent:!1}})(e.due_date);return ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:ie.jsx(Ny,{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 border-gray-700 hover:border-gray-600 transition-all ".concat((null==n?void 0:n.urgent)?"border-l-4 border-l-red-500":""),children:ie.jsx(Py,{className:"p-3 pb-2",children:ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("div",{children:ie.jsx("h4",{className:"text-base font-semibold text-white truncate",title:e.title,children:e.title})}),ie.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[ie.jsx(wP,{className:"bg-emerald-600/20 text-emerald-400 border-emerald-600/30 hover:bg-emerald-600/30 px-2 py-1 text-sm",children:e.project_name}),n&&ie.jsxs("div",{className:"flex items-center gap-2 ".concat(n.color," text-sm"),children:[ie.jsx(Hu,{className:"w-4 h-4"}),ie.jsx("span",{className:"font-medium",children:n.text})]})]}),ie.jsxs("div",{className:"flex items-end justify-between gap-3",children:[ie.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.assigned_to_name?ie.jsxs(wP,{variant:"outline",className:"px-2 py-1 text-sm text-blue-400 border-blue-400/30",children:[ie.jsx(Yh,{className:"w-3 h-3 mr-1"}),e.assigned_to_name]}):ie.jsxs(wP,{variant:"outline",className:"px-2 py-1 text-sm text-gray-400 border-gray-400/30",children:[ie.jsx(Yh,{className:"w-3 h-3 mr-1"}),"Unassigned"]}),ie.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[ie.jsx(th,{className:"w-4 h-4"}),ie.jsxs("span",{children:["Created ",new Date(e.created_at).toLocaleDateString()]})]})]}),ie.jsxs(by,{onClick:()=>{return t=e.id,ae(void 0,null,function*(){try{const{error:e}=yield Jh.from("project_schedule_of_works").update({completed:!0,completed_at:(new Date).toISOString()}).eq("id",t);if(e)throw e;i({title:"Task completed",description:"Task has been marked as complete."}),o()}catch(e){i({variant:"destructive",title:"Error completing task",description:"Please try again."})}});var t},size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white flex-shrink-0",children:[ie.jsx(Oh,{className:"w-4 h-4 mr-2"}),"Complete"]})]}),e.description&&ie.jsx("div",{className:"border-t border-gray-700/50 pt-3 mt-3",children:ie.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.description})})]})})})},e.id)})})]})},j_=({onSubmit:e,placeholder:t="Write a comment...",buttonText:n="Post Comment",loading:r=!1})=>{const[s,a]=st.useState("");return ie.jsxs("form",{onSubmit:t=>{t.preventDefault(),s.trim()&&(e(s.trim()),a(""))},className:"space-y-4",children:[ie.jsx(Fw,{value:s,onChange:e=>a(e.target.value),placeholder:t,className:"bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 min-h-[100px] resize-none",disabled:r}),ie.jsx("div",{className:"flex justify-end",children:ie.jsxs(by,{type:"submit",disabled:!s.trim()||r,className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:[ie.jsx(Ih,{className:"w-4 h-4 mr-2"}),n]})})]})},w_=tt,N_=nt;st.forwardRef((e,t)=>{var n=e,{className:r,inset:s,children:a}=n,i=J(n,["className","inset","children"]);return ie.jsxs(He,Q(X({ref:t,className:zn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",r)},i),{children:[a,ie.jsx(Xu,{className:"ml-auto h-4 w-4"})]}))}).displayName=He.displayName;st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(Ye,X({ref:t,className:zn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},s))}).displayName=Ye.displayName;const k_=st.forwardRef((e,t)=>{var n=e,{className:r,sideOffset:s=4}=n,a=J(n,["className","sideOffset"]);return ie.jsx(Ke,{children:ie.jsx(Ge,X({ref:t,sideOffset:s,className:zn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},a))})});k_.displayName=Ge.displayName;const S_=st.forwardRef((e,t)=>{var n=e,{className:r,inset:s}=n,a=J(n,["className","inset"]);return ie.jsx(Xe,X({ref:t,className:zn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",r)},a))});S_.displayName=Xe.displayName;st.forwardRef((e,t)=>{var n=e,{className:r,children:s,checked:a}=n,i=J(n,["className","children","checked"]);return ie.jsxs(Qe,Q(X({ref:t,className:zn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:a},i),{children:[ie.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ie.jsx(Je,{children:ie.jsx(Yu,{className:"h-4 w-4"})})}),s]}))}).displayName=Qe.displayName;st.forwardRef((e,t)=>{var n=e,{className:r,children:s}=n,a=J(n,["className","children"]);return ie.jsxs(Ze,Q(X({ref:t,className:zn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},a),{children:[ie.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ie.jsx(Je,{children:ie.jsx(eh,{className:"h-2 w-2 fill-current"})})}),s]}))}).displayName=Ze.displayName;st.forwardRef((e,t)=>{var n=e,{className:r,inset:s}=n,a=J(n,["className","inset"]);return ie.jsx($e,X({ref:t,className:zn("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",r)},a))}).displayName=$e.displayName;st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(et,X({ref:t,className:zn("-mx-1 my-1 h-px bg-muted",r)},s))}).displayName=et.displayName;const C_=({comment:e,onReply:t,onDelete:n,currentUserId:r,level:s=0})=>{var a;const[i,o]=st.useState(!1),[l,c]=st.useState(!1),d=r===e.author_id,u=s>0;return ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"".concat(u?"ml-8 border-l-2 border-gray-700 pl-4":""),children:[ie.jsx(Ny,{className:"bg-gray-800/30 border-gray-700 mb-4",children:ie.jsxs(Py,{className:"p-4",children:[ie.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(null==(a=e.author_name)?void 0:a.substring(0,2).toUpperCase())||"UN"}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-white font-medium text-sm",children:e.author_name||"Unknown User"}),ie.jsx("p",{className:"text-gray-400 text-xs",children:(e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/864e5),s=Math.floor(n/36e5),a=Math.floor(n/6e4);return r>0?"".concat(r," day").concat(r>1?"s":""," ago"):s>0?"".concat(s," hour").concat(s>1?"s":""," ago"):a>0?"".concat(a," minute").concat(a>1?"s":""," ago"):"Just now"})(e.created_at)})]})]}),d&&ie.jsxs(w_,{children:[ie.jsx(N_,{asChild:!0,children:ie.jsx(by,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:ie.jsx(sh,{className:"h-4 w-4 text-gray-400"})})}),ie.jsx(k_,{align:"end",className:"bg-gray-800 border-gray-700",children:ie.jsxs(S_,{onClick:()=>n(e.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[ie.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]}),ie.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:e.content}),ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsxs(by,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"text-gray-400 hover:text-white h-7 px-2",children:[ie.jsx(Dh,{className:"w-3 h-3 mr-1"}),"Reply"]}),e.replies&&e.replies.length>0&&ie.jsxs("span",{className:"text-gray-500 text-xs flex items-center",children:[ie.jsx(Sh,{className:"w-3 h-3 mr-1"}),e.replies.length," ",1===e.replies.length?"reply":"replies"]})]}),i&&ie.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:ie.jsx(j_,{onSubmit:n=>ae(void 0,null,function*(){c(!0);try{yield t(n,e.id),o(!1)}finally{c(!1)}}),placeholder:"Write a reply...",buttonText:"Reply",loading:l})})]})}),e.replies&&e.replies.length>0&&ie.jsx("div",{className:"space-y-2",children:e.replies.map(e=>ie.jsx(C_,{comment:e,onReply:t,onDelete:n,currentUserId:r,level:s+1},e.id))})]})},P_=({teamId:e,teamName:t})=>{const[n,r]=st.useState(null),{comments:s,loading:a,addComment:i,deleteComment:o}=((e,t,n)=>{const[r,s]=st.useState([]),[a,i]=st.useState(!0),{toast:o}=im(),l=()=>ae(void 0,null,function*(){if(e){i(!0);try{const r="team"===t?e:n||"",{data:a,error:o}=yield Jh.from("comments").select("*").eq("team_id",e).eq("target_type",t).eq("target_id",r).order("created_at",{ascending:!0});if(o)throw o;if(!a||0===a.length)return s([]),void i(!1);const l=[...new Set(a.map(e=>e.author_id))],{data:c,error:d}=yield Jh.from("profiles").select("user_id, full_name").in("user_id",l),u=new Map;null==c||c.forEach(e=>{u.set(e.user_id,e)});const h=new Map,m=[];a.forEach(e=>{const t=u.get(e.author_id),n=Q(X({},e),{author_name:(null==t?void 0:t.full_name)||"Unknown User",replies:[]});h.set(e.id,n),e.parent_id||m.push(n)}),a.forEach(e=>{if(e.parent_id&&h.has(e.parent_id)){const t=h.get(e.parent_id),n=h.get(e.id);t&&n&&t.replies.push(n)}}),s(m)}catch(r){o({variant:"destructive",title:"Error loading comments",description:"Please try again later."})}finally{i(!1)}}else i(!1)});return st.useEffect(()=>{l()},[e,t,n]),st.useEffect(()=>{if(!e)return;const t=Jh.channel("team-comments-realtime").on("postgres_changes",{event:"*",schema:"public",table:"comments",filter:"team_id=eq.".concat(e)},()=>{l()}).subscribe();return()=>{Jh.removeChannel(t)}},[e]),{comments:r,loading:a,addComment:(r,s)=>ae(void 0,null,function*(){if(e)try{const{data:{user:a}}=yield Jh.auth.getUser();if(!(null==a?void 0:a.id))throw new Error("User not authenticated");const i="team"===t?e:n,{error:c}=yield Jh.from("comments").insert({content:r.trim(),team_id:e,target_id:i,target_type:t,parent_id:s||null,author_id:a.id});if(c)throw c;o({title:"Comment added",description:"Your comment has been posted."}),l()}catch(a){o({variant:"destructive",title:"Error adding comment",description:"Please try again."})}}),deleteComment:e=>ae(void 0,null,function*(){try{const{error:t}=yield Jh.from("comments").delete().eq("id",e);if(t)throw t;o({title:"Comment deleted",description:"Your comment has been removed."}),l()}catch(t){o({variant:"destructive",title:"Error deleting comment",description:"Please try again."})}}),refetch:l}})(e,"team");st.useEffect(()=>{ae(void 0,null,function*(){const{data:{user:e}}=yield Jh.auth.getUser();r((null==e?void 0:e.id)||null)})},[]);const l=(e,t)=>ae(void 0,null,function*(){yield i(e,t)});return a?ie.jsx("div",{className:"flex-1 flex items-center justify-center",children:ie.jsx("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):ie.jsxs("div",{className:"space-y-6",children:[ie.jsx("div",{className:"flex items-center justify-between",children:ie.jsxs("div",{children:[ie.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[ie.jsx(Sh,{className:"w-6 h-6"}),"Team Discussion"]}),ie.jsxs("p",{className:"text-gray-400 mt-1",children:["General team discussions for ",t]})]})}),ie.jsxs(Ny,{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 border-gray-700",children:[ie.jsx(ky,{className:"border-b border-gray-700",children:ie.jsx(Sy,{className:"text-white text-lg",children:"Start a Discussion"})}),ie.jsx(Py,{className:"p-6",children:ie.jsx(j_,{onSubmit:e=>ae(void 0,null,function*(){yield i(e)}),placeholder:"Share your thoughts with the team..."})})]}),0===s.length?ie.jsxs("div",{className:"text-center py-12 bg-gray-900/50 backdrop-blur-sm border border-gray-800/50 rounded-xl",children:[ie.jsx("div",{className:"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4",children:ie.jsx(Sh,{className:"w-8 h-8 text-gray-400"})}),ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No discussions yet"}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Start the conversation by posting the first comment!"})]}):ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[ie.jsx(Kh,{className:"w-4 h-4"}),s.length," ",1===s.length?"discussion":"discussions"]}),s.map((e,t)=>ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:ie.jsx(C_,{comment:e,onReply:l,onDelete:o,currentUserId:n})},e.id))]})]})},__=e=>{const[t,n]=st.useState([]),[r,s]=st.useState(!1),[a,i]=st.useState(null),{toast:o}=im(),l=()=>ae(void 0,null,function*(){if(e){s(!0),i(null);try{const{data:t,error:r}=yield Jh.from("project_completion_documents").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(r)throw r;n(t||[])}catch(t){const e=t instanceof Error?t.message:"Failed to fetch completion documents";i(e),o({title:"Error",description:e,variant:"destructive"})}finally{s(!1)}}else n([])});return st.useEffect(()=>{l()},[e]),{data:t,isLoading:r,error:a,uploadDocument:(t,n,r,s)=>ae(void 0,null,function*(){if(!e)return o({title:"Error",description:"No project selected",variant:"destructive"}),null;try{const{data:{user:a},error:i}=yield Jh.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:c,error:d}=yield Jh.from("projects").select("team_id").eq("id",e).single();if(d)throw d;if(!(null==c?void 0:c.team_id))throw new Error("Project is not associated with a team");const{data:u,error:h}=yield Jh.from("team_members").select("id").eq("team_id",c.team_id).eq("user_id",a.id).single();if(h||!u)throw new Error("User is not a member of this team");const m=t.name.split(".").pop(),p="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2),".").concat(m),f="".concat(e,"/").concat(p),{data:g,error:x}=yield Jh.storage.from("project-completion-documents").upload(f,t,{cacheControl:"3600",upsert:!1});if(x)throw new Error("Storage upload failed: ".concat(x.message));const{data:y,error:v}=yield Jh.from("project_completion_documents").insert({project_id:e,file_name:t.name,file_path:f,file_size:t.size,file_type:t.type,category:n,description:r,display_name:s||t.name,uploaded_by:a.id,team_id:c.team_id}).select().single();if(v)throw new Error("Database insert failed: ".concat(v.message));return o({title:"Success",description:"Document uploaded successfully"}),l(),y}catch(a){const e=a instanceof Error?a.message:"Failed to upload document";return o({title:"Error",description:e,variant:"destructive"}),null}}),updateDocument:(e,t)=>ae(void 0,null,function*(){try{const{error:n}=yield Jh.from("project_completion_documents").update(t).eq("id",e);if(n)throw n;o({title:"Success",description:"Document updated successfully"}),l()}catch(n){const e=n instanceof Error?n.message:"Failed to update document";throw o({title:"Error",description:e,variant:"destructive"}),n}}),deleteDocument:e=>ae(void 0,null,function*(){try{const{data:t,error:n}=yield Jh.from("project_completion_documents").select("file_path").eq("id",e).single();if(n)throw n;const{error:r}=yield Jh.storage.from("project-completion-documents").remove([t.file_path]);if(r)throw r;const{error:s}=yield Jh.from("project_completion_documents").delete().eq("id",e);if(s)throw s;o({title:"Success",description:"Document deleted successfully"}),l()}catch(t){const e=t instanceof Error?t.message:"Failed to delete document";o({title:"Error",description:e,variant:"destructive"})}}),getDocumentUrl:e=>{const{data:t}=Jh.storage.from("project-completion-documents").getPublicUrl(e);return t.publicUrl},refetch:l}};function E_(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>{const s=n(e)["__scope".concat(r)];return X(X({},t),s)},{});return st.useMemo(()=>({["__scope".concat(t.scopeName)]:r}),[r])}};return n.scopeName=t.scopeName,n}var T_="Progress",[D_,M_]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>st.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return st.useMemo(()=>({["__scope".concat(e)]:Q(X({},n),{[e]:r})}),[n,r])}};return r.scopeName=e,[function(t,r){const s=st.createContext(r),a=n.length;function i(t){const n=t,{scope:r,children:i}=n,o=J(n,["scope","children"]),l=(null==r?void 0:r[e][a])||s,c=st.useMemo(()=>o,Object.values(o));return ie.jsx(l.Provider,{value:c,children:i})}return n=[...n,r],i.displayName=t+"Provider",[i,function(n,i){const o=(null==i?void 0:i[e][a])||s,l=st.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},E_(r,...t)]}(T_),[A_,R_]=D_(T_),I_=st.forwardRef((e,t)=>{const n=e,{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=O_}=n,o=J(n,["__scopeProgress","value","max","getValueLabel"]);(a||0===a)&&V_(a);const l=V_(a)?a:100;null!==s&&U_(s,l);const c=U_(s,l)?s:null,d=B_(c)?i(c,l):void 0;return ie.jsx(A_,{scope:r,value:c,max:l,children:ie.jsx(oe.div,Q(X({"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":B_(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":z_(c,l),"data-value":null!=c?c:void 0,"data-max":l},o),{ref:t}))})});I_.displayName=T_;var F_="ProgressIndicator",L_=st.forwardRef((e,t)=>{var n;const r=e,{__scopeProgress:s}=r,a=J(r,["__scopeProgress"]),i=R_(F_,s);return ie.jsx(oe.div,Q(X({"data-state":z_(i.value,i.max),"data-value":null!=(n=i.value)?n:void 0,"data-max":i.max},a),{ref:t}))});function O_(e,t){return"".concat(Math.round(e/t*100),"%")}function z_(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function B_(e){return"number"==typeof e}function V_(e){return B_(e)&&!isNaN(e)&&e>0}function U_(e,t){return B_(e)&&!isNaN(e)&&e<=t&&e>=0}L_.displayName=F_;var q_=I_,W_=L_;const H_=st.forwardRef((e,t)=>{var n=e,{className:r,value:s}=n,a=J(n,["className","value"]);return ie.jsx(q_,Q(X({ref:t,className:zn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r)},a),{children:ie.jsx(W_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})}))});H_.displayName=q_.displayName;const Y_=[{value:"building-control",label:"Building Control"},{value:"certificates",label:"Certificates"},{value:"warranties",label:"Warranties"},{value:"approved-documents",label:"Approved Documents"},{value:"other",label:"Other"}],K_=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","image/tiff","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv","application/dxf","application/dwg","image/vnd.dwg"],G_=({projectId:e,teamId:t,onClose:n,onUploadComplete:r})=>{const[s,a]=st.useState([]),[i,o]=st.useState({}),[l,c]=st.useState(""),[d,u]=st.useState(""),[h,m]=st.useState(!1),[p,f]=st.useState(0),[g,x]=st.useState(!1),[y,v]=st.useState([]),{uploadDocument:b}=__(e),j=st.useCallback(e=>{if(!e)return;const t=[],n=[];Array.from(e).forEach(e=>{const r=(e=>K_.includes(e.type)?e.size>10485760?"".concat(e.name,": File too large. Maximum size is 10MB."):null:"".concat(e.name,": Unsupported file type. Please upload images, PDFs, Word docs, Excel files, or CAD drawings."))(e);if(r)n.push(r);else{t.push(e);const n=e.name.replace(/\.[^/.]+$/,"");o(t=>Q(X({},t),{[e.name]:n}))}}),a(e=>[...e,...t]),v(n)},[]),w=st.useCallback(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},[]),N=st.useCallback(e=>{e.preventDefault(),e.stopPropagation(),x(!1),j(e.dataTransfer.files)},[j]),k=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return ie.jsx(NP,{open:!0,onOpenChange:n,children:ie.jsxs(PP,{className:"w-[95vw] max-w-2xl max-h-[85vh] overflow-y-auto overflow-x-hidden mx-auto top-[2vh] translate-y-0 sm:top-[50%] sm:translate-y-[-50%]",children:[ie.jsx(_P,{className:"pb-3",children:ie.jsx(EP,{className:"text-lg",children:"Upload Completion Documents"})}),ie.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[ie.jsxs("div",{className:"relative border-2 border-dashed rounded-lg p-4 sm:p-6 text-center transition-colors ".concat(g?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"),onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:N,children:[ie.jsx(Wh,{className:"w-8 h-8 sm:w-10 sm:h-10 text-muted-foreground mx-auto mb-3"}),ie.jsx("p",{className:"text-base sm:text-lg font-medium text-foreground mb-2",children:"Drop files here or click to browse"}),ie.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:"Images, PDFs, Word docs, Excel files, and CAD drawings up to 10MB"}),ie.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",onChange:e=>j(e.target.files),className:"absolute inset-0 opacity-0 cursor-pointer"}),ie.jsx(by,{variant:"outline",size:"sm",children:"Choose Files"})]}),y.length>0&&ie.jsxs(wb,{variant:"destructive",children:[ie.jsx(Ju,{className:"w-4 h-4"}),ie.jsx(Nb,{children:ie.jsx("ul",{className:"list-disc list-inside space-y-1",children:y.map((e,t)=>ie.jsx("li",{children:e},t))})})]}),s.length>0&&ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs(Qy,{className:"text-sm",children:["Selected Files (",s.length,")"]}),ie.jsx("div",{className:"max-h-40 sm:max-h-48 overflow-y-auto space-y-2",children:s.map((e,t)=>{const n=(r=e.type).startsWith("image/")?gh:"application/pdf"===r?dh:ch;var r;return ie.jsxs(Du.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border rounded-lg p-3 space-y-2",children:[ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[ie.jsx(n,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),ie.jsxs("div",{className:"min-w-0 flex-1",children:[ie.jsx("p",{className:"font-medium text-xs text-muted-foreground truncate",title:e.name,children:e.name}),ie.jsx("p",{className:"text-xs text-muted-foreground",children:k(e.size)})]})]}),ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>(e=>{var t;const n=null==(t=s[e])?void 0:t.name;a(t=>t.filter((t,n)=>n!==e)),n&&o(e=>{const t=X({},e);return delete t[n],t})})(t),disabled:h,className:"h-6 w-6 p-0",children:ie.jsx(Qh,{className:"w-3 h-3"})})]}),ie.jsxs("div",{className:"space-y-1",children:[ie.jsx(Qy,{htmlFor:"doc-name-".concat(t),className:"text-xs",children:"Document Name *"}),ie.jsx(cy,{id:"doc-name-".concat(t),value:i[e.name]||"",onChange:t=>o(n=>Q(X({},n),{[e.name]:t.target.value})),placeholder:"Enter document name...",disabled:h,className:"h-8 text-sm"})]})]},t)})})]}),ie.jsxs("div",{className:"space-y-1",children:[ie.jsx(Qy,{htmlFor:"category",className:"text-sm",children:"Category *"}),ie.jsxs(mb,{value:l,onValueChange:c,disabled:h,children:[ie.jsx(fb,{className:"h-9",children:ie.jsx(pb,{placeholder:"Select document category"})}),ie.jsx(yb,{children:Y_.map(e=>ie.jsx(vb,{value:e.value,children:e.label},e.value))})]})]}),ie.jsxs("div",{className:"space-y-1",children:[ie.jsx(Qy,{htmlFor:"description",className:"text-sm",children:"Description (Optional)"}),ie.jsx(Fw,{id:"description",value:d,onChange:e=>u(e.target.value),placeholder:"Add a description for these documents...",disabled:h,rows:2,className:"text-sm"})]}),h&&ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between text-sm",children:[ie.jsx("span",{children:"Uploading documents..."}),ie.jsxs("span",{children:[Math.round(p),"%"]})]}),ie.jsx(H_,{value:p})]}),ie.jsxs("div",{className:"flex justify-end space-x-3",children:[ie.jsx(by,{variant:"outline",onClick:n,disabled:h,children:"Cancel"}),ie.jsx(by,{onClick:()=>ae(void 0,null,function*(){if(0!==s.length&&l){m(!0),f(0);try{for(let e=0;e<s.length;e++){const t=s[e],n=i[t.name]||t.name;yield b(t,l,d,n),f((e+1)/s.length*100)}r(),n()}catch(e){}finally{m(!1)}}}),disabled:0===s.length||!l||h||s.some(e=>{var t;return!(null==(t=i[e.name])?void 0:t.trim())}),children:h?"Uploading...":"Upload ".concat(s.length," File").concat(1!==s.length?"s":"")})]})]})]})})},X_=[{value:"building-control",label:"Building Control"},{value:"certificates",label:"Certificates"},{value:"warranties",label:"Warranties"},{value:"approved-documents",label:"Approved Documents"},{value:"other",label:"Other"}],Q_=({document:e,onClose:t,onDocumentUpdated:n})=>{const[r,s]=st.useState(e.display_name||e.file_name),[a,i]=st.useState(e.category),[o,l]=st.useState(e.description||""),[c,d]=st.useState(!1),{updateDocument:u}=__(e.project_id);return ie.jsx(NP,{open:!0,onOpenChange:t,children:ie.jsxs(PP,{className:"w-[95vw] max-w-md",children:[ie.jsx(_P,{children:ie.jsx(EP,{children:"Edit Document"})}),ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{className:"space-y-2",children:[ie.jsx(Qy,{htmlFor:"display-name",children:"Display Name *"}),ie.jsx(cy,{id:"display-name",value:r,onChange:e=>s(e.target.value),placeholder:"Enter document name...",disabled:c})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx(Qy,{htmlFor:"category",children:"Category *"}),ie.jsxs(mb,{value:a,onValueChange:i,disabled:c,children:[ie.jsx(fb,{children:ie.jsx(pb,{placeholder:"Select document category"})}),ie.jsx(yb,{children:X_.map(e=>ie.jsx(vb,{value:e.value,children:e.label},e.value))})]})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx(Qy,{htmlFor:"description",children:"Description"}),ie.jsx(Fw,{id:"description",value:o,onChange:e=>l(e.target.value),placeholder:"Add a description...",disabled:c,rows:3})]}),ie.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[ie.jsx(by,{variant:"outline",onClick:t,disabled:c,children:"Cancel"}),ie.jsx(by,{onClick:()=>ae(void 0,null,function*(){d(!0);try{yield u(e.id,{display_name:r.trim(),category:a,description:o.trim()||null}),null==n||n(),t()}catch(s){}finally{d(!1)}}),disabled:!r.trim()||!a||c,children:c?"Updating...":"Update Document"})]})]})]})})};var J_="Avatar",[Z_,$_]=le(J_),[eE,tE]=Z_(J_),nE=st.forwardRef((e,t)=>{const n=e,{__scopeAvatar:r}=n,s=J(n,["__scopeAvatar"]),[a,i]=st.useState("idle");return ie.jsx(eE,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:ie.jsx(oe.span,Q(X({},s),{ref:t}))})});nE.displayName=J_;var rE="AvatarImage",sE=st.forwardRef((e,t)=>{const n=e,{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{}}=n,i=J(n,["__scopeAvatar","src","onLoadingStatusChange"]),o=tE(rE,r),l=function(e,t){const[n,r]=st.useState("idle");return be(()=>{if(!e)return void r("error");let n=!0;const s=new window.Image,a=e=>()=>{n&&r(e)};return r("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{n=!1}},[e,t]),n}(s,i.referrerPolicy),c=Ce(e=>{a(e),o.onImageLoadingStatusChange(e)});return be(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?ie.jsx(oe.img,Q(X({},i),{ref:t,src:s})):null});sE.displayName=rE;var aE="AvatarFallback",iE=st.forwardRef((e,t)=>{const n=e,{__scopeAvatar:r,delayMs:s}=n,a=J(n,["__scopeAvatar","delayMs"]),i=tE(aE,r),[o,l]=st.useState(void 0===s);return st.useEffect(()=>{if(void 0!==s){const e=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==i.imageLoadingStatus?ie.jsx(oe.span,Q(X({},a),{ref:t})):null});iE.displayName=aE;var oE=nE,lE=sE,cE=iE;const dE=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(oE,X({ref:t,className:zn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r)},s))});dE.displayName=oE.displayName;st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(lE,X({ref:t,className:zn("aspect-square h-full w-full",r)},s))}).displayName=lE.displayName;const uE=st.forwardRef((e,t)=>{var n=e,{className:r}=n,s=J(n,["className"]);return ie.jsx(cE,X({ref:t,className:zn("flex h-full w-full items-center justify-center rounded-full bg-muted",r)},s))});uE.displayName=cE.displayName;const hE=(e,t)=>{const[n,r]=st.useState([]),[s,a]=st.useState(!0),[i,o]=st.useState(0),[l,c]=st.useState(null),{toast:d}=im(),u=()=>ae(void 0,null,function*(){if(!e||!t)return r([]),o(0),void a(!1);a(!0),c(null);try{const{data:n,error:s}=yield Jh.from("comments").select("*").eq("team_id",t).eq("target_type","completion_document").eq("target_id",e).order("created_at",{ascending:!0});if(s)return c(s.message),r([]),o(0),void a(!1);if(!n||0===n.length)return r([]),o(0),void a(!1);o(n.length);const i=[...new Set(n.map(e=>e.author_id))],{data:l}=yield Jh.from("profiles").select("user_id, full_name").in("user_id",i),d=new Map;null==l||l.forEach(e=>{d.set(e.user_id,e)});const u=new Map,h=[];n.forEach(e=>{const t=d.get(e.author_id),n={id:e.id,content:e.content,author_id:e.author_id,team_id:e.team_id,target_id:e.target_id,target_type:e.target_type,parent_id:e.parent_id,created_at:e.created_at,updated_at:e.updated_at,author_name:(null==t?void 0:t.full_name)||"Unknown User",replies:[]};u.set(e.id,n),e.parent_id||h.push(n)}),n.forEach(e=>{var t;if(e.parent_id){const n=u.get(e.parent_id),r=u.get(e.id);n&&r&&(null==(t=n.replies)||t.push(r))}}),r(h)}catch(n){c(n instanceof Error?n.message:"Unknown error"),r([]),o(0)}finally{a(!1)}});return st.useEffect(()=>{u()},[e,t]),st.useEffect(()=>{if(!e||!t)return;const n="document-comments-".concat(e,"-").concat(t,"-").concat(Date.now()),r=Jh.channel(n).on("postgres_changes",{event:"*",schema:"public",table:"comments",filter:"target_id=eq.".concat(e)},()=>{u()}).subscribe();return()=>{Jh.removeChannel(r)}},[e,t]),{comments:n||[],commentCount:i||0,loading:Boolean(s),error:l,addComment:(n,r)=>ae(void 0,null,function*(){if(e&&t)try{const{data:{user:s}}=yield Jh.auth.getUser();if(!(null==s?void 0:s.id))throw new Error("User not authenticated");const{error:a}=yield Jh.from("comments").insert({content:n.trim(),team_id:t,target_id:e,target_type:"completion_document",parent_id:r||null,author_id:s.id});if(a)throw a;d({title:"Comment added",description:"Your comment has been posted."}),u()}catch(s){d({variant:"destructive",title:"Error adding comment",description:"Please try again."})}}),deleteComment:e=>ae(void 0,null,function*(){try{const{error:t}=yield Jh.from("comments").delete().eq("id",e);if(t)throw t;d({title:"Comment deleted",description:"Your comment has been removed."}),u()}catch(t){d({variant:"destructive",title:"Error deleting comment",description:"Please try again."})}}),refetch:u}};var mE="Collapsible",[pE,fE]=le(mE),[gE,xE]=pE(mE),yE=st.forwardRef((e,t)=>{const n=e,{__scopeCollapsible:r,open:s,defaultOpen:a,disabled:i,onOpenChange:o}=n,l=J(n,["__scopeCollapsible","open","defaultOpen","disabled","onOpenChange"]),[c=!1,d]=Ee({prop:s,defaultProp:a,onChange:o});return ie.jsx(gE,{scope:r,disabled:i,contentId:Se(),open:c,onOpenToggle:st.useCallback(()=>d(e=>!e),[d]),children:ie.jsx(oe.div,Q(X({"data-state":kE(c),"data-disabled":i?"":void 0},l),{ref:t}))})});yE.displayName=mE;var vE="CollapsibleTrigger",bE=st.forwardRef((e,t)=>{const n=e,{__scopeCollapsible:r}=n,s=J(n,["__scopeCollapsible"]),a=xE(vE,r);return ie.jsx(oe.button,Q(X({type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":kE(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled},s),{ref:t,onClick:he(e.onClick,a.onOpenToggle)}))});bE.displayName=vE;var jE="CollapsibleContent",wE=st.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,s=J(n,["forceMount"]),a=xE(jE,e.__scopeCollapsible);return ie.jsx(me,{present:r||a.open,children:({present:e})=>ie.jsx(NE,Q(X({},s),{ref:t,present:e}))})});wE.displayName=jE;var NE=st.forwardRef((e,t)=>{const n=e,{__scopeCollapsible:r,present:s,children:a}=n,i=J(n,["__scopeCollapsible","present","children"]),o=xE(jE,r),[l,c]=st.useState(s),d=st.useRef(null),u=de(t,d),h=st.useRef(0),m=h.current,p=st.useRef(0),f=p.current,g=o.open||l,x=st.useRef(g),y=st.useRef();return st.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),be(()=>{const e=d.current;if(e){y.current=y.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();h.current=t.height,p.current=t.width,x.current||(e.style.transitionDuration=y.current.transitionDuration,e.style.animationName=y.current.animationName),c(s)}},[o.open,s]),ie.jsx(oe.div,Q(X({"data-state":kE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g},i),{ref:u,style:X({"--radix-collapsible-content-height":m?"".concat(m,"px"):void 0,"--radix-collapsible-content-width":f?"".concat(f,"px"):void 0},e.style),children:g&&a}))});function kE(e){return e?"open":"closed"}const SE=yE,CE=bE,PE=wE;class _E extends st.Component{constructor(e){super(e),Z(this,"maxRetries",2),Z(this,"handleRetry",()=>{this.state.retryCount<this.maxRetries?this.setState(e=>({hasError:!1,error:void 0,retryCount:e.retryCount+1,errorId:Math.random().toString(36).substr(2,9)})):window.location.reload()}),this.state={hasError:!1,errorId:Math.random().toString(36).substr(2,9),retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){e.message,e.stack,t.componentStack,this.props.context,this.state.errorId,(new Date).toISOString(),this.state.retryCount}render(){var e;if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const t=this.state.retryCount<this.maxRetries,n=(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred";return ie.jsxs(wb,{className:"my-4 border-destructive/50 bg-destructive/5",children:[ie.jsx(Ju,{className:"w-4 h-4 text-destructive"}),ie.jsxs(Nb,{className:"flex flex-col gap-3",children:[ie.jsxs("div",{children:[ie.jsxs("p",{className:"font-medium text-destructive",children:["Error in ",this.props.context||"component"]}),ie.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n}),!1]}),ie.jsx("div",{className:"flex gap-2",children:ie.jsxs(by,{variant:"outline",size:"sm",onClick:this.handleRetry,disabled:!t,className:"h-8",children:[ie.jsx(Th,{className:"w-3 h-3 mr-1"}),t?"Try Again (".concat(this.maxRetries-this.state.retryCount," left)"):"Refresh Page"]})})]})]})}return this.props.children}}const EE=({documentId:e,teamId:t,currentUserId:n})=>{if(!e||!t||"string"!=typeof e||"string"!=typeof t)return ie.jsx("div",{className:"p-4 text-center text-muted-foreground",children:ie.jsx("p",{className:"text-sm",children:"Comments are not available for this document."})});const[r,s]=st.useState(""),[a,i]=st.useState(null),[o,l]=st.useState(""),[c,d]=st.useState(!1);let u;try{u=hE(e,t)}catch(b){return ie.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[ie.jsx("p",{className:"text-sm",children:"Comments are temporarily unavailable."}),ie.jsx("p",{className:"text-xs mt-1",children:"Please try refreshing the page."})]})}const{comments:h,commentCount:m,loading:p,addComment:f,deleteComment:g,error:x}=u,y=e=>{try{return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown date"}catch(b){return"Invalid date"}},v=e=>{try{return e&&"string"==typeof e&&e.split(" ").map(e=>(null==e?void 0:e[0])||"").join("").toUpperCase().slice(0,2)||"UN"}catch(b){return"UN"}};return ie.jsx(_E,{context:"Document Comments",fallback:ie.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[ie.jsx(kh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),ie.jsx("p",{children:"Comments could not be loaded, but the document is still viewable."})]}),children:ie.jsxs(SE,{open:c,onOpenChange:d,children:[ie.jsx(CE,{asChild:!0,children:ie.jsxs(by,{variant:"outline",size:"sm",className:"flex items-center gap-2 w-full justify-start",children:[ie.jsx(kh,{className:"w-4 h-4"}),ie.jsx("span",{children:"Comments"}),m>0&&ie.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:m})]})}),ie.jsx(PE,{className:"mt-4",children:ie.jsxs(Ny,{children:[ie.jsx(ky,{className:"pb-3",children:ie.jsxs(Sy,{className:"text-lg flex items-center gap-2",children:[ie.jsx(kh,{className:"w-5 h-5"}),"Discussion"]})}),ie.jsxs(Py,{className:"space-y-4",children:[ie.jsxs("div",{className:"space-y-3",children:[ie.jsx(Fw,{placeholder:"Add a comment...",value:r,onChange:e=>s(e.target.value),rows:3,className:"resize-none"}),ie.jsx("div",{className:"flex justify-end",children:ie.jsxs(by,{onClick:()=>ae(void 0,null,function*(){if(r.trim())try{yield f(r),s("")}catch(b){}}),disabled:!r.trim()||p,size:"sm",children:[ie.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Post Comment"]})})]}),ie.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:p?ie.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading comments..."}):0===h.length?ie.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[ie.jsx(kh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),ie.jsx("p",{children:"No comments yet. Be the first to comment!"})]}):ie.jsx(Do,{children:h.map(e=>ie.jsxs(Du.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"border rounded-lg p-4 space-y-3",children:[ie.jsxs("div",{className:"flex items-start justify-between",children:[ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx(dE,{className:"w-8 h-8",children:ie.jsx(uE,{className:"text-xs",children:v(e.author_name||"Unknown")})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium text-sm",children:e.author_name}),ie.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[ie.jsx(th,{className:"w-3 h-3"}),y(e.created_at)]})]})]}),n===e.author_id&&ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>g(e.id),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:ie.jsx(Uh,{className:"w-3 h-3"})})]}),ie.jsx("p",{className:"text-sm leading-relaxed",children:e.content}),ie.jsx("div",{className:"flex items-center gap-2",children:ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>i(a===e.id?null:e.id),className:"text-xs h-6 px-2",children:"Reply"})}),a===e.id&&ie.jsxs(Du.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 ml-6",children:[ie.jsx(Fw,{placeholder:"Write a reply...",value:o,onChange:e=>l(e.target.value),rows:2,className:"resize-none text-sm"}),ie.jsxs("div",{className:"flex gap-2",children:[ie.jsx(by,{size:"sm",onClick:()=>{return t=e.id,ae(void 0,null,function*(){o.trim()&&(yield f(o,t),l(""),i(null))});var t},disabled:!o.trim(),className:"h-7 text-xs",children:"Reply"}),ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>{i(null),l("")},className:"h-7 text-xs",children:"Cancel"})]})]}),e.replies&&e.replies.length>0&&ie.jsx("div",{className:"ml-6 space-y-3 border-l-2 border-border pl-4",children:e.replies.map(e=>ie.jsxs(Du.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"space-y-2",children:[ie.jsxs("div",{className:"flex items-start justify-between",children:[ie.jsxs("div",{className:"flex items-center gap-2",children:[ie.jsx(dE,{className:"w-6 h-6",children:ie.jsx(uE,{className:"text-xs",children:v(e.author_name||"Unknown")})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium text-xs",children:e.author_name}),ie.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[ie.jsx(th,{className:"w-2 h-2"}),y(e.created_at)]})]})]}),n===e.author_id&&ie.jsx(by,{variant:"ghost",size:"sm",onClick:()=>g(e.id),className:"h-5 w-5 p-0 text-muted-foreground hover:text-destructive",children:ie.jsx(Uh,{className:"w-2 h-2"})})]}),ie.jsx("p",{className:"text-xs leading-relaxed",children:e.content})]},e.id))})]},e.id))})})]})]})})]})})},TE={"building-control":"Building Control",certificates:"Certificates",warranties:"Warranties","approved-documents":"Approved Documents",other:"Other"},DE=({document:e,onClose:t,onDocumentDeleted:n})=>{const[r,s]=st.useState(!1),[a,i]=st.useState(!1),[o,l]=st.useState(!1),[c,d]=st.useState(null),{deleteDocument:u,getDocumentUrl:h}=__(e.project_id);st.useEffect(()=>{ae(void 0,null,function*(){try{const{data:{user:e}}=yield Jh.auth.getUser();d((null==e?void 0:e.id)||null)}catch(e){d(null)}})},[]);const m=h(e.file_path),p=e.file_type.startsWith("image/"),f="application/pdf"===e.file_type,g=()=>ae(void 0,null,function*(){try{s(!0);const t=yield fetch(m),n=yield t.blob(),r=window.URL.createObjectURL(n),a=window.document.createElement("a");a.href=r,a.download=e.file_name,window.document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),window.document.body.removeChild(a)}catch(t){}finally{s(!1)}});return ie.jsxs(ie.Fragment,{children:[ie.jsx(NP,{open:!0,onOpenChange:t,children:ie.jsxs(PP,{className:"max-w-4xl w-[95vw] max-h-[95vh] flex flex-col","aria-describedby":"document-description",children:[ie.jsx(_P,{className:"flex-shrink-0",children:ie.jsx("div",{className:"flex items-start justify-between",children:ie.jsxs("div",{className:"flex-1 min-w-0",children:[ie.jsx(EP,{className:"text-base sm:text-lg font-semibold pr-8 break-words line-clamp-2",children:e.file_name}),ie.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[ie.jsx(wP,{variant:"secondary",className:"w-fit",children:TE[e.category]||e.category}),ie.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[ie.jsx("span",{children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(e.file_size)}),ie.jsx("span",{className:"hidden sm:inline",children:"•"}),ie.jsx("span",{children:(x=e.created_at,new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]})]})})}),ie.jsxs("div",{className:"flex-1 flex flex-col min-h-0 space-y-4",children:[e.description&&ie.jsxs("div",{id:"document-description",className:"flex-shrink-0 p-3 bg-muted/50 rounded-lg",children:[ie.jsx("h4",{className:"font-medium text-sm mb-2",children:"Description"}),ie.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),ie.jsx("div",{className:"flex-1 min-h-0 border rounded-lg overflow-hidden",children:p&&!a?ie.jsx("div",{className:"relative bg-muted h-full flex items-center justify-center",children:ie.jsx("img",{src:m,alt:e.file_name,className:"max-w-full max-h-full object-contain",onError:()=>i(!0)})}):f?ie.jsx("div",{className:"h-full w-full min-h-[300px]",children:ie.jsx("iframe",{src:"".concat(m,"#toolbar=1&navpanes=0&scrollbar=1"),className:"w-full h-full border-0",title:e.file_name})}):ie.jsx("div",{className:"h-full flex items-center justify-center p-6 text-center bg-muted/50",children:ie.jsxs("div",{children:[ie.jsx(dh,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),ie.jsx("h3",{className:"text-base font-medium text-foreground mb-2",children:"Preview not available"}),ie.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This file type cannot be previewed in the browser."}),ie.jsxs(by,{onClick:g,disabled:r,size:"sm",children:[ie.jsx(rh,{className:"w-4 h-4 mr-2"}),"Download to view"]})]})})}),p&&a&&ie.jsxs(wb,{className:"flex-shrink-0",children:[ie.jsx(Ju,{className:"w-4 h-4"}),ie.jsx(Nb,{children:"Unable to load image preview. You can still download the file to view it."})]}),ie.jsx("div",{className:"flex-shrink-0 border-t pt-4",children:(null==e?void 0:e.id)&&(null==e?void 0:e.team_id)?ie.jsx(EE,{documentId:String(e.id),teamId:String(e.team_id),currentUserId:c||void 0}):ie.jsx("div",{className:"p-4 text-center text-muted-foreground",children:ie.jsx("p",{className:"text-sm",children:"Comments not available - missing document information."})})}),ie.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 pt-4 border-t",children:[ie.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[ie.jsxs(by,{onClick:g,disabled:r,variant:"outline",size:"sm",children:[ie.jsx(rh,{className:"w-4 h-4 mr-2"}),"Download"]}),ie.jsxs(by,{onClick:()=>l(!0),variant:"outline",size:"sm",children:[ie.jsx(zh,{className:"w-4 h-4 mr-2"}),"Edit"]})]}),ie.jsxs(a_,{children:[ie.jsx(i_,{asChild:!0,children:ie.jsxs(by,{variant:"destructive",size:"sm",children:[ie.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Delete"]})}),ie.jsxs(c_,{className:"w-[90vw] max-w-md",children:[ie.jsxs(d_,{children:[ie.jsx(h_,{children:"Delete Document"}),ie.jsxs(m_,{className:"break-words",children:['Are you sure you want to delete "',e.file_name,'"? This action cannot be undone.']})]}),ie.jsxs(u_,{className:"flex-col sm:flex-row gap-2",children:[ie.jsx(f_,{className:"w-full sm:w-auto",children:"Cancel"}),ie.jsx(p_,{onClick:()=>ae(void 0,null,function*(){try{yield u(e.id),null==n||n(),t()}catch(r){}}),className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})]})}),o&&ie.jsx(Q_,{document:e,onClose:()=>l(!1),onDocumentUpdated:n})]});var x},ME=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},AE=e=>{const t=e.split("/")[1];return t?t.toUpperCase():"FILE"},RE={"building-control":"Building Control",certificates:"Certificates",warranties:"Warranties","approved-documents":"Approved Documents",other:"Other"},IE=({document:e,isImage:t,hasImageError:n,documentUrl:r,uploaderName:s,index:a,onViewDocument:i,onImageError:o})=>{const{commentCount:l}=hE(e.id,e.team_id);return ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:ie.jsx(Ny,{className:"group cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 border-border/50 hover:border-primary/20 w-full",onClick:()=>{try{e&&e.id&&e.team_id&&i(e)}catch(t){}},children:ie.jsxs(Py,{className:"p-0 w-full",children:[ie.jsxs("div",{className:"h-48 relative bg-gradient-to-br from-muted/30 to-muted/60 w-full",children:[t&&!n?ie.jsx("img",{src:r,alt:e.file_name,className:"w-full h-full object-cover object-center transition-transform duration-300 group-hover:scale-110",onError:()=>o(e.id),loading:"lazy",style:{transform:"scale(1.2)"}}):ie.jsx("div",{className:"w-full h-full flex items-center justify-center",children:ie.jsxs("div",{className:"text-center space-y-2",children:[ie.jsx("div",{className:"w-16 h-16 bg-background/80 rounded-2xl flex items-center justify-center mx-auto shadow-sm",children:ie.jsx(dh,{className:"w-8 h-8 text-muted-foreground"})}),ie.jsxs("div",{className:"space-y-1",children:[ie.jsx("p",{className:"text-xs font-medium text-foreground/80 uppercase tracking-wider",children:AE(e.file_type)}),ie.jsx("p",{className:"text-xs text-muted-foreground",children:ME(e.file_size)})]})]})}),ie.jsx("div",{className:"absolute top-3 left-3",children:ie.jsx(wP,{variant:"default",className:"text-xs shadow-sm",children:RE[e.category]||e.category})}),ie.jsx("div",{className:"absolute top-3 right-3",children:ie.jsxs("div",{className:"flex items-center gap-1 bg-green-500/90 text-white text-xs px-2 py-1 rounded-md shadow-sm",children:[ie.jsx(Yh,{className:"w-3 h-3"}),ie.jsx("span",{className:"font-medium",children:s.split(" ")[0]})]})}),ie.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300 flex items-center justify-center",children:ie.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:ie.jsx("div",{className:"bg-background/90 backdrop-blur-sm rounded-full p-3 shadow-lg",children:ie.jsx(oh,{className:"w-5 h-5 text-foreground"})})})})]}),ie.jsxs("div",{className:"p-4 space-y-3",children:[ie.jsxs("div",{className:"space-y-1",children:[ie.jsx("h4",{className:"font-medium text-base leading-tight line-clamp-2 text-foreground break-words",title:e.display_name||e.file_name,children:e.display_name||e.file_name}),t&&ie.jsx("p",{className:"text-sm text-muted-foreground",children:ME(e.file_size)})]}),e.description&&ie.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:e.description}),ie.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[ie.jsxs("div",{className:"flex items-center space-x-3 text-xs text-muted-foreground",children:[ie.jsxs("div",{className:"flex items-center space-x-1",children:[ie.jsx(Hu,{className:"w-3.5 h-3.5"}),ie.jsx("span",{children:(c=e.created_at,new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})]}),l>0&&ie.jsxs("div",{className:"flex items-center space-x-1",children:[ie.jsx(kh,{className:"w-3.5 h-3.5"}),ie.jsx("span",{children:l})]})]}),ie.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-md",children:"View →"})]})]})]})})});var c},FE=({documents:e,loading:t,onViewDocument:n})=>{const[r,s]=st.useState(new Set),[a,i]=st.useState(new Map),o=e=>{s(t=>new Set(t).add(e))};return st.useEffect(()=>{ae(void 0,null,function*(){if(0===e.length)return;const t=[...new Set(e.map(e=>e.uploaded_by))];try{const{data:e,error:n}=yield Jh.from("profiles").select("user_id, full_name").in("user_id",t);if(n)return;const r=new Map;null==e||e.forEach(e=>{r.set(e.user_id,e)}),i(r)}catch(n){}})},[e]),t?ie.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((e,t)=>ie.jsx(Ny,{className:"animate-pulse",children:ie.jsxs(Py,{className:"p-0",children:[ie.jsx("div",{className:"h-48 bg-muted rounded-t-lg"}),ie.jsxs("div",{className:"p-4 space-y-3",children:[ie.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),ie.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),ie.jsx("div",{className:"h-8 bg-muted rounded"})]})]})},t))}):0===e.length?ie.jsx(Ny,{className:"border-dashed",children:ie.jsxs(Py,{className:"p-8 text-center",children:[ie.jsx("div",{className:"w-16 h-16 bg-muted rounded-2xl flex items-center justify-center mx-auto mb-4",children:ie.jsx(dh,{className:"w-8 h-8 text-muted-foreground"})}),ie.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Documents Found"}),ie.jsx("p",{className:"text-muted-foreground text-sm",children:"Upload completion documents like building control certificates, warranties, and approved drawings."})]})}):ie.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 w-full overflow-hidden",children:e.map((e,t)=>{const s=e.file_type.startsWith("image/");const i=r.has(e.id),l=(e=>{const{data:t}=Jh.storage.from("project-completion-documents").getPublicUrl(e);return t.publicUrl})(e.file_path),c=a.get(e.uploaded_by),d=(null==c?void 0:c.full_name)||"Unknown User";return ie.jsx(IE,{document:e,isImage:s,hasImageError:i,documentUrl:l,uploaderName:d,index:t,onViewDocument:n,onImageError:o},e.id)})})},LE={"building-control":"Building Control",certificates:"Certificates",warranties:"Warranties","approved-documents":"Approved Documents",other:"Other"},OE=({teamId:e})=>{const[t,n]=st.useState(null),[r,s]=st.useState(""),[a,i]=st.useState("all"),[o,l]=st.useState(!1),[c,d]=st.useState(null),{projects:u,loading:h}=y_(e),{data:m,isLoading:p,refetch:f}=__(t),{getDocumentCountForProject:g,refetch:x}=(e=>{const[t,n]=st.useState([]),[r,s]=st.useState(!1),[a,i]=st.useState(null),{toast:o}=im(),l=()=>ae(void 0,null,function*(){if(e){s(!0),i(null);try{const{data:t,error:r}=yield Jh.from("project_completion_documents").select("*").eq("team_id",e).order("created_at",{ascending:!1});if(r)throw r;n(t||[])}catch(t){const e=t instanceof Error?t.message:"Failed to fetch team completion documents";i(e),o({title:"Error",description:e,variant:"destructive"})}finally{s(!1)}}else n([])});return st.useEffect(()=>{l()},[e]),{data:t,isLoading:r,error:a,getDocumentCountForProject:e=>t.filter(t=>t.project_id===e).length,getDocumentsByProject:e=>t.filter(t=>t.project_id===e),refetch:l}})(e),y=(null==u?void 0:u.filter(t=>t.team_id===e))||[],v=(null==m?void 0:m.filter(e=>{var t;const n=e.file_name.toLowerCase().includes(r.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(r.toLowerCase())),s="all"===a||e.category===a;return n&&s}))||[];if(h)return ie.jsx("div",{className:"flex items-center justify-center h-64",children:ie.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(!t)return ie.jsxs("div",{className:"space-y-6 p-4 md:p-6",children:[ie.jsxs("div",{className:"text-center space-y-4",children:[ie.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:ie.jsx(ch,{className:"w-8 h-8 text-primary"})}),ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-foreground mb-2",children:"Completion Documents"}),ie.jsx("p",{className:"text-muted-foreground text-base md:text-lg max-w-2xl mx-auto",children:"Manage building control documents, certificates, warranties and other completion documents for your team projects"})]})]}),ie.jsx("div",{className:"max-w-md mx-auto",children:ie.jsxs("div",{className:"relative",children:[ie.jsx(Rh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),ie.jsx(cy,{placeholder:"Search team projects...",value:r,onChange:e=>s(e.target.value),className:"pl-12 h-12 rounded-xl"})]})}),0===y.length?ie.jsx(Ny,{className:"max-w-lg mx-auto",children:ie.jsxs(Py,{className:"p-8 md:p-12 text-center",children:[ie.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:ie.jsx(qu,{className:"w-8 h-8 text-muted-foreground"})}),ie.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"No Team Projects Found"}),ie.jsx("p",{className:"text-muted-foreground",children:"Completion documents are only available for team projects. Create a team project first to get started."})]})}):ie.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:y.filter(e=>{var t;return e.name.toLowerCase().includes(r.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(r.toLowerCase()))}).map((e,t)=>{const r=(s=e.id,g(s));var s;return ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{scale:1.02,y:-4},className:"cursor-pointer",onClick:()=>n(e.id),children:ie.jsxs(Ny,{className:"h-full hover:shadow-lg transition-all duration-300",children:[ie.jsxs(ky,{className:"pb-3",children:[ie.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ie.jsx("div",{className:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center",children:ie.jsx(qu,{className:"w-5 h-5 text-primary-foreground"})}),ie.jsxs(wP,{variant:"secondary",className:"px-2 py-1",children:[r," docs"]})]}),ie.jsx(Sy,{className:"text-lg leading-tight",children:e.name}),e.description&&ie.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-2",children:e.description})]}),ie.jsx(Py,{className:"pt-0",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[ie.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),ie.jsx("span",{children:"Team Project"})]}),ie.jsx(by,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",children:"View Docs →"})]})})]})},e.id)})})]});const b=y.find(e=>e.id===t);return ie.jsxs("div",{className:"space-y-6 p-4 md:p-6",children:[ie.jsxs("div",{className:"space-y-4",children:[ie.jsx(by,{variant:"ghost",onClick:()=>n(null),className:"flex items-center gap-2 mb-4",children:"← Back to Projects"}),ie.jsxs("div",{className:"flex flex-col gap-4",children:[ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:null==b?void 0:b.name}),ie.jsx("p",{className:"text-muted-foreground text-sm md:text-base",children:"Building control documents, certificates, warranties and important project completion files"})]}),ie.jsxs(by,{onClick:()=>l(!0),className:"w-full sm:w-auto flex items-center gap-2 justify-center",children:[ie.jsx(Wh,{className:"w-4 h-4"}),ie.jsx("span",{children:"Upload Documents"})]})]})]}),ie.jsxs("div",{className:"flex flex-col gap-3",children:[ie.jsxs("div",{className:"relative",children:[ie.jsx(Rh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),ie.jsx(cy,{placeholder:"Search documents...",value:r,onChange:e=>s(e.target.value),className:"pl-10"})]}),ie.jsxs(mb,{value:a,onValueChange:i,children:[ie.jsx(fb,{className:"w-full",children:ie.jsx(pb,{placeholder:"All Categories"})}),ie.jsxs(yb,{children:[ie.jsx(vb,{value:"all",children:"All Categories"}),Object.entries(LE).map(([e,t])=>ie.jsx(vb,{value:e,children:t},e))]})]})]}),ie.jsx(FE,{documents:v,loading:p,onViewDocument:d}),o&&ie.jsx(G_,{projectId:t,teamId:e,onClose:()=>l(!1),onUploadComplete:()=>{l(!1),f(),x()}}),c&&ie.jsx(DE,{document:c,onClose:()=>d(null),onDocumentDeleted:()=>{f(),x()}})]})},zE=({user:e,subscriptionTier:t,onViewPlans:n,onStartNewChat:r})=>{const[s,a]=st.useState("overview"),[i,o]=st.useState(null),[l,c]=st.useState(null),{teams:d,loading:u,createTeam:h,refetch:m}=(e=>{const[t,n]=st.useState([]),[r,s]=st.useState(!0),{toast:a}=im(),i=()=>ae(void 0,null,function*(){if(e)try{const{data:t,error:r}=yield Jh.rpc("get_teams_for_user",{p_user_id:e});if(r)throw r;n(t||[])}catch(t){a({title:"Error",description:"Failed to load teams",variant:"destructive"})}finally{s(!1)}else s(!1)});return st.useEffect(()=>{i()},[e]),{teams:t,loading:r,createTeam:(t,n)=>ae(void 0,null,function*(){if(!e)return null;try{const{data:r,error:s}=yield Jh.from("teams").insert([{name:t,description:n,owner_id:e}]).select().single();if(s)throw s;const{error:o}=yield Jh.from("team_members").insert([{team_id:r.id,user_id:e,role:"owner"}]);if(o)throw o;return yield i(),a({title:"Success",description:"Team created successfully"}),r}catch(r){return a({title:"Error",description:"Failed to create team",variant:"destructive"}),null}}),refetch:i}})(null==e?void 0:e.id),{members:p,loading:f,inviteMember:g,createTestInvitation:x,updateMemberRole:y,removeMember:v}=Lw(i),b=(e=>{const[t,n]=st.useState({memberCount:0,projectCount:0,activeTaskCount:0,commentCount:0,loading:!0});return st.useEffect(()=>{if(!e)return void n(e=>Q(X({},e),{loading:!1}));const t=()=>ae(void 0,null,function*(){n(e=>Q(X({},e),{loading:!0}));try{const{data:t,error:r}=yield Jh.from("team_members").select("id").eq("team_id",e);if(r)throw r;const{data:s,error:a}=yield Jh.from("projects").select("id").eq("team_id",e);if(a)throw a;const{data:i,error:o}=yield Jh.from("project_schedule_of_works").select("id").eq("completed",!1).in("project_id",(null==s?void 0:s.map(e=>e.id))||[]);if(o)throw o;const{data:l,error:c}=yield Jh.from("comments").select("id").eq("team_id",e).eq("target_type","team").eq("target_id",e);if(c)throw c;n({memberCount:(null==t?void 0:t.length)||0,projectCount:(null==s?void 0:s.length)||0,activeTaskCount:(null==i?void 0:i.length)||0,commentCount:(null==l?void 0:l.length)||0,loading:!1})}catch(t){n(e=>Q(X({},e),{loading:!1}))}});t();const r=Jh.channel("team-members-changes").on("postgres_changes",{event:"*",schema:"public",table:"team_members",filter:"team_id=eq.".concat(e)},t).subscribe(),s=Jh.channel("team-projects-changes").on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:"team_id=eq.".concat(e)},t).subscribe(),a=Jh.channel("team-tasks-changes").on("postgres_changes",{event:"*",schema:"public",table:"project_schedule_of_works"},t).subscribe(),i=Jh.channel("team-comments-changes").on("postgres_changes",{event:"*",schema:"public",table:"comments",filter:"team_id=eq.".concat(e)},t).subscribe();return()=>{Jh.removeChannel(r),Jh.removeChannel(s),Jh.removeChannel(a),Jh.removeChannel(i)}},[e]),t})(i);lt.useEffect(()=>{d.length>0&&!i&&o(d[0].id)},[d,i]);const j=d.find(e=>e.id===i);lt.useEffect(()=>{j&&c(j.logo_url)},[j]);const w=(e,t)=>ae(void 0,null,function*(){try{const n=yield h(e,t);return n?(o(n.id),n):n}catch(n){throw n}});if(!("enterprise"===t))return ie.jsx("div",{className:"min-h-screen flex items-center justify-center p-8 text-center bg-gradient-to-br from-gray-900 via-black to-gray-900",children:ie.jsxs("div",{className:"max-w-lg",children:[ie.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-8 shadow-2xl",children:ie.jsx(Kh,{className:"w-10 h-10 text-white"})}),ie.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Team Collaboration"}),ie.jsx("p",{className:"text-gray-300 mb-8 text-lg leading-relaxed",children:"Unlock powerful team features with EezyBuild ProMax. Create teams, manage schedules, assign tasks, and collaborate seamlessly with your team members."}),ie.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl border border-gray-700 p-6 mb-8",children:[ie.jsx("h3",{className:"text-white font-semibold mb-4 text-xl",children:"ProMax Team Features:"}),ie.jsxs("div",{className:"grid grid-cols-1 gap-3 text-left",children:[ie.jsxs("div",{className:"flex items-center text-gray-300",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-3"}),"Create and manage multiple teams"]}),ie.jsxs("div",{className:"flex items-center text-gray-300",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-3"}),"Upload custom team logos"]}),ie.jsxs("div",{className:"flex items-center text-gray-300",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-3"}),"Advanced task scheduling & assignment"]}),ie.jsxs("div",{className:"flex items-center text-gray-300",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-3"}),"Share projects with team members"]}),ie.jsxs("div",{className:"flex items-center text-gray-300",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-3"}),"Real-time activity tracking"]}),ie.jsxs("div",{className:"flex items-center text-gray-300",children:[ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-3"}),"Role-based permissions"]})]})]}),ie.jsx(by,{onClick:n,className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-8 py-4 rounded-xl hover:from-emerald-600 hover:to-emerald-700 transition-all transform hover:scale-105 shadow-xl text-lg font-semibold",children:"Upgrade to ProMax"})]})});if(u)return ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),ie.jsx("p",{className:"text-gray-400",children:"Loading teams..."})]})});const N=e=>{switch(e){case"owner":return ie.jsx(nh,{className:"w-4 h-4 text-yellow-500"});case"admin":return ie.jsx(Lh,{className:"w-4 h-4 text-blue-500"});case"viewer":return ie.jsx(oh,{className:"w-4 h-4 text-gray-500"});default:return ie.jsx(Kh,{className:"w-4 h-4 text-emerald-500"})}};return 0===d.length?ie.jsx("div",{className:"min-h-screen flex items-center justify-center p-8 text-center bg-gradient-to-br from-gray-900 via-black to-gray-900",children:ie.jsxs("div",{className:"max-w-lg",children:[ie.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-8 shadow-2xl",children:ie.jsx(Kh,{className:"w-10 h-10 text-white"})}),ie.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Create Your First Team"}),ie.jsx("p",{className:"text-gray-300 mb-8 text-lg leading-relaxed",children:"Start collaborating with your team members by creating a team. Share projects, assign tasks, and work together efficiently."}),ie.jsx(TP,{onCreateTeam:w})]})}):ie.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white overflow-x-hidden",children:ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 w-full",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[ie.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-8",children:ie.jsxs("div",{className:"flex items-center space-x-6",children:[ie.jsx(MP,{teamId:i,currentLogoUrl:l,onLogoUpdate:e=>{c(e),m()}}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:(null==j?void 0:j.name)||"Team"}),ie.jsxs("div",{className:"flex items-center gap-4 text-gray-400",children:[ie.jsxs("div",{className:"flex items-center gap-1",children:[ie.jsx(Kh,{className:"w-4 h-4"}),p.length," members"]}),(null==j?void 0:j.description)&&ie.jsx("p",{className:"text-gray-400",children:j.description})]})]})]})}),d.length>1&&ie.jsx("div",{className:"mb-6",children:ie.jsx("select",{value:i||"",onChange:e=>o(e.target.value),className:"bg-gray-800/50 border border-gray-600 text-white px-4 py-3 rounded-xl hover:border-gray-500 transition-colors",children:d.map(e=>ie.jsx("option",{value:e.id,children:e.name},e.id))})}),ie.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm p-2 rounded-xl",children:[ie.jsxs("div",{className:"hidden md:flex justify-between items-center w-full",children:[ie.jsx("div",{className:"flex gap-2",children:[{id:"overview",label:"Overview",icon:dh},{id:"projects",label:"Projects",icon:dh},{id:"completion-docs",label:"Completion Docs",icon:Zu},{id:"tasks",label:"Active Tasks",icon:Hu},{id:"schedule",label:"Schedule",icon:Hu},{id:"comments",label:"Comments",icon:Sh}].map(e=>ie.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-medium transition-all ".concat(s===e.id?"bg-emerald-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-800/50"),children:[ie.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),ie.jsx("div",{className:"flex gap-2",children:[{id:"members",label:"Members",icon:Kh},{id:"settings",label:"Settings",icon:Fh}].map(e=>ie.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-medium transition-all ".concat(s===e.id?"bg-emerald-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-800/50"),children:[ie.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})]}),ie.jsx("div",{className:"md:hidden grid grid-cols-2 gap-2",children:[{id:"overview",label:"Overview",icon:dh},{id:"projects",label:"Projects",icon:dh},{id:"completion-docs",label:"Completion Docs",icon:Zu},{id:"tasks",label:"Active Tasks",icon:Hu},{id:"schedule",label:"Schedule",icon:Hu},{id:"comments",label:"Comments",icon:Sh},{id:"members",label:"Members",icon:Kh},{id:"settings",label:"Settings",icon:Fh}].map(e=>ie.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-medium transition-all ".concat(s===e.id?"bg-emerald-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-800/50"),children:[ie.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})]})]}),ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:["overview"===s&&ie.jsxs("div",{className:"space-y-8",children:[ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[ie.jsx(Ny,{className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 border-gray-700 hover:border-gray-600 transition-all cursor-pointer hover:scale-105",onClick:()=>a("members"),children:ie.jsx(Py,{className:"p-6",children:ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl",children:ie.jsx(Kh,{className:"w-6 h-6 text-emerald-400"})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-3xl font-bold text-white",children:b.memberCount}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Team Members"})]})]})})}),ie.jsx(Ny,{className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 border-gray-700 hover:border-gray-600 transition-all cursor-pointer hover:scale-105",onClick:()=>a("projects"),children:ie.jsx(Py,{className:"p-6",children:ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:ie.jsx(dh,{className:"w-6 h-6 text-blue-400"})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-3xl font-bold text-white",children:b.projectCount}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Projects"})]})]})})}),ie.jsx(Ny,{className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 border-gray-700 hover:border-gray-600 transition-all cursor-pointer hover:scale-105",onClick:()=>a("tasks"),children:ie.jsx(Py,{className:"p-6",children:ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsx("div",{className:"p-3 bg-orange-500/20 rounded-xl",children:ie.jsx(Hu,{className:"w-6 h-6 text-orange-400"})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-3xl font-bold text-white",children:b.activeTaskCount}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Active Tasks"})]})]})})}),ie.jsx(Ny,{className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 border-gray-700 hover:border-gray-600 transition-all cursor-pointer hover:scale-105",onClick:()=>a("comments"),children:ie.jsx(Py,{className:"p-6",children:ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsx("div",{className:"p-3 bg-purple-500/20 rounded-xl",children:ie.jsx(Sh,{className:"w-6 h-6 text-purple-400"})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-3xl font-bold text-white",children:b.commentCount}),ie.jsx("p",{className:"text-sm text-gray-400",children:"Team Comments"})]})]})})})]}),ie.jsxs(Ny,{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-gray-700",children:[ie.jsx(ky,{className:"border-b border-gray-700",children:ie.jsxs(Sy,{className:"text-white flex items-center gap-2",children:[ie.jsx(Sh,{className:"w-5 h-5"}),"Recent Team Activity"]})}),ie.jsx(Py,{className:"p-8",children:ie.jsxs("div",{className:"text-center text-gray-400",children:[ie.jsx("div",{className:"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4",children:ie.jsx(Sh,{className:"w-8 h-8 opacity-50"})}),ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No recent activity"}),ie.jsx("p",{className:"text-sm",children:"Team activity will appear here once you start collaborating"})]})})]})]}),"members"===s&&ie.jsxs("div",{className:"space-y-6",children:[ie.jsxs("div",{className:"flex justify-between items-center",children:[ie.jsx("h3",{className:"text-2xl font-bold text-white",children:"Team Members"}),ie.jsx(DP,{onInviteMember:g,onCreateTestInvitation:x})]}),ie.jsxs("div",{className:"grid gap-4 w-full",children:[p.map(e=>{var t,n,r;return ie.jsx(Ny,{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-gray-700 hover:border-gray-600 transition-all w-full",children:ie.jsx(Py,{className:"p-4 sm:p-6",children:ie.jsxs("div",{className:"flex items-center justify-between w-full min-w-0",children:[ie.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[ie.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center text-white font-semibold text-sm sm:text-lg shadow-lg flex-shrink-0",children:(null==(n=null==(t=e.profiles)?void 0:t.full_name)?void 0:n.substring(0,2).toUpperCase())||"UN"}),ie.jsxs("div",{className:"flex-1 min-w-0",children:[ie.jsx("p",{className:"text-white font-semibold text-sm sm:text-lg truncate",children:(null==(r=e.profiles)?void 0:r.full_name)||"Unknown User"}),ie.jsxs("p",{className:"text-gray-400 text-xs sm:text-sm truncate",children:["Joined ",new Date(e.joined_at).toLocaleDateString()]})]})]}),ie.jsx("div",{className:"flex items-center ml-2 flex-shrink-0",children:ie.jsxs(wP,{variant:"outline",className:"border-gray-600 text-gray-300 px-2 sm:px-3 py-1 flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[N(e.role),ie.jsx("span",{className:"capitalize font-medium",children:e.role})]})})]})})},e.id)}),0===p.length&&ie.jsxs("div",{className:"text-center py-12 text-gray-400",children:[ie.jsx("div",{className:"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4",children:ie.jsx(Kh,{className:"w-8 h-8 opacity-50"})}),ie.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No team members yet"}),ie.jsx("p",{className:"text-sm",children:"Invite members to start collaborating"})]})]})]}),"projects"===s&&(i&&j?ie.jsx(v_,{user:e,teamId:i,teamName:j.name,onStartNewChat:r}):ie.jsxs("div",{className:"text-center py-12 text-white",children:[ie.jsx("p",{children:"Loading team data..."}),ie.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Team ID: ",i||"missing",", Team: ",(null==j?void 0:j.name)||"missing"]})]})),"tasks"===s&&i&&j&&ie.jsx(b_,{teamId:i,teamName:j.name}),"schedule"===s&&i&&ie.jsx(x_,{teamId:i,members:p}),"comments"===s&&i&&j&&ie.jsx(P_,{teamId:i,teamName:j.name}),"completion-docs"===s&&i&&ie.jsx(OE,{teamId:i}),"settings"===s&&j&&ie.jsx(g_,{team:j,onTeamUpdate:m,onCreateTeam:w,onTeamDelete:()=>{o(null),m()},isOwner:j.owner_id===(null==e?void 0:e.id)})]},s)]})})};var BE,VE,UE,qE;(VE=BE||(BE={})).Dark="DARK",VE.Light="LIGHT",VE.Default="DEFAULT",(qE=UE||(UE={})).None="NONE",qE.Slide="SLIDE",qE.Fade="FADE";const WE=Iy("StatusBar"),HE=Iy("SplashScreen",{web:()=>gt(()=>import("./web-DuF0l7H9.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>new e.SplashScreenWeb)}),YE=Iy("App",{web:()=>gt(()=>import("./web-DjJCOond.js"),__vite__mapDeps([5,1,2,3,4])).then(e=>new e.AppWeb)}),KE=Iy("Device",{web:()=>gt(()=>import("./web-ENRqioN5.js"),__vite__mapDeps([6,1,2,3,4])).then(e=>new e.DeviceWeb)});var GE,XE,QE,JE;(XE=GE||(GE={})).Heavy="HEAVY",XE.Medium="MEDIUM",XE.Light="LIGHT",(JE=QE||(QE={})).Success="SUCCESS",JE.Warning="WARNING",JE.Error="ERROR";const ZE=Iy("Haptics",{web:()=>gt(()=>import("./web-CFbqs6HA.js"),__vite__mapDeps([7,1,2,3,4])).then(e=>new e.HapticsWeb)}),$E=Iy("Network",{web:()=>gt(()=>import("./web-BseZIyxS.js"),__vite__mapDeps([8,1,2,3,4])).then(e=>new e.NetworkWeb)});const eT=new class{constructor(){Z(this,"isNative"),Z(this,"isIOS"),Z(this,"isAndroid"),Z(this,"isWeb"),this.isNative=Ry.isNativePlatform(),this.isIOS="ios"===Ry.getPlatform(),this.isAndroid="android"===Ry.getPlatform(),this.isWeb="web"===Ry.getPlatform()}hapticImpact(){return ae(this,arguments,function*(e=GE.Medium){if(this.isNative)try{yield ZE.impact({style:e})}catch(t){}})}hapticNotification(){return ae(this,arguments,function*(e=QE.Success){if(this.isNative)try{yield ZE.notification({type:e})}catch(t){}})}hapticSelection(){return ae(this,null,function*(){if(this.isNative)try{yield ZE.selectionStart(),yield ZE.selectionChanged(),yield ZE.selectionEnd()}catch(e){}})}setStatusBarStyle(e){return ae(this,null,function*(){if(this.isNative)try{yield WE.setStyle({style:e})}catch(t){}})}setStatusBarBackgroundColor(e){return ae(this,null,function*(){if(this.isNative)try{yield WE.setBackgroundColor({color:e})}catch(t){}})}hideStatusBar(){return ae(this,null,function*(){if(this.isNative)try{yield WE.hide()}catch(e){}})}showStatusBar(){return ae(this,null,function*(){if(this.isNative)try{yield WE.show()}catch(e){}})}addAppStateListener(e){if(!this.isNative)return()=>{};try{const t=YE.addListener("appStateChange",e);return()=>t.remove()}catch(t){return()=>{}}}addUrlOpenListener(e){if(!this.isNative)return()=>{};try{const t=YE.addListener("appUrlOpen",t=>{e(t.url)});return()=>t.remove()}catch(t){return()=>{}}}exitApp(){return ae(this,null,function*(){if(this.isNative)try{yield YE.exitApp()}catch(e){}})}getDeviceInfo(){return ae(this,null,function*(){if(!this.isNative)return{model:"Web Browser",platform:"web",operatingSystem:"unknown",osVersion:"unknown",manufacturer:"unknown",isVirtual:!1,webViewVersion:"unknown"};try{return yield KE.getInfo()}catch(e){return null}})}getDeviceId(){return ae(this,null,function*(){if(!this.isNative)return"web-"+Date.now().toString();try{const e=yield KE.getId();return e.identifier||e.uuid||"unknown"}catch(e){return"unknown"}})}getBatteryInfo(){return ae(this,null,function*(){if(!this.isNative)return{batteryLevel:-1,isCharging:!1};try{return yield KE.getBatteryInfo()}catch(e){return{batteryLevel:-1,isCharging:!1}}})}getNetworkStatus(){return ae(this,null,function*(){if(!this.isNative)return{connected:navigator.onLine,connectionType:"wifi"};try{return yield $E.getStatus()}catch(e){return{connected:!1,connectionType:"none"}}})}addNetworkListener(e){if(!this.isNative){const t=()=>e({connected:!0,connectionType:"wifi"}),n=()=>e({connected:!1,connectionType:"none"});return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}try{const t=$E.addListener("networkStatusChange",e);return()=>t.remove()}catch(t){return()=>{}}}hideSplashScreen(){return ae(this,null,function*(){if(this.isNative)try{yield HE.hide()}catch(e){}})}showSplashScreen(){return ae(this,null,function*(){if(this.isNative)try{yield HE.show({showDuration:2e3,fadeInDuration:300,fadeOutDuration:300,autoHide:!0})}catch(e){}})}initializeNativeFeatures(){return ae(this,null,function*(){if(this.isNative)try{(this.isIOS||this.isAndroid)&&(yield this.setStatusBarStyle(BE.Dark),yield this.setStatusBarBackgroundColor("#000000")),setTimeout(()=>ae(this,null,function*(){yield this.hideSplashScreen()}),1e3)}catch(e){}})}successFeedback(){return ae(this,null,function*(){yield this.hapticNotification(QE.Success)})}errorFeedback(){return ae(this,null,function*(){yield this.hapticNotification(QE.Error)})}warningFeedback(){return ae(this,null,function*(){yield this.hapticNotification(QE.Warning)})}lightImpact(){return ae(this,null,function*(){yield this.hapticImpact(GE.Light)})}mediumImpact(){return ae(this,null,function*(){yield this.hapticImpact(GE.Medium)})}heavyImpact(){return ae(this,null,function*(){yield this.hapticImpact(GE.Heavy)})}},tT=()=>{const e=ct(),[t,n]=st.useState("chat"),[r,s]=st.useState(!1),[a,i]=st.useState(null),[o,l]=st.useState(null),[c,d]=st.useState(!0),[u,h]=st.useState(!1),[m,p]=st.useState(null),[f,g]=st.useState(null),{subscription:x,hasActiveSubscription:y,refetch:v}=lm(null==a?void 0:a.id);(()=>{const e=ct();st.useEffect(()=>{let e=null;if(eT.isNative)e=eT.addUrlOpenListener(e=>{t(e)});else{const e=new URLSearchParams(window.location.search).get("link");if(e)try{const n=decodeURIComponent(e);t(n);const r=window.location.pathname;window.history.replaceState({},document.title,r)}catch(n){}}return()=>{e&&e()}},[e]);const t=t=>{try{const n=new URL(t);let r=n.pathname;const s=n.searchParams;if("eezybuild:"===n.protocol?r=n.pathname||n.hostname:"https:"===n.protocol&&"eezybuild.com"===n.hostname&&(r=n.pathname),r.startsWith("/")&&(r=r.substring(1)),""===r||"/"===r)e("/");else if(r.startsWith("profile/")){const t=r.split("/")[1];e("/profile/".concat(t))}else if(r.startsWith("notifications"))e("/notifications");else if(r.startsWith("team-invite")){const t=s.get("token");e(t?"/team-invite?token=".concat(t):"/team-invite")}else if(r.startsWith("password-reset")){const t=s.get("token");e(t?"/password-reset?token=".concat(t):"/password-reset")}else if(r.startsWith("project/")){const t=r.split("/")[1];e(t?"/?project=".concat(t):"/")}else if(r.startsWith("chat/")){const t=r.split("/")[1];e(t?"/?conversation=".concat(t):"/")}else e("/".concat(r));eT.isNative&&eT.lightImpact()}catch(n){e("/"),eT.isNative&&eT.errorFeedback()}},n=(e,t)=>{const n=eT.isNative?"eezybuild://":"https://eezybuild.com/";let r=e.startsWith("/")?e.substring(1):e;if(t&&Object.keys(t).length>0){const e=new URLSearchParams(t);r+="?".concat(e.toString())}return"".concat(n).concat(r)}})(),st.useEffect(()=>{const e=new URLSearchParams(window.location.search);if("true"===e.get("success")){e.get("session_id");const t=window.location.pathname;window.history.replaceState({},document.title,t);const r=()=>ae(void 0,null,function*(){if(null==a?void 0:a.id){yield v();const e=[3e3,8e3,15e3,3e4,6e4];for(let t=0;t<e.length;t++)setTimeout(()=>ae(void 0,null,function*(){yield v()}),e[t])}});setTimeout(r,1e3),n("subscription")}},[null==a?void 0:a.id,v]),st.useEffect(()=>{const{data:{subscription:e}}=Jh.auth.onAuthStateChange((e,t)=>{var n,r,a;if(l(t),null==t?void 0:t.user){const e={id:t.user.id,email:t.user.email,name:(null==(n=t.user.user_metadata)?void 0:n.name)||(null==(r=t.user.email)?void 0:r.split("@")[0]),subscription:"pro",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(t.user.email)};i(e),s(!0);const o=null==(a=t.user.user_metadata)?void 0:a.onboarding_completed;h(!o)}else i(null),s(!1),h(!1);d(!1)});return Jh.auth.getSession().then(({data:{session:e}})=>{var t,n,r;if(l(e),null==e?void 0:e.user){const a={id:e.user.id,email:e.user.email,name:(null==(t=e.user.user_metadata)?void 0:t.name)||(null==(n=e.user.email)?void 0:n.split("@")[0]),subscription:"pro",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(e.user.email)};i(a),s(!0);const o=null==(r=e.user.user_metadata)?void 0:r.onboarding_completed;h(!o)}d(!1)}),()=>e.unsubscribe()},[]);const b=e=>ae(void 0,null,function*(){try{yield Jh.auth.updateUser({data:{onboarding_completed:!0,full_name:e.fullName,address:e.address,occupation:e.occupation,date_of_birth:e.dateOfBirth}}),i(e),h(!1)}catch(t){}}),j=y&&x?x.plan_type:"none",w=(()=>{const e=[{id:"chat",icon:kh,label:"Chat"}];return y&&x&&("basic"===x.plan_type||"pro"===x.plan_type||"enterprise"===x.plan_type)&&e.push({id:"apps",icon:Xh,label:"Tools"}),y&&x&&"enterprise"===x.plan_type&&(e.push({id:"search",icon:Rh,label:"Search"}),e.push({id:"projects",icon:hh,label:"Projects"})),e.push({id:"team",icon:Kh,label:"Team"}),e.push({id:"profile",icon:Yh,label:"Profile"},{id:"subscription",icon:nh,label:"Plans"}),e})();st.useEffect(()=>{w.map(e=>e.id).includes(t)||n("chat")},[j,t]);const N=(e,t)=>{p(e),g(t||null),n("chat")},k=()=>{p(null),g(null)},S=()=>{n("subscription")};if(c)return ie.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-black to-gray-950 flex items-center justify-center",children:ie.jsx(Du.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full"})});if(!r)return ie.jsx(Yy,{onAuth:e=>{s(e)},setUser:i});if(u)return ie.jsx(bP,{user:a,onComplete:b});return ie.jsxs("div",{className:"h-screen h-dvh bg-gradient-to-br from-gray-950 via-black to-gray-950 text-white flex flex-col overflow-hidden font-inter fixed w-full top-0 left-0",children:[ie.jsx(Du.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"glass border-b border-white/5 px-6 py-4 flex-shrink-0 safe-area-top",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsxs(Du.div,{className:"flex items-center",whileHover:{scale:1.01},transition:{type:"spring",stiffness:400,damping:30},children:[ie.jsx("div",{className:"w-40 h-24 flex items-center",children:ie.jsx("img",{src:"/lovable-uploads/60efe7f3-1624-45e4-bea6-55cacb90fa21.png",alt:"EezyBuild Logo",className:"w-full h-full object-contain"})}),ie.jsx("div",{className:"ml-4",children:m&&ie.jsx("p",{className:"text-sm text-emerald-400",children:"Project Chat Mode"})})]}),ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsxs(Du.button,{onClick:()=>e("/notifications"),className:"relative p-2 rounded-full bg-gray-800/50 hover:bg-gray-700/50 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:[ie.jsx(Ou,{className:"w-5 h-5 text-gray-300"}),ie.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),ie.jsxs(Du.div,{className:"flex items-center space-x-3 bg-emerald-500/10 backdrop-blur-sm px-4 py-2 rounded-full border border-emerald-500/20",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,ease:[.4,0,.2,1]},children:[ie.jsx(nh,{className:"w-4 h-4 text-emerald-400"}),ie.jsx("span",{className:"text-sm text-emerald-300 font-medium",children:(()=>{if(!y||!x)return"No Plan";switch(x.plan_type){case"basic":return"EezyBuild";case"pro":return"Pro";case"enterprise":return"ProMax";default:return"No Plan"}})()})]})]})]})}),ie.jsx("main",{className:"flex-1 min-h-0 overflow-y-auto pb-24",children:ie.jsx(Do,{mode:"wait",children:ie.jsx(Du.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3,ease:[.4,0,.2,1]},className:"h-full overflow-y-auto",children:(()=>{switch(t){case"chat":return ie.jsx(wy,{user:a,onViewPlans:S,projectId:m,conversationId:f,onChatComplete:k});case"search":return"enterprise"!==j?ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8 text-center",children:ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"ProMax Required"}),ie.jsx("p",{className:"text-gray-400 mb-6",children:"Advanced Search is only available for EezyBuild ProMax subscribers."}),ie.jsx("button",{onClick:()=>n("profile"),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-2 rounded-lg",children:"Upgrade to ProMax"})]})}):ie.jsx(_w,{user:a});case"apps":return"none"===j?ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8 text-center",children:ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Subscription Required"}),ie.jsx("p",{className:"text-gray-400 mb-6",children:"Building Tools are available for EezyBuild, Pro and ProMax subscribers."}),ie.jsx("button",{onClick:S,className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-2 rounded-lg",children:"Choose a Plan"})]})}):ie.jsx(Iw,{user:a,subscriptionTier:j,onViewPlans:S});case"projects":return"enterprise"!==j?ie.jsx("div",{className:"flex-1 flex items-center justify-center p-8 text-center",children:ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"ProMax Required"}),ie.jsx("p",{className:"text-gray-400 mb-6",children:"Projects feature is only available for EezyBuild ProMax subscribers."}),ie.jsx("button",{onClick:S,className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-2 rounded-lg",children:"Upgrade to ProMax"})]})}):ie.jsx(AN,{user:a,onStartNewChat:N});case"team":return ie.jsx(zE,{user:a,subscriptionTier:j,onViewPlans:S,onStartNewChat:N});case"profile":return ie.jsx(Ey,{user:a,onNavigateToSettings:S,onNavigateToAccountSettings:()=>n("account-settings")});case"subscription":return ie.jsx(Hy,{user:a,onBack:()=>n("profile")});case"account-settings":return ie.jsx(_y,{user:a,onBack:()=>n("profile")});default:return ie.jsx(wy,{user:a,onViewPlans:S})}})()},t)})}),ie.jsx(Du.nav,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1,ease:[.4,0,.2,1]},className:"fixed bottom-0 left-0 right-0 glass border-t border-white/5 px-4 py-3 safe-area-bottom",children:ie.jsx("div",{className:"flex justify-center items-center w-full",children:ie.jsx("div",{className:"flex w-full max-w-md mx-auto justify-center",children:w.map((e,r)=>{const s=e.icon,a=t===e.id;return ie.jsxs(Du.button,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.05*r,ease:[.4,0,.2,1]},whileTap:{scale:.96},whileHover:{scale:1.02},onClick:()=>n(e.id),className:"relative flex flex-col items-center py-2 px-4 rounded-xl transition-all duration-200 flex-1 min-w-0 ".concat(a?"bg-emerald-500/15 text-emerald-300 backdrop-blur-sm border border-emerald-500/20":"text-gray-400 hover:text-emerald-300 hover:bg-emerald-500/5"),children:[ie.jsx(s,{className:"w-5 h-5 transition-all duration-200 ".concat(a?"text-emerald-300":"")}),ie.jsx("span",{className:"text-xs mt-1 font-medium truncate",children:e.label}),a&&ie.jsx(Du.div,{layoutId:"activeTab",className:"absolute -bottom-1 w-2 h-2 bg-emerald-400 rounded-full shadow-sm",transition:{type:"spring",stiffness:500,damping:30}})]},e.id)})})})})]})},nT=()=>{const e=dt();return st.useEffect(()=>{},[e.pathname]),ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),ie.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),ie.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},rT=[{id:"1",title:"Fire Safety Requirements Update - Part B",description:"New requirements for fire safety systems in residential buildings over 18 metres. Enhanced sprinkler system specifications and evacuation route standards.",effectiveDate:"2024-04-01",publishedDate:"2024-01-15",categories:["residential"],severity:"high",sections:["Part B - Fire Safety","Section 2.3 - Sprinkler Systems"],isRead:!1},{id:"2",title:"Accessibility Standards - Part M Amendment",description:"Updated accessibility requirements for commercial buildings including new lift specifications and accessible parking provisions.",effectiveDate:"2024-03-15",publishedDate:"2024-01-10",categories:["commercial","mixed-use"],severity:"medium",sections:["Part M - Access","Section 4.2 - Lifts"],isRead:!0},{id:"3",title:"Energy Efficiency Standards - Part L Updates",description:"Revised thermal performance standards for new constructions. Updated U-values and air permeability requirements.",effectiveDate:"2024-05-01",publishedDate:"2024-02-01",categories:["residential","commercial","industrial"],severity:"medium",sections:["Part L - Conservation of Fuel and Power"],isRead:!1},{id:"4",title:"Critical Safety Update - Structural Requirements",description:"Emergency update to structural requirements following recent safety assessments. Immediate compliance required for all new applications.",effectiveDate:"2024-02-15",publishedDate:"2024-02-10",categories:["residential","commercial","industrial","mixed-use"],severity:"critical",sections:["Part A - Structure","Part B - Fire Safety"],isRead:!1}],sT=()=>{const[e,t]=st.useState(rT),[n,r]=st.useState(rT),[s,a]=st.useState(""),[i,o]=st.useState("all"),[l,c]=st.useState("all"),[d,u]=st.useState(!1);st.useEffect(()=>{let t=e;s&&(t=t.filter(e=>e.title.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())||e.sections.some(e=>e.toLowerCase().includes(s.toLowerCase())))),"all"!==i&&(t=t.filter(e=>e.categories.includes(i))),"all"!==l&&(t=t.filter(e=>e.severity===l)),d&&(t=t.filter(e=>!e.isRead)),r(t)},[e,s,i,l,d]);const h=e=>{switch(e){case"residential":return ie.jsx(fh,{className:"w-3 h-3"});case"commercial":case"mixed-use":default:return ie.jsx(qu,{className:"w-3 h-3"});case"industrial":return ie.jsx(lh,{className:"w-3 h-3"})}},m=e=>{switch(e){case"residential":return"bg-green-100 text-green-800 border-green-200";case"commercial":return"bg-blue-100 text-blue-800 border-blue-200";case"industrial":return"bg-purple-100 text-purple-800 border-purple-200";case"mixed-use":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=e=>{switch(e){case"critical":return ie.jsx(qh,{className:"w-4 h-4 text-red-500"});case"high":return ie.jsx(qh,{className:"w-4 h-4 text-orange-500"});case"medium":return ie.jsx(xh,{className:"w-4 h-4 text-yellow-500"});case"low":return ie.jsx(Zu,{className:"w-4 h-4 text-green-500"});default:return ie.jsx(xh,{className:"w-4 h-4 text-gray-500"})}},f=e=>new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),g=e.filter(e=>!e.isRead).length;return ie.jsx("div",{className:"h-full bg-transparent text-white overflow-y-auto",children:ie.jsxs("div",{className:"px-6 py-8",children:[ie.jsxs(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[ie.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[ie.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-full flex items-center justify-center",children:ie.jsx(Ou,{className:"w-6 h-6 text-white"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-white",children:"Building Regulation Updates"}),ie.jsx("p",{className:"text-gray-400",children:"Stay informed about the latest regulatory changes"})]})]}),g>0&&ie.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:ie.jsxs("p",{className:"text-red-300 text-sm",children:[ie.jsx(qh,{className:"w-4 h-4 inline mr-2"}),"You have ",g," unread regulation update",1!==g?"s":""]})})]}),ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl border border-gray-800 p-6 mb-6",children:ie.jsxs("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-y-0 lg:space-x-4",children:[ie.jsx("div",{className:"flex-1",children:ie.jsxs("div",{className:"relative",children:[ie.jsx(Rh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),ie.jsx(cy,{placeholder:"Search updates...",value:s,onChange:e=>a(e.target.value),className:"pl-10 bg-gray-800/50 border-gray-700 text-white"})]})}),ie.jsxs(mb,{value:i,onValueChange:o,children:[ie.jsx(fb,{className:"w-full lg:w-48 bg-gray-800/50 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"All Categories"})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"all",children:"All Categories"}),ie.jsx(vb,{value:"residential",children:"Residential"}),ie.jsx(vb,{value:"commercial",children:"Commercial"}),ie.jsx(vb,{value:"industrial",children:"Industrial"}),ie.jsx(vb,{value:"mixed-use",children:"Mixed Use"})]})]}),ie.jsxs(mb,{value:l,onValueChange:c,children:[ie.jsx(fb,{className:"w-full lg:w-48 bg-gray-800/50 border-gray-700 text-white",children:ie.jsx(pb,{placeholder:"All Severities"})}),ie.jsxs(yb,{className:"bg-gray-800 border-gray-700",children:[ie.jsx(vb,{value:"all",children:"All Severities"}),ie.jsx(vb,{value:"critical",children:"Critical"}),ie.jsx(vb,{value:"high",children:"High"}),ie.jsx(vb,{value:"medium",children:"Medium"}),ie.jsx(vb,{value:"low",children:"Low"})]})]}),ie.jsxs(by,{variant:d?"default":"outline",onClick:()=>u(!d),className:"w-full lg:w-auto",children:[ie.jsx(uh,{className:"w-4 h-4 mr-2"}),"Unread Only"]})]})}),ie.jsx(Du.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"space-y-4",children:0===n.length?ie.jsx(Ny,{className:"bg-gray-900/50 border-gray-800",children:ie.jsxs(Py,{className:"p-8 text-center",children:[ie.jsx(Ou,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),ie.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Updates Found"}),ie.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters to see more updates."})]})}):n.map((e,n)=>ie.jsx(Du.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*n},children:ie.jsxs(Ny,{className:"bg-gray-900/50 border-gray-800 hover:bg-gray-900/70 transition-all cursor-pointer ".concat(e.isRead?"":"ring-2 ring-emerald-500/20"),children:[ie.jsx(ky,{className:"pb-3",children:ie.jsx("div",{className:"flex items-start justify-between",children:ie.jsxs("div",{className:"flex-1",children:[ie.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[p(e.severity),ie.jsx(Sy,{className:"text-lg ".concat(e.isRead?"text-gray-300":"text-white"),children:e.title}),!e.isRead&&ie.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"})]}),ie.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.categories.map(e=>ie.jsxs(wP,{variant:"outline",className:"".concat(m(e)," border text-xs"),children:[h(e),ie.jsx("span",{className:"ml-1 capitalize",children:e.replace("-"," ")})]},e))})]})})}),ie.jsxs(Py,{className:"pt-0",children:[ie.jsx("p",{className:"text-gray-400 mb-4 line-clamp-2",children:e.description}),ie.jsxs("div",{className:"flex flex-col space-y-3 lg:flex-row lg:space-y-0 lg:items-center lg:justify-between",children:[ie.jsxs("div",{className:"flex flex-col space-y-2 lg:flex-row lg:space-y-0 lg:space-x-6",children:[ie.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[ie.jsx(Hu,{className:"w-4 h-4 mr-2"}),ie.jsxs("span",{children:["Effective: ",f(e.effectiveDate)]})]}),ie.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[ie.jsx(th,{className:"w-4 h-4 mr-2"}),ie.jsxs("span",{children:["Published: ",f(e.publishedDate)]})]})]}),!e.isRead&&ie.jsx(by,{size:"sm",variant:"outline",onClick:()=>{return n=e.id,void t(e=>e.map(e=>e.id===n?Q(X({},e),{isRead:!0}):e));var n},className:"text-emerald-400 border-emerald-400/30 hover:bg-emerald-400/10",children:"Mark as Read"})]}),ie.jsx("div",{className:"mt-3 pt-3 border-t border-gray-800",children:ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsx(Vh,{className:"w-4 h-4 text-gray-500"}),ie.jsx("div",{className:"flex flex-wrap gap-1",children:e.sections.map((e,t)=>ie.jsx("span",{className:"text-xs text-gray-500 bg-gray-800/50 px-2 py-1 rounded",children:e},t))})]})})]})]})},e.id))})]})})},aT=()=>{const e=ct();return ie.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-gray-950 via-black to-gray-950 text-white",children:[ie.jsx(Du.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"glass border-b border-white/5 px-4 sm:px-6 py-4",children:ie.jsxs("div",{className:"flex items-center justify-between",children:[ie.jsx(Du.div,{className:"flex items-center",whileHover:{scale:1.01},transition:{type:"spring",stiffness:400,damping:30},children:ie.jsx("div",{className:"w-28 h-12 sm:w-32 sm:h-16 flex items-center",children:ie.jsx("img",{src:"/lovable-uploads/60efe7f3-1624-45e4-bea6-55cacb90fa21.png",alt:"EezyBuild Logo",className:"w-full h-full object-contain"})})}),ie.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[ie.jsxs(by,{variant:"ghost",onClick:()=>e("/"),className:"text-gray-300 hover:text-white text-sm sm:text-base",children:[ie.jsx(Fu,{className:"w-4 h-4 mr-1 sm:mr-2"}),ie.jsx("span",{className:"hidden sm:inline",children:"Back"}),ie.jsx("span",{className:"sm:hidden",children:"Back"})]}),ie.jsxs(Du.div,{className:"flex items-center space-x-3 bg-emerald-500/10 backdrop-blur-sm px-4 py-2 rounded-full border border-emerald-500/20",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,ease:[.4,0,.2,1]},children:[ie.jsx(nh,{className:"w-4 h-4 text-emerald-400"}),ie.jsx("span",{className:"text-sm text-emerald-300 font-medium",children:"ProMax"})]})]})]})}),ie.jsx("div",{className:"flex-1 min-h-0",children:ie.jsx(sT,{})})]})},iT=()=>{var e,t;const[n]=ut(),r=ct(),{toast:s}=im(),[a,i]=st.useState(!0),[o,l]=st.useState(!1),[c,d]=st.useState(null),[u,h]=st.useState(null),m=n.get("token");st.useEffect(()=>{ae(void 0,null,function*(){if(!m)return h("Invalid invitation link"),void i(!1);try{const{data:e,error:t}=yield Jh.from("team_invitations").select("\n            *,\n            teams (name, description)\n          ").eq("id",m).single();if(t||!e)return h("Invitation not found or expired"),void i(!1);if(e.accepted_at)return h("This invitation has already been used"),void i(!1);if(new Date(e.expires_at)<new Date)return h("This invitation has expired"),void i(!1);d(e)}catch(e){h("Failed to load invitation")}finally{i(!1)}})},[m]);return a?ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:ie.jsxs("div",{className:"flex items-center space-x-2",children:[ie.jsx(yh,{className:"h-4 w-4 animate-spin"}),ie.jsx("span",{children:"Loading invitation..."})]})}):u?ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:ie.jsxs(Ny,{className:"w-full max-w-md",children:[ie.jsxs(ky,{className:"text-center",children:[ie.jsx(Sy,{className:"text-destructive",children:"Invalid Invitation"}),ie.jsx(Cy,{children:u})]}),ie.jsx(Py,{className:"text-center",children:ie.jsx(by,{onClick:()=>r("/"),variant:"outline",children:"Go to App"})})]})}):ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:ie.jsxs(Ny,{className:"w-full max-w-md",children:[ie.jsxs(ky,{className:"text-center",children:[ie.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10",children:ie.jsx(Kh,{className:"h-6 w-6 text-primary"})}),ie.jsx(Sy,{children:"Team Invitation"}),ie.jsxs(Cy,{children:["You've been invited to join ",ie.jsx("strong",{children:null==(e=null==c?void 0:c.teams)?void 0:e.name})]})]}),ie.jsxs(Py,{className:"space-y-4",children:[(null==(t=null==c?void 0:c.teams)?void 0:t.description)&&ie.jsx("p",{className:"text-sm text-muted-foreground text-center",children:c.teams.description}),ie.jsxs("div",{className:"text-center",children:[ie.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Role: ",ie.jsx("span",{className:"font-medium capitalize",children:null==c?void 0:c.role})]}),ie.jsxs("p",{className:"text-sm text-muted-foreground",children:["Invited by: ",null==c?void 0:c.email]})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx(by,{onClick:()=>ae(void 0,null,function*(){if(!c)return;const{data:{user:e}}=yield Jh.auth.getUser();if(!e)return s({title:"Please sign in",description:"You need to be signed in to accept team invitations",variant:"destructive"}),void r("/?showAuth=true");l(!0);try{const{error:t}=yield Jh.from("team_members").insert({team_id:c.team_id,user_id:e.id,role:c.role,invited_by:c.invited_by});if(t)throw t;const{error:n}=yield Jh.from("team_invitations").update({accepted_at:(new Date).toISOString()}).eq("id",c.id);if(n)throw n;s({title:"Welcome to the team!",description:"You've successfully joined ".concat(c.teams.name)}),setTimeout(()=>{r("/")},2e3)}catch(t){s({title:"Error",description:t.message||"Failed to accept invitation. You might already be a member.",variant:"destructive"})}finally{l(!1)}}),disabled:o,className:"w-full",children:o?ie.jsxs(ie.Fragment,{children:[ie.jsx(yh,{className:"mr-2 h-4 w-4 animate-spin"}),"Accepting..."]}):ie.jsxs(ie.Fragment,{children:[ie.jsx(Zu,{className:"mr-2 h-4 w-4"}),"Accept Invitation"]})}),ie.jsx(by,{onClick:()=>r("/"),variant:"outline",className:"w-full",children:"Maybe Later"})]})]})]})})},oT=()=>{const[e]=ut(),t=ct(),{toast:n}=im(),[r,s]=st.useState(!1),[a,i]=st.useState(""),[o,l]=st.useState(""),[c,d]=st.useState(!1),[u,h]=st.useState(!1),m=e.get("access_token"),p=e.get("refresh_token");st.useEffect(()=>{m&&p&&Jh.auth.setSession({access_token:m,refresh_token:p})},[m,p]);return m&&p?ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:ie.jsxs(Ny,{className:"w-full max-w-md",children:[ie.jsxs(ky,{className:"text-center",children:[ie.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10",children:ie.jsx(vh,{className:"h-6 w-6 text-primary"})}),ie.jsx(Sy,{children:"Reset Your Password"}),ie.jsx(Cy,{children:"Enter your new password below"})]}),ie.jsx(Py,{children:ie.jsxs("form",{onSubmit:e=>ae(void 0,null,function*(){if(e.preventDefault(),a===o)if(a.length<6)n({title:"Password too short",description:"Password must be at least 6 characters long",variant:"destructive"});else{s(!0);try{const{error:e}=yield Jh.auth.updateUser({password:a});e?n({title:"Error",description:e.message,variant:"destructive"}):(n({title:"Password Updated",description:"Your password has been successfully updated. You can now sign in."}),setTimeout(()=>{t("/")},2e3))}catch(r){n({title:"Error",description:r.message||"Failed to update password",variant:"destructive"})}finally{s(!1)}}else n({title:"Passwords don't match",description:"Please make sure both passwords are the same",variant:"destructive"})}),className:"space-y-4",children:[ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-sm font-medium",children:"New Password"}),ie.jsxs("div",{className:"relative",children:[ie.jsx(cy,{type:c?"text":"password",value:a,onChange:e=>i(e.target.value),className:"pr-10",placeholder:"Enter new password",required:!0,minLength:6}),ie.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c?ie.jsx(ih,{className:"h-4 w-4"}):ie.jsx(oh,{className:"h-4 w-4"})})]})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx("label",{className:"text-sm font-medium",children:"Confirm New Password"}),ie.jsxs("div",{className:"relative",children:[ie.jsx(cy,{type:u?"text":"password",value:o,onChange:e=>l(e.target.value),className:"pr-10",placeholder:"Confirm new password",required:!0,minLength:6}),ie.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?ie.jsx(ih,{className:"h-4 w-4"}):ie.jsx(oh,{className:"h-4 w-4"})})]})]}),ie.jsxs("div",{className:"space-y-2",children:[ie.jsx(by,{type:"submit",disabled:r,className:"w-full",children:r?ie.jsxs(ie.Fragment,{children:[ie.jsx(yh,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Update Password"}),ie.jsx(by,{type:"button",onClick:()=>t("/"),variant:"outline",className:"w-full",children:"Cancel"})]})]})})]})}):ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:ie.jsxs(Ny,{className:"w-full max-w-md",children:[ie.jsxs(ky,{className:"text-center",children:[ie.jsx(Sy,{className:"text-destructive",children:"Invalid Reset Link"}),ie.jsx(Cy,{children:"This password reset link is invalid or has expired."})]}),ie.jsx(Py,{className:"text-center",children:ie.jsx(by,{onClick:()=>t("/"),variant:"outline",children:"Go to Sign In"})})]})})},lT=new wr,cT=()=>ie.jsx(kr,{client:lT,children:ie.jsx(Bn,{children:ie.jsx(ht,{children:ie.jsxs(mt,{children:[ie.jsx(pt,{path:"/",element:ie.jsx(tT,{})}),ie.jsx(pt,{path:"/notifications",element:ie.jsx(aT,{})}),ie.jsx(pt,{path:"/team-invite",element:ie.jsx(iT,{})}),ie.jsx(pt,{path:"/password-reset",element:ie.jsx(oT,{})}),ie.jsx(pt,{path:"*",element:ie.jsx(nT,{})})]})})})});z(document.getElementById("root")).render(ie.jsx(cT,{}));export{GE as I,QE as N,Fy as W};
